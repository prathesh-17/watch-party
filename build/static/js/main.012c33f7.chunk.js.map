{"version":3,"sources":["serviceWorker.js","context/video-context.js","routes/CreateRoom.js","components/Chatinv.js","components/Video.js","components/VideoUpload.js","routes/Chat.js","components/ListVideos.js","components/VideoFile.js","components/VideoList.js","routes/Room.js","reducers/video.js","routes/selectMedia.js","routers/voiceCheckRouter.js","routes/Login.js","App.js","index.js"],"names":["Boolean","window","location","hostname","match","videoContext","React","createContext","videoConstraints","height","width","CreateRoom","props","useContext","video","dispatch","userVideo","useRef","value","roomID","audioHtml","videoHtml","audioopHtml","audioCount","videoCount","audD","vidD","curA","curV","useState","rooms","setRooms","navigator","mediaDevices","enumerateDevices","then","devices","$","fadeOut","forEach","device","kind","label","deviceId","fadeIn","getUserMedia","exact","audio","stream","current","srcObject","catch","err","console","log","message","useEffect","localStorage","getItem","axios","get","headers","Authorization","res","data","printError","item","html","css","left","transform","setTimeout","create","e","k","val","trim","id","post","user","_id","roomId","status","text","top","disp","roomName","abc","aes","encrypt","toString","name","token","preventDefault","type","voice","voiceOp","options","room","stop","getTracks","map","t","a","getRandomInt","min","max","Math","ceil","floor","random","getColor","r","ind","temp","title2Case","stri","l","toUpperCase","split","length","changeRoom","roomid","url","URL","href","origin","className","onClick","backgroundColor","myRoomDisplay","created","index","key","style","background","member","muted","ref","autoPlay","playsInline","alert","pause","right","RoomName","onChange","placeholder","Chatinv","scrollbarWidth","bottom","Video","vid","video_url","poster","orgPoster","script","document","createElement","src","async","body","appendChild","backgroundImage","xmlns","viewBox","d","elevation","alt","stroke","strokeWidth","strokeLinecap","strokeLinejoin","shapeRendering","points","fill","x","y","role","aria-valuemax","aria-valuemin","aria-valuenow","defaultValue","step","disabled","tabIndex","datavideo","preload","controlsList","crossOrigin","def","VideoUpload","addVideo","required","rows","cx","cy","Chat","chat","addZero","num","root","querySelector","rootMargin","threshold","observer","IntersectionObserver","entries","entry","intersectionRatio","target","hasClass","dateDiffInDays","b","utc1","Date","UTC","getFullYear","getMonth","getDate","utc2","abs","day_name","new_day","day_js","createdAt","diff","getDay","dayjs","format","dayjs_finder","each","observe","this","scrollTop","scrollHeight","animation","temp_color","ownedBy","getHours","getMinutes","color","owner","class","ListVideos","videosList","videosList1","viewVideo","extend","relativeTime","calendar","postion","display","flexDirection","alignItems","wid","marginLeft","marginRight","opacity","username","replace","txt","charAt","substr","toLowerCase","fromNow","videourl","setVideourl","last","load","defposter","VideoList","socket","setVideosList","setVideosList1","vidUrl","setVidUrl","streamRef","createPeersRef","createStreamRef","addPeersRef","socketRef","setUsers","emit","on","users","captureStream","peerID","peer","userToSignal","callerID","Peer","initiator","trickle","signal","duration","createFilePeer","push","payload","incomingSignal","fileOwner","addFilePeer","find","p","webkitURL","filetemp","files","canPlayType","fileUrl","createObjectURL","destroy","arr","i","assignVideos","to","startedBy","closeUrlVideo","reg","str","append","playUrl","accept","Slider","volCh","range","volume","attr","to_","visibility","stopPropagation","hover","clearTimeout","keyup","voCh","fn","textWidth","font","fakeEl","hide","appendTo","nameStyle","setSt","st","Fragment","otherUnpin","onMouseEnter","onMouseLeave","Room","stre","setStre","peers","setPeers","peersRef","actualPeersRef","setChat","substring","lastIndexOf","setRenderer","members","setMembers","myvideos","setMyvideos","videos","durationfinder","hr","sec","createPeer","addPeer","io","connect","transports","audOff","vidOff","peeers","peerObj","peerObj1","filter","borderRight","audOn","vidOn","mouse_is_inside","mouseup","oldt","getAudioTracks","removeTrack","addTrack","newt","replaceTrack","getVideoTracks","play","enabled","ht","ch","len","gridTemplateColumns","myPin","removeClass","dummy","otherPin","lim","addClass","options1","options2","callback","observer2","col","notJoined","includes","retStre","removeItem","SignOut","params","otherPinSel","vids","meUnpin","us","videoReducer","state","action","videoUrl","SelectMedia","CheckRouter","alreadySet","Component","component","rest","pathname","decrypt","crypto","enc","Utf8","indexOf","Login","count","spellCheck","App","useReducer","e_cookie","redirect","Provider","path","ReactDOM","render","StrictMode","getElementById","serviceWorker","ready","registration","unregister","error"],"mappings":"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","file":"static/js/main.012c33f7.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react'\r\n\r\nconst videoContext = React.createContext()\r\n\r\nexport {videoContext as default }","import React,{useContext,useRef,useEffect, useState} from \"react\";\r\nimport videoContext from '../context/video-context'\r\nimport './styles/createRoom.css';\r\nimport $ from 'jquery';\r\nimport aes from 'crypto-js/aes'\r\nimport axios from 'axios'\r\nconst videoConstraints = {\r\n    height: '100%',\r\n    width: '100%'\r\n};\r\n\r\n\r\n\r\nconst CreateRoom = (props) => {\r\n\r\n    const {video,dispatch} = useContext(videoContext)\r\n    const userVideo = useRef();\r\n    const value = props.roomID?\"Join Room\":\"Create Room\"\r\n\r\n    var audioHtml = '<div  id=\"audioDevice\" class = \"drp-dwn-box\"><div class = \"set-prelim\">INPUT DEVICES</div>'\r\n    var videoHtml = '<div  id=\"videoDevice\" class = \"drp-dwn-box\"><div class = \"set-prelim\">VIDEO DEVICES</div>'\r\n    var audioopHtml = '<div class = \"set-prelim\">OUTPUT DEVICES</div>'\r\n    var audioCount=0,videoCount=0,audD = false,vidD = false,curA = false,curV = false;\r\n\r\n    const [rooms,setRooms] = useState([]);\r\n    navigator.mediaDevices.enumerateDevices().then(devices =>{\r\n        $('.vid-on,.aud-on').fadeOut();\r\n        \r\n        devices.forEach((device) => {\r\n            if(device.kind === 'audioinput'){\r\n                if(device.label != ''){\r\n                    curA = true;\r\n                    if(audioCount == 0){audD = device.deviceId}\r\n                    audioCount +=  1;\r\n                    $('.aud-off').fadeOut(300);$('.aud-on').fadeIn(300);\r\n                    audioHtml += '<div class=\"options aud-opt\" value=\"'+device.deviceId+'\">'+device.label+'</i></div>'\r\n                }\r\n                else{\r\n                    audioHtml += '<div class=\"options\" >Default</i></div>'\r\n                }\r\n            }\r\n            else if(device.kind === 'audiooutput'){\r\n                if(device.label!='')\r\n                    audioopHtml += '<div class=\"options aud-op-opt\" value=\"'+device.deviceId+'\">'+device.label+'</i></div>'\r\n                else\r\n                    audioopHtml += '<div class=\"options\" >Default</i></div>'\r\n            }\r\n            else if(device.kind === 'videoinput'){\r\n                if(device.label != ''){\r\n                    if(videoCount == 0){vidD = device.deviceId}\r\n                    curV = true;\r\n                    videoCount += 1;\r\n                    $('.vid-off').fadeOut(300);$('.vid-on').fadeIn(300);\r\n                    videoHtml += '<div class=\"options vid-opt\" value=\"'+device.deviceId+'\">'+device.label+'</i></div>'\r\n                }\r\n                else{\r\n                    videoHtml += '<div class=\"options\" >Default</i></div>'\r\n                }\r\n            }\r\n        });\r\n        navigator.mediaDevices.getUserMedia({  \r\n            video: vidD?{deviceId:{exact:vidD}}:false,\r\n            audio: audD?{deviceId:{exact:audD}}:false\r\n        })\r\n        .then(stream => {\r\n            if(userVideo.current)\r\n            { userVideo.current.srcObject = stream;}\r\n        }).catch(err => {console.log(err.message)})\r\n        audioHtml += (audioopHtml+'</div>')\r\n        videoHtml += '</div>'\r\n        \r\n    })\r\n    useEffect(()=>{\r\n        console.log('local storage : ',localStorage.getItem('vid-token'),localStorage.getItem('id'))\r\n        axios.get('https://watch-party-latest.herokuapp.com/room/me',{\r\n            headers:{\r\n                Authorization: 'Bearer ' + localStorage.getItem('vid-token')\r\n            }\r\n        })\r\n        .then(res => {\r\n            setRooms(res.data)\r\n        })\r\n        .catch(err => {\r\n            console.log(err);\r\n        })\r\n    },[])\r\n    \r\n    const audOn = () => {\r\n        navigator.mediaDevices.getUserMedia({ \r\n            video: curV?{deviceId: {exact: vidD},videoConstraints}:false, \r\n            audio: {deviceId: {exact: audD}}\r\n        }).then(stream => {\r\n            if(userVideo.current)\r\n            { userVideo.current.srcObject = stream;}\r\n            $('.aud-off').fadeOut(1000);$('.aud-on').fadeIn(1000);\r\n        }).catch(err=>{\r\n            alert('Permission Denied');\r\n        })\r\n        curA = true;\r\n    }\r\n    const vidOn = ()=>{\r\n        navigator.mediaDevices.getUserMedia({  \r\n            video: {deviceId: {exact: vidD},videoConstraints},\r\n            audio:curA?{deviceId:{exact:audD}}:false\r\n            }).then(stream => {\r\n                if(userVideo.current)\r\n                { userVideo.current.srcObject = stream;}\r\n                $('.vid-off').fadeOut(1000);$('.vid-on').fadeIn(1000);\r\n            }).catch(err=>{\r\n                alert('Permission Denied');\r\n            })\r\n        curV = true;\r\n    }\r\n    const printError = (item) =>{\r\n        $('.crwrong-text').html('Room - <span class = \"error-room\">'+item+'</span> has already been created')\r\n        $(\".crwrong-message\").css({left:'2%',transform:'scale(1.0)'})\r\n        setTimeout(()=>{\r\n            $(\".crwrong-message\").css({left:'-50%',transform:'scale(0.5)'})\r\n        },5000)\r\n    }   \r\n    function create(e,k = 0) {\r\n        if(!props.roomID && $('.join-room').val().trim()==''){\r\n            return;\r\n        }\r\n        var id;\r\n        if(!props.roomID){\r\n            var roomName = $('.join-room').val().trim();\r\n            var abc = aes.encrypt(video.user.user._id+' '+roomName,'def');\r\n            id = abc.toString();\r\n            axios.post('https://watch-party-latest.herokuapp.com/room/create',{roomId:id,name:roomName},{headers: {\r\n                Authorization: 'Bearer ' + video.user.token \r\n              }})\r\n            .then(res=>{\r\n                disp(id)\r\n            })\r\n            .catch(err=>{\r\n                printError(roomName);\r\n                return;\r\n            })\r\n        }    \r\n        else{\r\n            id = props.roomID;\r\n            axios.post('https://watch-party-latest.herokuapp.com/room/add',{id:video.user.user._id,roomId:props.roomID})\r\n            .then(res=>{\r\n                if(res.data.status == 'NA' && k==0){\r\n                    $('.crwrong-text').text('You have already joined')\r\n                    $(\".crwrong-message\").css({left:'2%',transform:'scale(1.0)'})\r\n                    setTimeout(()=>{\r\n                        $(\".wanna-join\").css({top:'5%',transform:'scale(1.0)'})\r\n                        $(\".crwrong-message\").css({left:'-50%',transform:'scale(0.5)'})\r\n                    },4010)\r\n                    return;\r\n                }\r\n                else{\r\n                    disp(id);\r\n                }\r\n            })\r\n            .catch(err=>{\r\n                console.log(err)\r\n            })\r\n        }\r\n        e.preventDefault()\r\n        \r\n    }\r\n\r\n    function disp(id){\r\n        dispatch({\r\n            type:'SET_EVERYTHING',\r\n            voice : audD,\r\n            voiceOp:audD,\r\n            curA,curV,\r\n            video : vidD,\r\n            options:{audio:audioHtml,video:videoHtml},\r\n            room:true,\r\n            user:{...video.user,room:id}\r\n        })\r\n        window.user = {...video.user,room:id};\r\n    } \r\n\r\n    const vidOff = ()=>{\r\n        stop('video');\r\n        curV = false;\r\n        userVideo.current.pause();\r\n        $('.vid-on').fadeOut(1000);$('.vid-off').fadeIn(1000);\r\n    }\r\n    const audOff = ()=>{\r\n        stop('audio');\r\n        curA = false;\r\n        $('.aud-on').fadeOut(1000);$('.aud-off').fadeIn(1000);\r\n    }\r\n    const stop = k => userVideo.current.srcObject.getTracks().map(async(t) =>{ if(t.kind == k){await t.stop();}});\r\n    \r\n    const roomPrint = (e)=>{\r\n        if($('.join-room').val() == ''){\r\n            $('.crlunderline').css({top:'40%'});\r\n        }\r\n        else{\r\n            $('.crlunderline').css({top:'21.5%'});\r\n        }\r\n        $('.room-name').text($('.join-room').val());\r\n    }\r\n    function getRandomInt(min, max) {\r\n        min = Math.ceil(min);\r\n        max = Math.floor(max);\r\n        return Math.floor(Math.random() * (max - min) + min);\r\n    }\r\n    function getColor(){\r\n        var r = [getRandomInt(10,250), getRandomInt(50,250), getRandomInt(10,250)];\r\n        var ind = getRandomInt(0,3);\r\n        var temp = r[ind];r[ind] = r[1];r[1] = temp;\r\n        return 'rgb('+r[0]+','+r[1]+','+r[2]+')';\r\n    }\r\n    function title2Case(stri){\r\n        stri = stri.toUpperCase();\r\n        var k = stri.split(' ');var l;\r\n        if(k.length == 1){k = k[0];return k[0]}\r\n        else {l = k[0];k = k[1];return l[0]+k[0]}\r\n    }\r\n    const changeRoom = (roomid) =>{\r\n        var url = new URL(window.location.href)\r\n        if(roomid == props.roomID) return;\r\n        window.location.href = url.origin + '/room/' + roomid\r\n    }\r\n    const myRoomDisplay = () =>{\r\n        if($('.my-rooms-btn').css('backgroundColor') == 'rgb(25, 175, 40)'){\r\n            $('.available-rooms').css({transform:'translateX(-102%)'})\r\n            $('.my-rooms-btn').css({backgroundColor:'rgb(175,20,20)'})\r\n            $('.video-surround').css({left:'10%'});\r\n            return;\r\n        }\r\n        $('.available-rooms').css({transform:'translateX(0%)'})\r\n        $('.my-rooms-btn').css({backgroundColor:'rgb(25,175,40)'})\r\n        $('.video-surround').css({left:'20.5%'});   \r\n    }\r\n    const changeUrl = () =>{\r\n        window.location.href = (new URL(window.location.href)).origin + '/create/'\r\n    }\r\n    return (\r\n        <>\r\n            <div className=\"wanna-join\" onClick = {(e)=>create(e,1)}>\r\n                Join<br/>Anyway\r\n            </div>\r\n            <div className = \"my-rooms-btn\" onClick = {()=>myRoomDisplay()}>\r\n                <i className = \"fas fa-wine-glass-alt crlicon\" ></i>\r\n            </div>\r\n            <div className = \"available-rooms\">\r\n                <div className=\"cr-mem-prelim\">Rooms Created ({rooms.created?rooms.created.length:0})</div>\r\n                {\r\n                    rooms.created&&\r\n                    rooms.created.map((item,index) => {\r\n                        return(\r\n                            <div key = {index} className = \"cr-room\" onClick = {()=>changeRoom(item.id)}>\r\n                                <div style = {{background:getColor()}} className=\"crimg-prof1\">{title2Case(item.name)}</div>\r\n                                {item.name} \r\n                            </div>\r\n                        )\r\n                    })\r\n                }\r\n                <div className=\"cr-mem-prelim\">Other Rooms ({rooms.member?rooms.member.length:0})</div>\r\n                {\r\n                    rooms.member&&\r\n                    rooms.member.map((item,index) => {\r\n                        return(\r\n                            <div key = {index} className = \"cr-room\" onClick = {()=>changeRoom(item.id)}>\r\n                                <div style = {{background:getColor()}} className=\"crimg-prof1\">{title2Case(item.name)}</div>\r\n                                {item.name} \r\n                            </div>\r\n                        )\r\n                    })\r\n                }\r\n            </div>\r\n            \r\n            <div className = \"create-room-heading\">{props.roomID?'Join':'Create'} Room</div>\r\n            <div className = \"video-surround\">\r\n                <video muted ref={userVideo} autoPlay playsInline className = \"crvideo\"/>\r\n                <div className = \"vid vid-off cricon-surround\" onClick = {vidOn} ><i className=\"fas fa-video-slash icon\"></i></div>\r\n                <div className = \"vid vid-on cricon-surround\" onClick = {vidOff}><i className=\"fas fa-video icon\"></i></div>\r\n                <div className = \"aud aud-off cricon-surround\" onClick = {audOn}><i className=\"fas fa-microphone-slash icon\"></i></div>\r\n                <div className = \"aud aud-on cricon-surround\" onClick = {audOff}><i className=\"fas fa-microphone icon\"></i></div>\r\n            </div>\r\n            <div className = \"crwrong-message\">\r\n                <i className=\"fas fa-times-circle\"></i>\r\n                <span className = \"crwrong-text\"></span>\r\n            </div>\r\n            <div style = {{right:props.roomID?'40px':'70px'}} className = \"crl\">\r\n                <div className = \"circle-temp\"/>\r\n                <div className = \"circle-temp1\"/>\r\n                <div className = \"circle-temp2\"/>\r\n                {\r\n                    props.roomID?\r\n                    <div className = \"room-name\">{props.RoomName}</div>\r\n                    :\r\n                    <>\r\n                        <div className = \"room-name\"></div>\r\n                        <div className = \"crlunderline\">\r\n                            <span className=\"crlicon-surround\">\r\n                                <i className = \"fas fa-wine-glass-alt crlicon\" ></i>\r\n                            </span>\r\n                            <input onChange = {(e)=>roomPrint(e)} type = \"text\" className = \"join-room\" placeholder = \"Room Name\"/>\r\n                        </div>\r\n                    </>\r\n                }      \r\n                <button className = \"crbtn\" onClick = {create}>{value}</button>\r\n            </div>\r\n            {\r\n                props.roomID&&\r\n                    <button className = \"crbtn createbtn\" onClick = {changeUrl}>Create a Room</button>\r\n\r\n            }\r\n            \r\n        </>\r\n    );\r\n};\r\n\r\nexport default CreateRoom;\r\n","import React from 'react';\r\n\r\n\r\nconst Chatinv = ()=>{\r\n    \r\n    return(\r\n        <>\r\n            <div style={{scrollbarWidth:'none'}} className=\"chat-window\">\r\n                <div style={{scrollbarWidth:'none'}} className=\"chat-output\">\r\n                    <div style={{bottom:'6%',scrollbarWidth:'none'}} className=\"ch-o-bt\">\r\n                    </div>\r\n                </div>\r\n                {/* <div className=\"chat-input\">\r\n                    <div className=\"inp-surround\">\r\n                        <textarea  rows ='1' placeholder=\"Type a Message...\"  id = \"inp\" />\r\n                    </div>\r\n                    <div className = \"chat-send\">\r\n                        <img src = \"/static-img/send_black.png\" alt=\"send\" width=\"18\" height =\"18\" />\r\n                    </div>\r\n                </div> */}\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport {Chatinv as default};","import React,{useContext} from 'react';\r\nimport $ from 'jquery';\r\nimport './styles/video.css'\r\nimport Chatinv from './Chatinv';\r\nimport videoContext from '../context/video-context'\r\n\r\nconst Video = ({vid,stream})=>{\r\n    console.log(vid)\r\n    const video_url = vid.video.video;\r\n    const poster = vid.video.poster;\r\n    const defposter = 'https://raw.githubusercontent.com/Ahmetaksungur/twitter-video-player-clone/master/92456705_506989316849451_7379405183454806542_n.jpg';\r\n    const orgPoster = 'url('+(poster?poster:defposter)+')';\r\n    \r\n    React.useEffect(()=>{\r\n        const script = document.createElement(\"script\");\r\n        script.src = \"/path/to/twivid.js\";\r\n        script.async = true;\r\n        document.body.appendChild(script);\r\n    },[]);\r\n\r\n    return (\r\n    <>\r\n        <div className = \"video vid-url-play\">\r\n            <div className = \"vchat-holder\"> \r\n                <Chatinv/>\r\n            </div>    \r\n            <div className=\"video-preview\" style = {{backgroundImage:orgPoster}}>\r\n                <button className=\"video-start-btn\" >\r\n                    <svg width=\"50\" height=\"50\"  xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\">\r\n                        <path d=\"M256,0C114.833,0,0,114.844,0,256s114.833,256,256,256s256-114.844,256-256S397.167,0,256,0z M357.771,264.969\r\n                            l-149.333,96c-1.75,1.135-3.771,1.698-5.771,1.698c-1.75,0-3.521-0.438-5.104-1.302C194.125,359.49,192,355.906,192,352V160\r\n                            c0-3.906,2.125-7.49,5.563-9.365c3.375-1.854,7.604-1.74,10.875,0.396l149.333,96c3.042,1.958,4.896,5.344,4.896,8.969\r\n                            S360.813,263.01,357.771,264.969z\" elevation = \"2\"  />\r\n                    </svg>\r\n                </button>\r\n            </div>\r\n            <div className=\"video-top\"></div>\r\n\r\n            <div className = \"anim play-anim\"><img className = \"anim-img\" src = \"/static-img/play.png\" alt = \"as\" width=\"20\"height=\"20\"/></div>\r\n\r\n            <div className=\"video-loading\">\r\n                <div className=\"video-loading-spinner\"></div>\r\n            </div>\r\n            \r\n            <div className=\"video-reset\">\r\n                <button className=\"video-reset-btn\">Watch again</button>\r\n\r\n            </div>\r\n            \r\n            <div className = \"video-incoming\">\r\n                <h3 className=\"grad-text\">\r\n                    <span>S</span><span>o</span><span>m</span><span>e</span><span>o</span><span>n</span><span>e</span><span> </span>\r\n                    <span>I</span><span>s</span><span> </span>\r\n                    <span>A</span><span>b</span><span>o</span><span>u</span><span>t</span><span> </span> \r\n                    <span>T</span><span>o</span><span> </span>\r\n                    <span>J</span><span>o</span><span>i</span><span>n</span><span>.</span><span>.</span><span>.</span>\r\n                </h3>\r\n                <h3 className=\"grad-text reflex\">\r\n                    <span>S</span><span>o</span><span>m</span><span>e</span><span>o</span><span>n</span><span>e</span><span> </span>\r\n                    <span>I</span><span>s</span><span> </span>\r\n                    <span>A</span><span>b</span><span>o</span><span>u</span><span>t</span><span> </span> \r\n                    <span>T</span><span>o</span><span> </span>\r\n                    <span>J</span><span>o</span><span>i</span><span>n</span><span>.</span><span>.</span><span>.</span>\r\n                </h3>\r\n                <h3 className=\"grad-text\">\r\n                    <span>P</span><span>l</span><span>e</span><span>a</span><span>s</span><span>e</span><span> </span>\r\n                    <span>W</span><span>a</span><span>i</span><span>t</span>\r\n                </h3>\r\n                <h3 className=\"grad-text reflex\">\r\n                    <span>P</span><span>l</span><span>e</span><span>a</span><span>s</span><span>e</span><span> </span>\r\n                    <span>W</span><span>a</span><span>i</span><span>t</span>\r\n                </h3>\r\n                \r\n            </div>\r\n\r\n            <div className=\"video-player-controls\">\r\n                <div className=\"video-slider\">\r\n                    <div className = \"video-slider-tooltip\">hi</div>\r\n                <div className=\"video-slider-container\">\r\n                    <div className=\"video-slider-bg\">\r\n                        <div className=\"video-slider-buffered\"></div>\r\n                        <div className=\"video-slider-rail\"></div>\r\n                        <div className=\"video-slider-buffer\"></div>\r\n                    </div>\r\n                </div>\r\n\r\n                </div>\r\n                <div className=\"row\">\r\n                <div className=\"wrap\">\r\n                    <div className=\"video-control\">\r\n                        <button className=\"video-control-btn\" >\r\n                            <svg className=\"video-control-play\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" shapeRendering=\"geometricPrecision\">\r\n                            <polygon points=\"5 3 19 12 5 21 5 3\" fill=\"currentColor\"></polygon>\r\n                            </svg>\r\n                            <svg className=\"video-control-pause\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" shapeRendering=\"geometricPrecision\">\r\n                            <rect x=\"6\" y=\"4\" width=\"4\" height=\"16\" fill=\"currentColor\"></rect>\r\n                            <rect x=\"14\" y=\"4\" width=\"4\" height=\"16\" fill=\"currentColor\"></rect>\r\n                            </svg>\r\n\r\n                        </button>\r\n                    </div>\r\n                    <div className=\"video-counts\"><span className=\"video-count-time\">0:00</span><span className=\"video-count-line\">/</span><span className=\"video-count-fulltime\">0:00</span></div>\r\n                    {/* <div className=\"video-pixel-rate\">\r\n                        <div className=\"video-pixel-box\">\r\n                            <div className=\"video-pixel\" >Low</div>\r\n                            <div className=\"video-pixel\" >Medium</div >\r\n                            <div className=\"video-pixel\" >High</div>\r\n                        </div>\r\n                        <div className = \"video-pixel-speed\">\r\n                            Low\r\n                        </div>\r\n                    </div> */}\r\n                    \r\n                </div>\r\n                <div className=\"wrap\">\r\n                    <div className=\"video-chat\" >\r\n                        <img id = \"chat-on\" src = \"/static-img/chat_white.png\" alt = \"pip\" width=\"24\" height = \"24\"></img>\r\n                        <img id = \"chat-off\" src = \"/static-img/chat_off.png\" alt = \"pip\" width=\"24\" height = \"24\"></img>\r\n                    </div>\r\n\r\n                    <div className=\"video-voice\">\r\n                        <div className=\"video-voice-slider\">\r\n                            <div className=\"video-voice-slider-rail\" role=\"slider\" aria-valuemax=\"1\" aria-valuemin = \"0\" aria-valuenow=\"1\">\r\n                                <div className=\"video-voice-slider-buffer\"></div>\r\n                                <input className=\"video-voice-slider-range\" type=\"range\" min=\"0\" max=\"1\" defaultValue=\"1\" step=\"0.01\" />\r\n                            </div>\r\n                        </div>\r\n                        \r\n\r\n                        <button className=\"video-voice-btn\">\r\n                            <svg className=\"video-voice-on\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" fill=\"none\" shapeRendering=\"geometricPrecision\">\r\n                            <path d=\"M11 5L6 9H2v6h4l5 4V5z\"></path>\r\n                            <path d=\"M19.07 4.93a10 10 0 010 14.14M15.54 8.46a5 5 0 010 7.07\"></path>\r\n                            </svg>\r\n                            <svg className=\"video-voice-off\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" fill=\"none\" shapeRendering=\"geometricPrecision\" >\r\n                            <path d=\"M11 5L6 9H2v6h4l5 4V5z\"></path>\r\n                            <path d=\"M23 9l-6 6\"></path>\r\n                            <path d=\"M17 9l6 6\"></path>\r\n                            </svg>\r\n                        </button>\r\n\r\n                    </div>\r\n\r\n                    <div className=\"video-playback-rate\">\r\n                        <div className=\"video-playback-box\">\r\n                            <div className=\"video-playback\" >0.25</div><div className=\"video-playback\">0.50</div ><div className=\"video-playback\">0.75</div>\r\n                            <div className=\"video-playback\">Normal</div>\r\n                            <div className=\"video-playback\">1.25</div><div className=\"video-playback\">1.50</div><div className=\"video-playback\">1.75</div>\r\n                            <div className=\"video-playback\">2.0</div>\r\n                        </div>\r\n                        <div className = \"video-playback-speed\">\r\n                            Normal\r\n                        </div>\r\n                    </div>\r\n                    \r\n                    <div className=\"video-pip\" disabled>\r\n                        <img src = \"/static-img/pip_white.png\" alt = \"pip\" width=\"24\" height = \"24\"></img>\r\n                    </div>\r\n                    \r\n                    <div className=\"full-screen\">\r\n                    <button className=\"full-screen-btn\">\r\n                        <svg className=\"full-screen-open\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" fill=\"none\" shapeRendering=\"geometricPrecision\">\r\n                        <path d=\"M15 3h6v6\"></path>\r\n                        <path d=\"M9 21H3v-6\"></path>\r\n                        <path d=\"M21 3l-7 7\"></path>\r\n                        <path d=\"M3 21l7-7\"></path>\r\n                        </svg>\r\n\r\n                        <svg className=\"full-screen-exit\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" fill=\"none\" shapeRendering=\"geometricPrecision\">\r\n                        <path d=\"M4 14h6v6\"></path>\r\n                        <path d=\"M20 10h-6V4\"></path>\r\n                        <path d=\"M14 10l7-7\"></path>\r\n                        <path d=\"M3 21l7-7\"></path>\r\n                        </svg>\r\n\r\n                    </button>\r\n\r\n                    </div>\r\n                </div>\r\n                </div>\r\n            </div>\r\n            \r\n            <div className=\"video-player\">\r\n                <video poster = {poster} tabIndex=\"-1\" datavideo=\"\" preload=\"auto\" controlsList=\"nodownload\" crossOrigin = \"anonymous\">\r\n                    <source def = {video_url} id = \"org-video-src\" src={video_url} type=\"video/mp4\"/>\r\n                </video>\r\n            </div>\r\n\r\n            \r\n        </div>\r\n        <canvas id=\"canvas\"></canvas>\r\n    </>\r\n)\r\n}\r\nexport {Video as default};","import React,{useEffect} from 'react'\r\nimport './styles/videoUpload.css'\r\n\r\nconst VideoUpload = ({addVideo}) =>{\r\n    window.addVideo = addVideo;\r\n    useEffect(()=>{\r\n        const script = document.createElement(\"script\");\r\n        script.src = \"/path/to/videoUpload.js\";\r\n        script.async = true;\r\n        document.body.appendChild(script);\r\n    },[])\r\n    return(\r\n        <>\r\n            <div className = \"circle-temp2\"/>\r\n            <div className = \"egg-temp\">Video<br/>Upload</div>\r\n            <div className = \"circle-temp1\"/>\r\n            <div className = \"circle-temp3\"/>\r\n            <div className = \"circle-temp4\"/>\r\n\r\n            <input type = \"text\" className = \"video-name\" required placeholder = \"Video Name*\"/>\r\n            <textarea rows = \"10\" className = \"video-desc\" placeholder = \"Video Description\"/>\r\n            <div className = \"file1\">\r\n                <input id = \"imgfile\" type = 'file' className = \"innercircle1\"/>\r\n                <i className=\"fas fa-image\"></i>\r\n            </div>\r\n            <div className=\"holder\">\r\n                <div className = \"ano-holder\">\r\n                    <svg className=\"progress-ring\" width=\"120\" height=\"120\">\r\n                        <circle className=\"progress-ring__circle\" stroke=\"rgb(3,240,250)\" strokeWidth=\"4\" fill=\"transparent\" r=\"53.2\" cx=\"60\" cy=\"60\"/>\r\n                    </svg>\r\n                    <input name=\"file\" id = \"vidfile\" type=\"file\" className=\"cloudinary-fileupload innercircle\" />\r\n                    <i className=\"fas fa-upload k-vid-upload\"></i>\r\n                    <i className=\"fas fa-check\"></i>\r\n                </div>   \r\n            </div>\r\n            \r\n            <div className = \"filename_holder\">\r\n                <div className = \"heading\">Poster</div>\r\n                <div className = \"poster\"></div>\r\n                <div className = \"heading\">Video</div>\r\n                <div className = \"videoflname\"></div>\r\n            </div>\r\n            <div className=\"cloudSubmit\">\r\n                <i className=\"fas fa-arrow-right\"></i>\r\n            </div>\r\n            <div className = \"cloudCancel\">\r\n                <i className=\"fas fa-times-circle cancelreq\"></i>\r\n            </div>\r\n            <div className = \"message\">\r\n            </div>\r\n            <div className = \"wr-message\">\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport {VideoUpload as default}","import React from 'react';\r\nimport './styles/chat.css';\r\nimport $ from 'jquery';\r\nimport dayjs from 'dayjs';\r\nconst Chat = ({chat,id})=>{\r\n    function addZero(num){\r\n        if(num/10<1){\r\n          return '0'+num;\r\n        }\r\n        return num;\r\n    }\r\n    React.useEffect(()=>{\r\n        const script = document.createElement(\"script\");\r\n        script.src = \"/path/to/chat.js\";\r\n        script.async = true;\r\n        document.body.appendChild(script);\r\n    },[]);\r\n    function getRandomInt(min, max) {\r\n        min = Math.ceil(min);\r\n        max = Math.floor(max);\r\n        return Math.floor(Math.random() * (max - min) + min);\r\n    }\r\n    function getColor(){\r\n        var r = [getRandomInt(10,250), getRandomInt(50,250), getRandomInt(10,250)];\r\n        var ind = getRandomInt(0,3);\r\n        var temp = r[ind];r[ind] = r[1];r[1] = temp;\r\n        return 'rgb('+r[0]+','+r[1]+','+r[2]+')';\r\n    }\r\n    const options = {\r\n        root: document.querySelector('ch-o-bt'),\r\n        rootMargin: '0px',\r\n        threshold: [0.1]\r\n    }\r\n    function callback (entries, observer) {\r\n        entries.forEach(entry => {\r\n            if (entry.intersectionRatio > 0.1) {\r\n                $(entry.target).css({transform:' translateX(0%)'})\r\n            } else {\r\n                if($(entry.target).hasClass('message-mine'))\r\n                    $(entry.target).css({transform:' translateX(50%)'})\r\n                else\r\n                    $(entry.target).css({transform:' translateX(-50%)'})\r\n            }\r\n        });\r\n    }\r\n    let observer = new IntersectionObserver(callback, options);\r\n    \r\n    const _MS_PER_DAY = 1000 * 60 * 60 * 24;\r\n    function dateDiffInDays(a, b) {\r\n        const utc1 = Date.UTC(a.getFullYear(), a.getMonth(), a.getDate());\r\n        const utc2 = Date.UTC(b.getFullYear(), b.getMonth(), b.getDate());\r\n        return Math.abs(Math.floor((utc2 - utc1) / _MS_PER_DAY));\r\n    }\r\n    var day_name = ['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'] \r\n    function dayjs_finder(createdAt){\r\n        var day_js = ''\r\n        var diff = dateDiffInDays(new Date(createdAt),new Date())\r\n        if(diff == 0){\r\n            day_js = 'Today';\r\n        }\r\n        else if(diff == 1){\r\n            day_js = 'Yesterday';\r\n        }\r\n        else if(diff <=6 && diff >= 2){\r\n            day_js = day_name[(new Date(createdAt)).getDay()];\r\n        }\r\n        else{\r\n            day_js = dayjs(createdAt).format('YYYY , D MMM ');\r\n        }\r\n        return day_js\r\n    }\r\n    return (\r\n        <>\r\n            <div className=\"chat-window\">\r\n                <div className = \"chat-title\">\r\n                    Chat Room\r\n                    <i className=\"far fa-comment-alt\"></i>\r\n                </div>\r\n                <div className=\"chat-output\">\r\n\r\n                    <div className = \"chat-loader-surround\"><div className = \"chat-loader\"/></div>\r\n                    <div className=\"ch-o-bt\">\r\n                        {chat.length>0?\r\n                            chat.map((t,index)=>{\r\n                                var new_day = false;\r\n                                var day_js = '';\r\n                                if(index!=0){\r\n                                    if(dateDiffInDays(new Date(t.createdAt),new Date(chat[index-1].createdAt)) > 0){\r\n                                        new_day = true;\r\n                                    }\r\n                                }\r\n                                else{\r\n                                    new_day = true;\r\n                                }\r\n                                if(new_day == true){\r\n                                    day_js = dayjs_finder(t.createdAt)\r\n                                }\r\n                                if(index == chat.length-1){\r\n                                    setTimeout(function () {\r\n                                        $('.message-mine').each(\r\n                                            function (ind) {  \r\n                                                observer.observe(this)\r\n                                            }\r\n                                        )\r\n                                        $('.message-other').each(\r\n                                            function (ind) {  \r\n                                                observer.observe(this)\r\n                                            }\r\n                                        )\r\n                                        $('.ch-o-bt')[$('.ch-o-bt').length-1].scrollTop = $('.ch-o-bt')[$('.ch-o-bt').length-1].scrollHeight;\r\n                                                                                \r\n                                    },100);\r\n                                }                               \r\n                                if(t == 'no chat'){\r\n                                    return null;\r\n                                }\r\n                                $('.chat-loader-surround').css({top:'0%'});\r\n                                $('.chat-loader').css({animation:'none'});\r\n                                var temp_color = getColor();\r\n                                var d = new Date(t.createdAt);\r\n                                if(id == t.ownedBy){\r\n                                    return (\r\n                                        <span key = {t._id}>\r\n                                            {\r\n                                                day_js!=''&&\r\n                                                <div className = \"chat-date\">\r\n                                                    {day_js}\r\n                                                </div>\r\n                                            }\r\n                                            <div  className = \"message-mine\" >{t.message}<div className=\"message-time\">{addZero(d.getHours())}:{addZero(d.getMinutes())}</div></div>\r\n                                        </span>\r\n                                    )\r\n                                }\r\n                                else{\r\n                                    return(\r\n                                        <span key = {t._id}>\r\n                                            {\r\n                                                day_js!=''&&\r\n                                                <div className = \"chat-date\">\r\n                                                    {day_js}\r\n                                                </div>\r\n                                            } \r\n                                            <div key = {t._id} className = \"message-other\" ><div className = \"message-owner\" style = {{color:temp_color}}>{t.owner}</div>\r\n                                            {t.message}<div className=\"message-time\">{addZero(d.getHours())}:{addZero(d.getMinutes())}</div></div>\r\n                                        </span>    \r\n                                    )\r\n                                }\r\n                            })\r\n                            :null\r\n                        }\r\n                    </div>\r\n                </div>\r\n                <div className=\"chat-input\">\r\n                    <div className=\"inp-surround\">\r\n                        <textarea  rows ='1' placeholder=\"Type a Message...\"  id = \"inp\" />\r\n                    </div>\r\n                    <div className = \"chat-send\">\r\n                        <i class=\"fas fa-pen-nib\"></i>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\nexport {Chat as default}","import React, { useEffect } from 'react'\r\nimport dayjs from 'dayjs'\r\nimport relativeTime from 'dayjs/plugin/relativeTime'\r\nimport calendar from 'dayjs/plugin/calendar'\r\nimport $ from 'jquery'\r\n\r\nconst ListVideos = ({videosList,videosList1,viewVideo}) =>{\r\n    dayjs.extend(relativeTime)\r\n    dayjs.extend(calendar)\r\n    useEffect(()=>{\r\n        setTimeout(()=>{\r\n            console.log('set Time out running');\r\n            const script = document.createElement(\"script\");\r\n            script.src = \"/path/to/videoList.js\";\r\n            script.async = true;\r\n            document.body.appendChild(script);   \r\n        },300);\r\n    },[])\r\n    function title2Case(stri){\r\n        stri = stri.toUpperCase();\r\n        var k = stri.split(' ');var l;\r\n        if(k.length == 1){k = k[0];return k[0]}\r\n        else {l = k[0];k = k[1];return l[0]+k[0]}\r\n    }\r\n    function toTitleCase(str) {\r\n        return str.replace(\r\n          /\\w\\S*/g,\r\n          function(txt) {\r\n            return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();\r\n          }\r\n        );\r\n    }\r\n\r\n    return(\r\n        <div className = \"video-container\">\r\n                <div className = \"video-caurosel\">\r\n                    <div className = \"circle-temp\"/>\r\n                    <div className = \"circle-temp1\"/>\r\n                    <div className = \"circle-temp3\"/>\r\n                    <div className = \"circle-temp4\"/>\r\n\r\n                    {videosList1.length!=0?\r\n                        <div style = {{width:'100%',height:'100%',postion:'absolute',top:'0',left:'0'}}>\r\n                            <div className = \"vid-caurosel-mover\" style = {{width:videosList1.length*100+'%',display:'flex',flexDirection:'row',alignItems:'center',height:'100%'}}>\r\n                                {   videosList1.length != 0&&\r\n                                    videosList1.map((item,index)=>{\r\n                                        if(index == videosList1.length - 1){\r\n                                            setTimeout(function(){\r\n                                                var wid = $('.video-caurosel').width();\r\n                                                $('.indv-caurosel').css({width:wid*0.8+'px',marginLeft:wid*0.1,marginRight:0.1*wid})\r\n                                                $('.caurosel-name').css({opacity:1.0});\r\n                                            },500);\r\n                                        }\r\n                                        var url  = 'url(\"'+item.video.poster+'\")'\r\n                                        return(\r\n                                            <div onClick = {()=>viewVideo(item)} style = {{backgroundImage:url}} key={index} className = \"indv-caurosel\">\r\n                                                <div className = \"caurosel-name\">{item.video.name}</div>\r\n                                            </div>\r\n                                        )\r\n                                    })\r\n                                }\r\n                            </div>\r\n                        </div>\r\n                    :null}\r\n                    <div className = \"prev-caurosel\"><i className=\"fas fa-chevron-left\"></i></div>\r\n                    <div className = \"next-caurosel\"><i className=\"fas fa-chevron-right\"></i></div>\r\n                </div>\r\n                {   videosList.length != 0&&\r\n                    videosList.map((item,index)=>{\r\n                        return(\r\n                            <div key = {index} className = \"single-video\" onClick = {()=>viewVideo(item)}>\r\n                                <div className = \"circle-temp\"/>\r\n                                <div className = \"circle-temp1\"/>\r\n                                <div className = \"circle-temp2\"/>\r\n\r\n                                <div className = \"sin-vid-poster\"><img src = {item.video.poster} width = \"373\" height = \"250\"/></div>\r\n                                <div className = \"vvideo-name\">{item.video.name}</div>\r\n                                <div className = \"vvideo-info-holder\">\r\n                                    <div className = \"vvideo-views\">12 views</div>\r\n                                    <div className = \"vvideo-owner\">\r\n                                        <div className = \"img-prof2\">{title2Case(item.user.username)}</div>{toTitleCase(item.user.username)}\r\n                                    </div>\r\n                                    <div className = \"vvideo-created\">{dayjs(item.video.createdAt).fromNow()}</div>\r\n                                </div>\r\n                            </div>\r\n                        )\r\n                    })\r\n                }\r\n            </div>    \r\n    )\r\n}\r\n\r\nexport {ListVideos as default}","import React,{useContext, useState} from 'react';\r\nimport $ from 'jquery';\r\nimport './styles/video.css'\r\nimport Chatinv from './Chatinv';\r\nimport videoContext from '../context/video-context'\r\n\r\nconst Video = ({vid,stream})=>{\r\n    console.log('video stream:',stream)\r\n    var video_url = vid;\r\n    if(vid == 'copy'){\r\n        video_url = ''\r\n        setTimeout(()=>{\r\n            $('video')[0].srcObject = stream\r\n        },400)\r\n    }\r\n    const defposter = 'https://raw.githubusercontent.com/Ahmetaksungur/twitter-video-player-clone/master/92456705_506989316849451_7379405183454806542_n.jpg';\r\n    \r\n    const orgPoster = defposter;\r\n    const poster = defposter;\r\n    const [videourl,setVideourl] = useState('');\r\n    React.useEffect(()=>{\r\n        setTimeout(()=>{\r\n            const script = document.createElement(\"script\");\r\n            script.src = \"/path/to/twividFile.js\";\r\n            script.async = true;\r\n            document.body.appendChild(script);\r\n            if(video_url){\r\n                setVideourl(video_url);\r\n                $('#vid-file-stream').last()[0].load();\r\n            }    \r\n        },1000)    \r\n    },[]);\r\n    \r\n    return (\r\n    <>\r\n        <div className = \"video vid-file-main\">\r\n            <div className = \"vchat-holder\"> \r\n                <Chatinv/>\r\n            </div>    \r\n            <div className=\"video-preview\" style = {{backgroundImage:orgPoster}}>\r\n                <button className=\"video-start-btn\" >\r\n                    <svg width=\"50\" height=\"50\"  xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\">\r\n                        <path d=\"M256,0C114.833,0,0,114.844,0,256s114.833,256,256,256s256-114.844,256-256S397.167,0,256,0z M357.771,264.969\r\n                            l-149.333,96c-1.75,1.135-3.771,1.698-5.771,1.698c-1.75,0-3.521-0.438-5.104-1.302C194.125,359.49,192,355.906,192,352V160\r\n                            c0-3.906,2.125-7.49,5.563-9.365c3.375-1.854,7.604-1.74,10.875,0.396l149.333,96c3.042,1.958,4.896,5.344,4.896,8.969\r\n                            S360.813,263.01,357.771,264.969z\" elevation = \"2\"  />\r\n                    </svg>\r\n                </button>\r\n            </div>\r\n            <div className=\"video-top\"></div>\r\n\r\n            <div className = \"anim play-anim\"><img className = \"anim-img\" src = \"/static-img/play.png\" alt = \"as\" width=\"20\"height=\"20\"/></div>\r\n\r\n            <div className=\"video-loading\">\r\n                <div className=\"video-loading-spinner\"></div>\r\n            </div>\r\n            \r\n            <div className=\"video-reset\">\r\n                <button className=\"video-reset-btn\">Watch again</button>\r\n\r\n            </div>\r\n            \r\n            <div className = \"video-incoming\">\r\n                <h3 className=\"grad-text\">\r\n                    <span>S</span><span>o</span><span>m</span><span>e</span><span>o</span><span>n</span><span>e</span><span> </span>\r\n                    <span>I</span><span>s</span><span> </span>\r\n                    <span>A</span><span>b</span><span>o</span><span>u</span><span>t</span><span> </span> \r\n                    <span>T</span><span>o</span><span> </span>\r\n                    <span>J</span><span>o</span><span>i</span><span>n</span><span>.</span><span>.</span><span>.</span>\r\n                </h3>\r\n                <h3 className=\"grad-text reflex\">\r\n                    <span>S</span><span>o</span><span>m</span><span>e</span><span>o</span><span>n</span><span>e</span><span> </span>\r\n                    <span>I</span><span>s</span><span> </span>\r\n                    <span>A</span><span>b</span><span>o</span><span>u</span><span>t</span><span> </span> \r\n                    <span>T</span><span>o</span><span> </span>\r\n                    <span>J</span><span>o</span><span>i</span><span>n</span><span>.</span><span>.</span><span>.</span>\r\n                </h3>\r\n                <h3 className=\"grad-text\">\r\n                    <span>P</span><span>l</span><span>e</span><span>a</span><span>s</span><span>e</span><span> </span>\r\n                    <span>W</span><span>a</span><span>i</span><span>t</span>\r\n                </h3>\r\n                <h3 className=\"grad-text reflex\">\r\n                    <span>P</span><span>l</span><span>e</span><span>a</span><span>s</span><span>e</span><span> </span>\r\n                    <span>W</span><span>a</span><span>i</span><span>t</span>\r\n                </h3>\r\n                \r\n            </div>\r\n\r\n            <div className=\"video-player-controls\">\r\n                <div className=\"video-slider\">\r\n                    <div className = \"video-slider-tooltip\">0.00</div>\r\n                <div className=\"video-slider-container\">\r\n                    <div className=\"video-slider-bg\">\r\n                        <div className=\"video-slider-buffered\"></div>\r\n                        <div className=\"video-slider-rail\"></div>\r\n                        <div className=\"video-slider-buffer\"></div>\r\n                    </div>\r\n                </div>\r\n\r\n                </div>\r\n                <div className=\"row\">\r\n                <div className=\"wrap\">\r\n                    <div className=\"video-control\">\r\n                        <button className=\"video-control-btn\" >\r\n                            <svg className=\"video-control-play\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" shapeRendering=\"geometricPrecision\">\r\n                            <polygon points=\"5 3 19 12 5 21 5 3\" fill=\"currentColor\"></polygon>\r\n                            </svg>\r\n                            <svg className=\"video-control-pause\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" shapeRendering=\"geometricPrecision\">\r\n                            <rect x=\"6\" y=\"4\" width=\"4\" height=\"16\" fill=\"currentColor\"></rect>\r\n                            <rect x=\"14\" y=\"4\" width=\"4\" height=\"16\" fill=\"currentColor\"></rect>\r\n                            </svg>\r\n\r\n                        </button>\r\n                    </div>\r\n                    <div className=\"video-counts\"><span className=\"video-count-time\">0:00</span><span className=\"video-count-line\">/</span><span className=\"video-count-fulltime\">0:00</span></div>\r\n                    {/* <div className=\"video-pixel-rate\">\r\n                        <div className=\"video-pixel-box\">\r\n                            <div className=\"video-pixel\" >Low</div>\r\n                            <div className=\"video-pixel\" >Medium</div >\r\n                            <div className=\"video-pixel\" >High</div>\r\n                        </div>\r\n                        <div className = \"video-pixel-speed\">\r\n                            Low\r\n                        </div>\r\n                    </div> */}\r\n                    \r\n                </div>\r\n                <div className=\"wrap\">\r\n                    <div className=\"video-chat\" >\r\n                        <img id = \"chat-on\" src = \"/static-img/chat_white.png\" alt = \"pip\" width=\"24\" height = \"24\"></img>\r\n                        <img id = \"chat-off\" src = \"/static-img/chat_off.png\" alt = \"pip\" width=\"24\" height = \"24\"></img>\r\n                    </div>\r\n\r\n                    <div className=\"video-voice\">\r\n                        <div className=\"video-voice-slider\">\r\n                            <div className=\"video-voice-slider-rail\" role=\"slider\" aria-valuemax=\"1\" aria-valuemin = \"0\" aria-valuenow=\"1\">\r\n                                <div className=\"video-voice-slider-buffer\"></div>\r\n                                <input className=\"video-voice-slider-range\" type=\"range\" min=\"0\" max=\"1\" defaultValue=\"1\" step=\"0.01\" />\r\n                            </div>\r\n                        </div>\r\n                        \r\n\r\n                        <button className=\"video-voice-btn\">\r\n                            <svg className=\"video-voice-on\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" fill=\"none\" shapeRendering=\"geometricPrecision\">\r\n                            <path d=\"M11 5L6 9H2v6h4l5 4V5z\"></path>\r\n                            <path d=\"M19.07 4.93a10 10 0 010 14.14M15.54 8.46a5 5 0 010 7.07\"></path>\r\n                            </svg>\r\n                            <svg className=\"video-voice-off\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" fill=\"none\" shapeRendering=\"geometricPrecision\" >\r\n                            <path d=\"M11 5L6 9H2v6h4l5 4V5z\"></path>\r\n                            <path d=\"M23 9l-6 6\"></path>\r\n                            <path d=\"M17 9l6 6\"></path>\r\n                            </svg>\r\n                        </button>\r\n\r\n                    </div>\r\n\r\n                    <div className=\"video-playback-rate\">\r\n                        <div className=\"video-playback-box\">\r\n                            <div className=\"video-playback\" >0.25</div><div className=\"video-playback\">0.50</div ><div className=\"video-playback\">0.75</div>\r\n                            <div className=\"video-playback\">Normal</div>\r\n                            <div className=\"video-playback\">1.25</div><div className=\"video-playback\">1.50</div><div className=\"video-playback\">1.75</div>\r\n                            <div className=\"video-playback\">2.0</div>\r\n                        </div>\r\n                        <div className = \"video-playback-speed\">\r\n                            Normal\r\n                        </div>\r\n                    </div>\r\n                    \r\n                    <div className=\"video-pip\" disabled>\r\n                        <img src = \"/static-img/pip_white.png\" alt = \"pip\" width=\"24\" height = \"24\"></img>\r\n                    </div>\r\n                    \r\n                    <div className=\"full-screen\">\r\n                    <button className=\"full-screen-btn\">\r\n                        <svg className=\"full-screen-open\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" fill=\"none\" shapeRendering=\"geometricPrecision\">\r\n                        <path d=\"M15 3h6v6\"></path>\r\n                        <path d=\"M9 21H3v-6\"></path>\r\n                        <path d=\"M21 3l-7 7\"></path>\r\n                        <path d=\"M3 21l7-7\"></path>\r\n                        </svg>\r\n\r\n                        <svg className=\"full-screen-exit\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" fill=\"none\" shapeRendering=\"geometricPrecision\">\r\n                        <path d=\"M4 14h6v6\"></path>\r\n                        <path d=\"M20 10h-6V4\"></path>\r\n                        <path d=\"M14 10l7-7\"></path>\r\n                        <path d=\"M3 21l7-7\"></path>\r\n                        </svg>\r\n\r\n                    </button>\r\n\r\n                    </div>\r\n                </div>\r\n                </div>\r\n            </div>\r\n            \r\n            <div className=\"video-player\">\r\n                <video  id = \"vid-file-stream\" poster = {poster} tabIndex=\"-1\" datavideo=\"\" preload=\"auto\" controlsList=\"nodownload\" crossOrigin = \"anonymous\">\r\n                    <source def = {videourl} id = \"org-video-src\" src={videourl} type=\"video/mp4\"/>\r\n                </video>\r\n            </div>\r\n        </div>\r\n        <canvas id=\"canvas\"></canvas>\r\n    </>\r\n)\r\n}\r\nexport {Video as default};","import React, { useEffect,useState,useContext, useRef } from 'react';\r\nimport './styles/videoList.css';\r\nimport axios from 'axios';\r\nimport $ from 'jquery'\r\nimport VideoPlayer from './Video'\r\nimport videoContext from '../context/video-context'\r\nimport ListVideos from './ListVideos'\r\nimport VideoFilePlayer from './VideoFile'\r\nimport Peer from 'simple-peer'\r\n\r\nconst VideoList = ({socket})=>{\r\n\r\n    const {video} = useContext(videoContext)\r\n    const [videosList,setVideosList] = useState([]);\r\n    const [videosList1,setVideosList1] = useState([]);\r\n    const [vidUrl,setVidUrl] = useState({});\r\n    const userVideo = useRef();\r\n    const streamRef = useRef();\r\n    const createPeersRef = useRef([]);\r\n    const createStreamRef = useRef();\r\n    const addPeersRef = useRef();\r\n    const socketRef = useRef();\r\n    const [users,setUsers] = useState(false);\r\n    \r\n\r\n    useEffect(()=>{\r\n        if(socket){\r\n            socketRef.current = socket;\r\n            socketRef.current.emit(\"join room file\", {roomID:video.user.room,type:'help'});\r\n                \r\n            socketRef.current.on(\"all users file\", users => {\r\n                console.log('all users : ',users,$('#vid-file-stream')[0])\r\n                if(!($('#vid-file-stream')[0])) return;\r\n                var stream = $('#vid-file-stream')[0].captureStream();\r\n                createStreamRef.current = stream;\r\n                console.log('other users : ',users);\r\n                users.forEach((id) => {\r\n                    const peer = createFilePeer(id, socketRef.current.id,stream);\r\n                    var temp = {peerID: id,peer}\r\n                    createPeersRef.current.push(temp)\r\n                })\r\n            })\r\n            \r\n            socketRef.current.on(\"user joined file\", payload => {\r\n                console.log('user joined file running...')\r\n                const peer = addFilePeer(payload.signal, payload.callerID);\r\n                addPeersRef.current = peer;\r\n                peer.on('stream',stream => {\r\n                    console.log(stream);\r\n                    userVideo.current = 'copy'\r\n                    streamRef.current = stream\r\n                    setUsers(a => !a)\r\n                })\r\n                setUsers(a=>!a)\r\n            });\r\n            socketRef.current.on(\"receiving returned signal file\", payload => {\r\n                const item = createPeersRef.current.find(p => p.peerID === payload.id);\r\n                item.peer.signal(payload.signal);\r\n            });\r\n            var URL = window.URL || window.webkitURL\r\n            $('#vid-file-select').on('change',function (e) {\r\n                var filetemp = this.files[0]\r\n                if(!filetemp) return;\r\n                var type = filetemp.type\r\n                var videoNode = document.createElement('video')\r\n                var canPlay = videoNode.canPlayType(type)\r\n                if(canPlay == '') return;\r\n                var fileUrl = URL.createObjectURL(filetemp)\r\n                \r\n                userVideo.current = fileUrl;\r\n                setUsers(a => !a)\r\n                \r\n            })\r\n            socketRef.current.on('video end file',()=>{\r\n                streamRef.current = null;\r\n                userVideo.current = '';\r\n                window.fileOwner = '';\r\n                addPeersRef.current.destroy();\r\n                setUsers(a => !a)\r\n            })\r\n        }\r\n    },[socket])\r\n\r\n    function createFilePeer(userToSignal, callerID, stream) {\r\n        \r\n        const peer = new Peer({\r\n            initiator: true,\r\n            trickle: false,\r\n            stream,\r\n        });\r\n        peer.on(\"signal\", signal => {\r\n            socketRef.current.emit(\"sending signal file\", { userToSignal, callerID, signal,vid:$('video')[0].duration })\r\n        })\r\n        return peer;\r\n    }\r\n\r\n    function addFilePeer(incomingSignal, callerID) {\r\n        const peer = new Peer({\r\n            initiator: false,\r\n            trickle: false,\r\n        })\r\n        window.fileOwner = callerID\r\n        peer.on(\"signal\", signal => {\r\n            socketRef.current.emit(\"returning signal file\", { signal, callerID })\r\n        })\r\n\r\n        peer.signal(incomingSignal);\r\n\r\n        return peer;\r\n    }\r\n\r\n    useEffect(()=>{\r\n        axios.get('https://watch-party-latest.herokuapp.com/video/all')\r\n        .then(res => {\r\n            setVideosList(res.data.video);\r\n            assignVideos(res.data.video);\r\n        })\r\n    },[])\r\n    function assignVideos(arr){\r\n        var k = []\r\n        for(var i = 0;i<4&&i<arr.length;i++){\r\n            k.push(arr[i])\r\n        }\r\n        setVideosList1(k);\r\n    }\r\n    useEffect(()=>{\r\n        if(socket){\r\n            setTimeout(()=>{\r\n                socket.emit('any-video-selected',video.user.room);\r\n                socket.on('video-selected',function(item){\r\n                    setVidUrl(item)\r\n                })\r\n                socket.on('any-video-selected',function (item) {\r\n                    console.log('any-video-selected runnijng',window.vidUrl,item,socket.id)\r\n                    socket.emit('yes-video-selected',{vidUrl:(window.vidUrl?window.vidUrl:{}),to:item})\r\n                })\r\n                socket.on('yes-video-selected',function (item) {\r\n                    console.log('yes-video-selected',item)\r\n                    setVidUrl(item)\r\n                })\r\n            },500);\r\n        }\r\n    },[socket])\r\n\r\n\r\n    if(socket){\r\n        const viewVideo = (item) => {\r\n            window.vidUrl = item;\r\n            if(vidUrl.startedBy){\r\n                alert('You aren\\'t allowed to close this video');\r\n                return;\r\n            }\r\n            socket.emit('video-selected',{item:item,roomID:video.user.room,startedBy:video.user.user._id});\r\n            setVidUrl(item)\r\n        }\r\n        const closeFileVideo = ()=>{\r\n            if(window.fileOwner) return;\r\n            createPeersRef.current.map(item => {\r\n                item.peer.destroy();\r\n            })\r\n            socketRef.current.emit('video end file',video.user.room)\r\n            userVideo.current = ''\r\n              \r\n        }\r\n        var vid;\r\n        const playUrl = (e) => {\r\n            var k = $('.vlrl .crbtn');\r\n            if(k.find('.cr-loading-spinner').length){\r\n                return;\r\n            }\r\n            var reg = /((([A-Za-z]{3,9}:(?:\\/\\/)?)(?:[-;:&=\\+\\$,\\w]+@)?[A-Za-z0-9.-]+(:[0-9]+)?|(?:www.|[-;:&=\\+\\$,\\w]+@)[A-Za-z0-9.-]+)((?:\\/[\\+~%\\/.\\w-_]*)?\\??(?:[-\\+=&;%@.\\w_]*)#?(?:[\\w]*))?)/\r\n            var str = $('.join-room').val()\r\n            if(str.match(reg) && str.match(reg).length != 0){\r\n                k.text('')\r\n                k.append('<div className=\"cr-loading-spinner\"/>');\r\n                vid = document.createElement('video')\r\n                vid.src = str;\r\n                $(vid).on('error',function(){\r\n                    $('.vlrl-wr-text').text('Sorry, Unable to play the url')\r\n                    $('.vlrl-wr-message').css({left:'3%',transform:'scale(1.0)'})\r\n                    k.text('Play Url')\r\n                    setTimeout(()=>{$('.vlrl-wr-message').css({left:'-33%',transform:'scale(0.5)'})},4000)\r\n                })\r\n                $(vid).on('canplay',function(){\r\n                    viewVideo({video:{video:vid.src,poster:''}})\r\n                    k.text('Play Url')\r\n                })\r\n            }\r\n            else{\r\n                $('.vlrl-wr-text').text('Please enter a valid url');\r\n                $('.vlrl-wr-message').css({left:'3%',transform:'scale(1.0)'})\r\n                setTimeout(()=>{$('.vlrl-wr-message').css({left:'-33%',transform:'scale(0.5)'})},4000)\r\n                return;\r\n            }\r\n            \r\n\r\n        }\r\n        const closeUrlVideo = () => {\r\n            $('.vlrl').css({transform:'scale(0)'});\r\n            $('.url-container').css({opacity:'0'});\r\n            setTimeout(()=>{$('.url-container,.vlrl').fadeOut(10);},600)\r\n        }\r\n        const openUrlVideo = () => {\r\n            console.log('openUrlrunning...')\r\n            $('.url-container,.vlrl').fadeIn(10);\r\n            setTimeout(()=>{\r\n                $('.vlrl').css({transform:'scale(1)'});\r\n                $('.url-container').css({opacity:'1'});\r\n            },60);\r\n        }\r\n        return(\r\n            <>\r\n                {vidUrl.video?\r\n                    <>\r\n                        {vidUrl.startedBy?\r\n                            null:\r\n                            <div className = \"vvideo-back\" onClick = {()=>viewVideo({})}>\r\n                                <i className=\"fas fa-times\"></i>\r\n                            </div>\r\n                        }\r\n                        <div className = 'vvideo-holder'>\r\n                            <VideoPlayer vid = {vidUrl} />\r\n                        </div>\r\n                    </>\r\n                :   \r\n                    <>\r\n                    {userVideo.current?\r\n                        <>\r\n                            {window.fileOwner?\r\n                                null:\r\n                                <div className = \"vvideo-back\" onClick = {()=>closeFileVideo()}>\r\n                                    <i className=\"fas fa-times\"></i>\r\n                                </div>\r\n                            }\r\n                            <div className = 'vvideo-holder'>\r\n                                <VideoFilePlayer vid={userVideo.current} stream = {streamRef.current} />\r\n                            </div>\r\n                        </>\r\n                    :\r\n                        <>\r\n\r\n                            <div className = \"url-container\" onClick = {closeUrlVideo()}>\r\n                                <div className = \"vvideo-back\" onClick = {()=>closeUrlVideo()}>\r\n                                    <i className=\"fas fa-times\"></i>\r\n                                </div>\r\n                            \r\n                                <div className = \"vlrl-wr-message\">\r\n                                    <i className=\"fas fa-times-circle\"></i>\r\n                                    <span className = \"vlrl-wr-text\"></span>\r\n                                </div>\r\n                                <div className = \"vlrl\">\r\n                                    <div className = \"circle-temp\"/>\r\n                                    <div className = \"circle-temp1\"/>\r\n                                    <div className = \"circle-temp2\"/>\r\n                                    <div className = \"crlunderline\">\r\n                                        <span className=\"crlicon-surround\">\r\n                                            <i className = \"fas fa-link crlicon\" ></i>\r\n                                        </span>\r\n                                        <input type = \"url\" className = \"join-room\" placeholder = \"Paste a Url here\"/>\r\n                                    </div>\r\n                                    <button className = \"crbtn\" onClick = {(e)=>{playUrl(e)}}>Play Url</button>\r\n                                </div>\r\n                            </div>\r\n                            \r\n                            <div className=\"vlholder\">\r\n                                <input type=\"file\" id = \"vid-file-select\" className = \"vlinnercircle\" accept=\"video/*\"/>\r\n                                <i className=\"fas fa-share-alt vlk-vid-upload\"></i>\r\n                                <div className = \"vlano-holder\">\r\n                                    Share a Video\r\n                                </div>   \r\n                            </div>\r\n                            <div className = \"vlholder1\" onClick = {()=>openUrlVideo()}>\r\n                                <div className=\"vlinnercircle1\"/>\r\n                                <i className=\"fas fa-link vlk-vid-upload1\"></i>\r\n                                <div className = \"vlano-holder1\">\r\n                                    Share a Link\r\n                                </div>   \r\n                            </div>\r\n                            \r\n                            <ListVideos videosList = {videosList} videosList1 = {videosList1} viewVideo = {(i)=>viewVideo(i)} />\r\n                        </>\r\n                    }\r\n                    </>\r\n                }         \r\n            </>\r\n        )\r\n    }\r\n    else{\r\n        return null;\r\n    }\r\n}\r\n\r\nexport {VideoList as default}","import React, { useContext, useEffect, useRef, useState } from \"react\";\r\nimport io from \"socket.io-client\";\r\nimport Peer from \"simple-peer\";\r\nimport VideoPlayer from '../components/Video';\r\nimport './styles/room.css'\r\nimport axios from 'axios'\r\nimport $ from 'jquery'\r\nimport VideoUpload from '../components/VideoUpload'\r\n\r\nimport videoContext from '../context/video-context'\r\nimport Chat from './Chat'\r\nimport VideoList from '../components/VideoList'\r\n\r\nconst videoConstraints = {\r\n    height: 'auto',\r\n    width: 'auto'\r\n};\r\n\r\nconst UserInfo = (props) =>{\r\n    return(\r\n        <div className = \"user-info\">\r\n            <div className = \"user-info-top\">\r\n                <div className = \"img-shadow\"><div style ={{background:props.col}} className = 'img-prof'>{props.title}</div></div>\r\n                <div className = \"user-inform\">\r\n                    <div className = \"name\">{props.user.username}</div>\r\n                    <div className = \"email\">{props.user.email}</div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst Slider = (props) =>{\r\n    function volCh() {\r\n        var range =  $(this).val();\r\n        $(props.id+' .voice-slider-buffer').css(\"width\", range * 100 + \"%\");\r\n        props.vid.volume = range;\r\n        $(props.id+' .voice-slider-range').attr(\"value\", range);\r\n        if (range == 0) {\r\n            props.vid.muted = true;\r\n            $(props.id+' .vol-on').fadeOut(300,function(){$(props.id+' .vol-off').fadeIn(300)});\r\n        } else {\r\n            props.vid.muted = false;\r\n            $(props.id+' .vol-off').fadeOut(300,function(){$(props.id+' .vol-on').fadeIn(300);});\r\n        }\r\n    }\r\n    function voCh(e){\r\n        e.stopPropagation();\r\n    }\r\n    useEffect(()=>{\r\n        if(!props.vid) return;\r\n        var to_;\r\n        $(props.id+' .voice-slider').css({width:'0px',visibility:'hidden',opacity:0});\r\n        $(props.id+' .vol-on').fadeIn(300,function(){$(props.id+' .vol-off').fadeOut(300)})\r\n        $(props.id+' .vol-on').on('click',function(e){\r\n            e.stopPropagation();\r\n            $(props.id+' .vol-on').fadeOut(300,function(){$(props.id+' .vol-off').fadeIn(300)});\r\n        })\r\n        $(props.id+' .vol-off').on('click',function(e){\r\n            e.stopPropagation();\r\n            $(props.id+' .vol-off').fadeOut(300,function(){$(props.id+' .vol-on').fadeIn(300);});\r\n        })\r\n\r\n        $(props.id+' .vol-on,'+props.id+' .vol-off,'+props.id+' .voice-slider').hover(function(){\r\n            if(to_) clearTimeout(to_)\r\n            $(props.id+' .voice-slider').css({width:'100px',opacity:'1',visibility:'visible'})\r\n            $(props.id+' .volume-changer').css({transform:'translateX(-102px)'});\r\n        },\r\n        function(){\r\n            to_ = setTimeout(function(){\r\n                $(props.id+' .voice-slider').css({width:'0px',opacity:'0',visibility:'hidden'})\r\n                $(props.id+' .volume-changer').css({transform:'translateX(0px)'});\r\n            },2000)\r\n        })\r\n        \r\n        $(props.id+' .voice-slider-range').on(\"input change\", volCh);\r\n        $(props.id+' .voice-slider-range').keyup(volCh).keyup();  \r\n\r\n    },[])\r\n    if(!props.vid) return null;\r\n    return(\r\n        <div className = \"volume-changer\" onClick = {(e)=>voCh(e)}>\r\n            <div className = \"vol-surround vol-on\"><img src = \"/static-img/vol.png\" width=\"17\" height = \"17\"/></div>\r\n            <div className = \"vol-surround vol-off\"><img src = \"/static-img/vol_off.png\" width=\"17\" height = \"17\"/></div>\r\n            \r\n            <div className=\"voice-slider\">\r\n                <div className=\"voice-slider-rail\" role=\"slider\" aria-valuemax=\"1\" aria-valuemin = \"0\" aria-valuenow=\"1\">\r\n                    <div className=\"voice-slider-buffer\"/>\r\n                    <input className=\"voice-slider-range\" type=\"range\" min=\"0\" max=\"1\" defaultValue=\"1\" step=\"0.01\" />\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n    )\r\n}\r\nconst Video = (props) => {\r\n    $.fn.textWidth = function(text, font) {\r\n        if (!$.fn.textWidth.fakeEl) $.fn.textWidth.fakeEl = $('<span>').hide().appendTo(document.body);\r\n        $.fn.textWidth.fakeEl.text(text || this.val() || this.text()).css('font', font || this.css('font'));\r\n        return $.fn.textWidth.fakeEl.width();\r\n      };\r\n    const [dummy,setDummy] = useState(false)\r\n    const ref = useRef();\r\n    if(props.user){\r\n        var wid = $('<p>'+props.user.username.toUpperCase()+'</p>').textWidth();\r\n        var nameStyle = {width:wid+15+'px',left:'calc(98% - '+(wid + 10)+'px)'}\r\n    }\r\n    useEffect(() => {\r\n        var temp = false;\r\n        props.peer.on(\"stream\", stream => {\r\n            console.log('on stream running .....',props.peer);\r\n            ref.current.srcObject = stream;\r\n            temp = true;\r\n            props.setSt({id:props.id,stream:stream});\r\n        });\r\n        if(!temp && props.st){\r\n            ref.current.srcObject = props.st.stream\r\n        }\r\n    }, []);\r\n    const hov = (e)=>{\r\n        $('.other .rvideo-pin').html('UN <i className=\"fas fa-map-pin ricon\"></i>')\r\n    }\r\n    const unhov = (e)=>{\r\n        $('.other .rvideo-pin').html('<i className=\"fas fa-map-pin ricon\"></i>')\r\n        \r\n    }\r\n    return (\r\n        <React.Fragment>\r\n             <video  playsInline autoPlay ref={ref} className=\"rvideo\"/>\r\n            {props.user &&\r\n                <>\r\n                <div className = \"r-container\">\r\n                    <div onClick = {(e)=>props.otherUnpin(e)} onMouseEnter={hov} onMouseLeave={unhov} className = \"rvideo-pin\"><i className=\"fas fa-map-pin ricon\"></i></div>\r\n                    <div style = {nameStyle} className = \"rvideo-name\">{props.user.username}</div>\r\n                </div>\r\n                <Slider vid = {$('#'+props.id+' video')} id={'#'+props.id} />\r\n                </>\r\n            }\r\n        </React.Fragment> \r\n    );\r\n}\r\n\r\nconst Room = (props) => {\r\n    const [stre,setStre] = useState([]);\r\n    const [peers, setPeers] = useState([]);\r\n    const socketRef = useRef();\r\n    const userVideo = useRef();\r\n    const peersRef = useRef([]);\r\n    const actualPeersRef = useRef([]);\r\n    const userStream = useRef();\r\n    const senders = useRef([]);\r\n    const [chat,setChat] = useState([]);\r\n    var roomID = window.location.href.substring(window.location.href.lastIndexOf('/') + 1);\r\n    var i=true;\r\n    const {video,dispatch} = useContext(videoContext)\r\n    const [renderer,setRenderer] = useState(false);\r\n    const [members,setMembers] = useState([]);\r\n    const [users,setUsers] = useState([]);\r\n    const [rooms,setRooms] = useState([]);\r\n    const [myvideos,setMyvideos] = useState([]);\r\n    \r\n    function addZero(num){\r\n        if(num == 0) return '0';\r\n        if(num/10<1){\r\n          return '0'+num;\r\n        }\r\n        return num;\r\n    }\r\n    function titleCase(str) {\r\n        return str.toLowerCase().split(' ').map(function(word) {\r\n            return word.replace(word[0], word[0].toUpperCase());\r\n        }).join(' ');\r\n    }\r\n\r\n    React.useEffect(()=>{\r\n        const script = document.createElement(\"script\");\r\n        script.src = \"/path/to/room.js\";\r\n        script.async = true;\r\n        document.body.appendChild(script);\r\n        if(video.curV){$('.vid-off').fadeOut(300);}\r\n        else{$('.vid-on').fadeOut(300);}\r\n        if(video.curA){$('.aud-off').fadeOut(300);}\r\n        else{$('.aud-on').fadeOut(300);}\r\n        \r\n    },[]);\r\n    React.useEffect(()=>{\r\n        axios.post('https://watch-party-latest.herokuapp.com/room/members',{id:video.user.user._id,roomId:video.user.room})\r\n        .then(res=>{\r\n            setMembers(res.data)\r\n        })\r\n    },[])\r\n    React.useEffect(()=>{\r\n        axios.get('https://watch-party-latest.herokuapp.com/video/me',{\r\n            headers:{\r\n            Authorization: 'Bearer '+video.user.token\r\n            }\r\n        })\r\n        .then(res => {\r\n            var vid,videos = res.data.video;\r\n            console.log(videos.length)\r\n            durationfinder(vid,videos,0) \r\n        })\r\n    },[])\r\n\r\n    const addVideo = (vids) =>{\r\n        console.log('vids add video',vids)\r\n        var vid;\r\n        durationfinder(vid,[vids],0);\r\n    }\r\n\r\n    function durationfinder(vid,videos,i){\r\n        if(i>=videos.length) {setMyvideos(a=>[...a,...videos]);return;}\r\n        vid = '<video ><source src = \"'+videos[i].video+'\" type = \"video/mp4\"></video>'\r\n        $(vid).on('loadedmetadata',function(){\r\n          var hr = addZero(Math.floor(this.duration/3600))\r\n          var min = addZero(Math.floor((this.duration%3600)/60))\r\n          var sec = addZero(Math.floor((this.duration%3600)%60))\r\n          videos[i].duration = (hr=='0'?'':(hr+':'))+min+':'+sec;\r\n          durationfinder(vid,videos,i+1)\r\n        })\r\n      }\r\n\r\n    React.useEffect(()=>{\r\n        axios.post('https://watch-party-latest.herokuapp.com/chat/get',{id:video.user.user._id,roomId:video.user.room},{\r\n            headers:{\r\n                Authorization: 'Bearer ' + video.user.token\r\n            }\r\n        })\r\n        .then(res=>{\r\n            setChat(res.data);\r\n        })\r\n        .catch(err=>{\r\n            console.log(err);\r\n        })\r\n    },[]);\r\n    \r\n    \r\n    useEffect(() => {\r\n        socketRef.current = io.connect('https://watch-party-latest.herokuapp.com/',{transports: ['websocket', 'polling', 'flashsocket']});\r\n        window.socket = socketRef.current\r\n        try{\r\n            navigator.mediaDevices.getUserMedia({ \r\n                video: video.video?{deviceId:{exact:video.video}}:false,\r\n                audio: video.voice?{deviceId:{exact:video.voice}}:false\r\n            })\r\n            .then(stream => {\r\n                if(userVideo.current)\r\n                { userVideo.current.srcObject = stream;}\r\n                if(!video.curA && video.voice){\r\n                    audOff();\r\n                }\r\n                if(!video.curV && video.video){\r\n                    vidOff();\r\n                }\r\n                socketRef.current.emit(\"join room\", {id:video.user.user._id,roomID:video.user.room,type:'normal'});\r\n\r\n                socketRef.current.on('duplicate check',function({id}){\r\n                    if(id == video.user.user._id){\r\n                        window.location.href = (new URL(window.location.href)).origin + '/create/'\r\n                    }\r\n                })\r\n                \r\n                socketRef.current.on(\"all users\", users => {\r\n                    const peeers = [];\r\n                    users.forEach((id) => {\r\n                        \r\n                        const peer = createPeer(id, socketRef.current.id, stream);\r\n                        var temp = {peerID: id,peer,user:null}\r\n                        peersRef.current.push(temp)\r\n                        if(peersRef.current.length<15){\r\n                            actualPeersRef.current.push(temp)\r\n                        }\r\n                        peeers.push(peer);\r\n                    })\r\n                    setPeers(users => [...users,...peeers]);\r\n                })\r\n\r\n                socketRef.current.on(\"user joined\", payload => {\r\n                    const peer = addPeer(payload.signal, payload.callerID, stream);\r\n                    var temp = {peerID: payload.callerID,peer,user:payload.user}\r\n                    peersRef.current.push(temp)\r\n                    if(peersRef.current.length<15){\r\n                        actualPeersRef.current.push(temp)\r\n                    }\r\n                    setUsers(user => [...user,payload.user])\r\n                });\r\n\r\n                socketRef.current.on(\"receiving returned signal\", payload => {\r\n                    const item = peersRef.current.find(p => p.peerID === payload.id);\r\n                    item.user = payload.user\r\n                    item.peer.signal(payload.signal);\r\n                    setUsers(user => [...user,payload.user])\r\n                    // setRenderer(a => !a)\r\n                    // console.log('item user : ',item.user)\r\n                });\r\n            })\r\n            .catch(err=>{\r\n                \r\n                socketRef.current.emit(\"join room\", {id:video.user.user._id,roomID:video.user.room,type:'help'});\r\n                \r\n                socketRef.current.on('duplicate check',function({id}){\r\n                    if(id == video.user.user._id){\r\n                        window.location.href = (new URL(window.location.href)).origin + '/create/'\r\n                    }\r\n                })\r\n\r\n                socketRef.current.on(\"all users\", users => {\r\n                    const peeers = [];\r\n                    users.forEach((id) => {\r\n                        const peer = createPeer(id,socketRef.current.id,null);\r\n                        var temp = {peerID: id,peer,user:null}\r\n                        peersRef.current.push(temp)\r\n                        if(peersRef.current.length<15){\r\n                            actualPeersRef.current.push(temp)\r\n                        }\r\n                        peeers.push(peer);\r\n                    })\r\n                    setPeers(users => [...users,...peeers]);\r\n                })\r\n\r\n                socketRef.current.on(\"user joined\", payload => {\r\n                    const peer = addPeer(payload.signal, payload.callerID, null);\r\n                    var temp = {peerID: payload.callerID,peer,user:payload.user}\r\n                    peersRef.current.push(temp)\r\n                    if(peersRef.current.length<15){\r\n                        actualPeersRef.current.push(temp)\r\n                    }\r\n                    setUsers(user => [...user,payload.user])\r\n                });\r\n\r\n                socketRef.current.on(\"receiving returned signal\", payload => {\r\n                    console.log(peers);\r\n                    const item = peersRef.current.find(p => p.peerID === payload.id);\r\n                    item.user = payload.user;\r\n                    item.peer.signal(payload.signal);\r\n                    setUsers(user => [...user,payload.user])\r\n                });\r\n            })\r\n\r\n            socketRef.current.on(\"user left\",id =>{\r\n                const peerObj = peersRef.current.find(p => p.peerID === id)\r\n                if(!peerObj) return;\r\n\r\n                var user = peerObj.user;\r\n                const peerObj1 = actualPeersRef.current.find(p => p.peerID === id)\r\n                if(peerObj){\r\n                    peerObj.peer.destroy()\r\n                }\r\n                if(peerObj1){peerObj1.peer.destroy()}\r\n                peersRef.current = peersRef.current.filter(p => p.peerID !== id)\r\n                actualPeersRef.current = actualPeersRef.current.filter(p => p.peerID !== id)\r\n                var k = stre.filter(t => t.peerID!=id);\r\n                setStre([...k]);\r\n                if(actualPeersRef.current.length == 0 && !$('.me').hasClass('rvideo-surround')){\r\n                    otherUnpin(0);\r\n                }\r\n                k = users.filter(t => t._id!=user._id);\r\n                setUsers([...k])\r\n            })\r\n        }\r\n        catch(err){\r\n        }\r\n\r\n    }, []);\r\n    function createPeer(userToSignal, callerID, stream) {\r\n        const peer = new Peer({\r\n            initiator: true,\r\n            trickle: false,\r\n            stream,\r\n        });\r\n        peer.on(\"signal\", signal => {\r\n            console.log('sending signal...',callerID);\r\n            socketRef.current.emit(\"sending signal\", { userToSignal, callerID, signal,user:video.user.user })\r\n        })\r\n        return peer;\r\n    }\r\n\r\n    function addPeer(incomingSignal, callerID, stream) {\r\n        const peer = new Peer({\r\n            initiator: false,\r\n            trickle: false,\r\n            stream,\r\n        })\r\n        \r\n        peer.on(\"signal\", signal => {\r\n            console.log('returning signal ',callerID)\r\n            socketRef.current.emit(\"returning signal\", { signal, callerID,user:video.user.user })\r\n        })\r\n\r\n        peer.signal(incomingSignal);\r\n\r\n        return peer;\r\n    }\r\n    React.useEffect(()=>{\r\n        var k = $(video.options.audio)\r\n        $('.container').append(k);\r\n        k = $(video.options.video)\r\n        $('.container').append(k);\r\n        if(!video.voice){ \r\n            $('#audioDevice .options').css({borderRight:'3px solid rgb(3,240,100)'})\r\n        }    \r\n        else{\r\n            $('.aud-opt').each(function(ind){\r\n                if($(this).attr('value') == video.voice){\r\n                    $(this).css({borderRight:'3px solid rgb(3,240,100)'})\r\n                }\r\n            })\r\n            $('.aud-op-opt').each(function(ind){\r\n                if($(this).attr('value') == video.voiceOp){\r\n                    $(this).css({borderRight:'3px solid rgb(3,240,100)'})\r\n                }\r\n            })\r\n        }\r\n        if(!video.video){ \r\n            $('#videoDevice .options').css({borderRight:'3px solid rgb(3,240,100)'})\r\n        }    \r\n        else{\r\n            $('.vid-opt').each(function(ind){\r\n                if($(this).attr('value') == video.video){\r\n                    $(this).css({borderRight:'3px solid rgb(3,240,100)'})\r\n                }\r\n            })\r\n        }\r\n        $('.aud-opt').on('click',function(){\r\n            if(video.voice == $(this).attr('value')) return;\r\n            $('.aud-opt').css({borderRight:'none'})\r\n            $(this).css({borderRight:'3px solid rgb(3,240,100)'})\r\n            video.voice = $(this).attr('value')\r\n            audOn();\r\n        })\r\n        $('.vid-opt').on('click',function(){\r\n            if(video.video == $(this).attr('value')) return;\r\n            $('.vid-opt').css({borderRight:'none'})\r\n            $(this).css({borderRight:'3px solid rgb(3,240,100)'})\r\n            video.video = $(this).attr('value');\r\n            vidOn();\r\n        })\r\n        var mouse_is_inside=false;\r\n        $('.drp-dwn-box').hover(function(){ \r\n            console.log('hover')\r\n            mouse_is_inside=true; \r\n        }, function(){ \r\n            console.log('hover not')\r\n            mouse_is_inside=false; \r\n        });\r\n    \r\n        $(document).mouseup(function(){ \r\n            if(! mouse_is_inside) $('.drp-dwn-box').fadeOut(100);\r\n        });\r\n    },[])\r\n    \r\n    useEffect(()=>{\r\n        axios.get('https://watch-party-latest.herokuapp.com/room/me',{\r\n            headers:{\r\n                Authorization: 'Bearer ' + video.user.token\r\n            }\r\n        })\r\n        .then(res => {\r\n            setRooms(res.data)\r\n        })\r\n        .catch(err => {\r\n            console.log(err);\r\n        })\r\n    },[])\r\n\r\n    \r\n    var curV = false,curA = false;\r\n    if(video.video) curV = true;if(video.voice) curA = true;\r\n\r\n    const audOn = () => {\r\n        navigator.mediaDevices.getUserMedia({ \r\n            video: curV?{deviceId: {exact: video.video},videoConstraints}:false, \r\n            audio: {deviceId: {exact: video.voice}}\r\n        }).then(stream => {\r\n            var oldt = userVideo.current.srcObject.getAudioTracks()[0]\r\n            if(userVideo.current)\r\n            { \r\n                userVideo.current.srcObject.removeTrack(oldt)\r\n                userVideo.current.srcObject.addTrack(stream.getAudioTracks()[0])\r\n            }\r\n            var newt = userVideo.current.srcObject.getAudioTracks()[0];\r\n            $('.aud-off').fadeOut(200,function(){$('.aud-on').fadeIn(200);})\r\n            peers.map(t=>{\r\n                t.replaceTrack(oldt,newt,userVideo.current.srcObject)\r\n            })\r\n        }).catch(err=>{\r\n            console.log(err); \r\n            alert('Permission Denied');\r\n        })\r\n        curA = true;\r\n    }\r\n    const vidOn = ()=>{\r\n        navigator.mediaDevices.getUserMedia({  \r\n            video: {deviceId: {exact: video.video},videoConstraints},\r\n            audio:curA?{deviceId:{exact:video.voice}}:false\r\n        }).then(stream => {\r\n            var oldt = userVideo.current.srcObject.getVideoTracks()[0]\r\n            if(userVideo.current)\r\n            { \r\n                console.log(\"current changed .....\")\r\n                userVideo.current.srcObject.removeTrack(oldt)\r\n                userVideo.current.srcObject.addTrack(stream.getVideoTracks()[0])\r\n                userVideo.current.play();\r\n            }\r\n            var newt = userVideo.current.srcObject.getVideoTracks()[0];\r\n            $('.vid-off').fadeOut(200,function(){$('.vid-on').fadeIn(200);})\r\n            peers.map(t=>{\r\n                t.replaceTrack(oldt,newt,userVideo.current.srcObject)\r\n            })\r\n        })\r\n        .catch(err=>{\r\n            alert('Permission Denied');\r\n        })\r\n        curV = true;\r\n        \r\n\r\n    }\r\n    const vidOff = ()=>{\r\n        var k = userVideo.current.srcObject.getVideoTracks()[0];\r\n        k.enabled = false;\r\n        stop('video');\r\n        curV = false;\r\n        userVideo.current.pause();\r\n        $('.vid-on').fadeOut(200,function(){$('.vid-off').fadeIn(200);})\r\n\r\n    }\r\n    const audOff = ()=>{\r\n        var k = userVideo.current.srcObject.getAudioTracks()[0];\r\n        k.enabled = false;\r\n        stop('audio');\r\n        curA = false;\r\n        $('.aud-on').fadeOut(200,function(){$('.aud-off').fadeIn(200);})\r\n        \r\n    }\r\n    const stop = k => userVideo.current.srcObject.getTracks().map(async(t) =>{ if(t.kind == k){await t.stop();}});\r\n    var wid = 1100,ht = 620;\r\n    \r\n    const ch = (k = 0)=>{\r\n        var len = Math.min(actualPeersRef.current.length + 1,$('.rvideo-surround').length);\r\n        if(len>=1){\r\n            $('.rvideo-surround').css({width:'1000px',height:'600px'});\r\n        }\r\n        if(len>=2){\r\n            $('.rvideo-surround').css({width:wid/2,height:ht/2});\r\n        }\r\n        if(len>=5){\r\n            $('.rvideo-grid').css({gridTemplateColumns:'auto auto auto'})\r\n            $('.rvideo-surround').css({width:wid/3,height:ht/2.8});\r\n        }\r\n        if(len>=10){\r\n            $('.rvideo-grid').css({gridTemplateColumns:'auto auto auto auto'})\r\n            $('.rvideo-surround').css({width:wid/3.8,height:ht/3.1});\r\n        }\r\n        if(len>=13){\r\n            $('.rvideo-grid').css({gridTemplateColumns:'auto auto auto auto'})\r\n            $('.rvideo-surround').css({width:wid/3.8,height:ht/3.8});\r\n        }\r\n    }\r\n    ch()\r\n    if(!(actualPeersRef.current.length == 0 && peersRef.current.length>0)) \r\n        $('.me .rvideo-pin').fadeOut();\r\n    const myPin = ()=>{\r\n        $('.me').find('.rvideo-pin').fadeIn(500);\r\n        if(actualPeersRef.current.length == 0){\r\n            return;\r\n        }\r\n        else{\r\n            actualPeersRef.current = []\r\n            $('.other').removeClass('rvideo-surround')\r\n            setRenderer(dummy => !dummy)\r\n            ch();\r\n        }\r\n    }\r\n    const otherPin = (peerID)=>{\r\n        var item = peersRef.current.find(p => p.peerID == peerID);\r\n        // console.log(item);\r\n        $('.me').fadeOut();\r\n        $('.me').removeClass('rvideo-surround');\r\n        $('.other .rvideo-pin').fadeIn(500);\r\n        actualPeersRef.current = [item];\r\n        setRenderer(dummy => !dummy)\r\n        ch();\r\n    }\r\n    const otherPinSel = (user) => {\r\n        // console.log(user);\r\n        const peer = peersRef.current.find(t => t.user._id == user._id);\r\n        otherPin(peer.peerID)\r\n    }\r\n    const otherUnpin = (e)=>{  \r\n        if(e!=0)\r\n            e.stopPropagation(); \r\n        console.log('running other unpin...')\r\n        var peer = actualPeersRef.current[0];var lim = 15;\r\n        for(var i = actualPeersRef.current.length;i<=lim && i<peersRef.current.length;i++){\r\n            if(peer && peer.peerID == peersRef.current[i].peerID){lim = 16;continue;}\r\n            actualPeersRef.current.push(peersRef.current[i])\r\n        }\r\n        $('.me').addClass('rvideo-surround')\r\n        $('.me').fadeIn();\r\n        ch();\r\n        setRenderer(dummy => !dummy)\r\n    }\r\n    \r\n    const meUnpin =(e)=>{\r\n        $('.me .rvideo-pin').fadeOut();\r\n        if(actualPeersRef.current.length == 0 && peersRef.current.length == 0){\r\n            return;\r\n        }\r\n        if(actualPeersRef.current.length >= 2){\r\n            return;\r\n        }\r\n        e.stopPropagation();\r\n        for(var i = 0;i<15&&i<peersRef.current.length&&actualPeersRef.current.length<peersRef.current.length;i++){\r\n            actualPeersRef.current.push(peersRef.current[i])\r\n        }\r\n        $('.me .rvideo-pin').fadeOut(500);\r\n        setRenderer(dummy => !dummy)\r\n        ch();\r\n\r\n    }\r\n    const options = {\r\n        root: document.querySelector('r-members'),\r\n        rootMargin: '0px',\r\n        threshold: [0.1]\r\n    }\r\n    const options1 = {\r\n        root: document.querySelector('r-videos'),\r\n        rootMargin: '0px',\r\n        threshold: [0.1]\r\n    }\r\n    const options2 = {\r\n        root: document.querySelector('r-rooms'),\r\n        rootMargin: '0px',\r\n        threshold: [0.1]\r\n    }  \r\n    function callback (entries, observer) {\r\n        entries.forEach(entry => {\r\n            if (entry.intersectionRatio > 0.1) {\r\n                $(entry.target).css({transform:' translateX(0%)'})\r\n            } else {\r\n                $(entry.target).css({transform:' translateX(-50%)'})\r\n            }\r\n        });\r\n    }\r\n      \r\n    let observer = new IntersectionObserver(callback, options);\r\n    let observer1 = new IntersectionObserver(callback, options1); \r\n    let observer2 = new IntersectionObserver(callback, options2);  \r\n\r\n\r\n    function getRandomInt(min, max) {\r\n        min = Math.ceil(min);\r\n        max = Math.floor(max);\r\n        return Math.floor(Math.random() * (max - min) + min);\r\n    }\r\n    function getColor(){\r\n        var r = [getRandomInt(10,250), getRandomInt(50,250), getRandomInt(10,250)];\r\n        var ind = getRandomInt(0,3);\r\n        var temp = r[ind];r[ind] = r[1];r[1] = temp;\r\n        return 'rgb('+r[0]+','+r[1]+','+r[2]+')';\r\n    }\r\n    function title2Case(stri){\r\n        stri = stri.toUpperCase();\r\n        var k = stri.split(' ');var l;\r\n        if(k.length == 1){k = k[0];return k[0]}\r\n        else {l = k[0];k = k[1];return l[0]+k[0]}\r\n    }\r\n    var col = getColor()\r\n    var notJoined = members.filter(i=>!users.map(( user ) => user._id).includes(i._id));\r\n    const changeAudio = ()=>{\r\n        $('#videoDevice').fadeOut(10);\r\n        $('#audioDevice').fadeIn(10);\r\n    }\r\n    const changeVideo = ()=>{\r\n        $('#audioDevice').fadeOut(10);\r\n        $('#videoDevice').fadeIn(10);\r\n    }\r\n    const retStre = (peerID)=>{\r\n       return stre.find(t=>t.id == peerID);\r\n    }\r\n    const changeRoom = (roomid) =>{\r\n        var url = new URL(window.location.href)\r\n        if(roomid == video.user.room) return;\r\n        window.location.href = url.origin + '/room/' + roomid\r\n    }\r\n    const SignOut = () => {\r\n        localStorage.removeItem('id');\r\n        localStorage.removeItem('vid-token');\r\n        var url = new URL(window.location.href)\r\n        axios.post('https://watch-party-latest.herokuapp.com/users/logout',{\r\n            id:video.user.user._id,token:video.user.token\r\n        })\r\n        .then(res => {\r\n            window.location.href = url.origin\r\n            dispatch({\r\n                type:'SET_VOICE',\r\n                voice : false\r\n            })\r\n            dispatch({\r\n                type:'SET_AUDOP',\r\n                voiceOp:false\r\n            })\r\n            dispatch({\r\n                type:'SET_CUR',\r\n                curA:false,curV:false\r\n            })\r\n            dispatch({\r\n                type:'SET_VIDEO',\r\n                video : false\r\n            })\r\n            dispatch({\r\n                type:'SET_OPTIONS',\r\n                options:{audio:'',video:''}\r\n            })\r\n            dispatch({\r\n                type:'SET_ROOM',\r\n                room:false\r\n            })\r\n            dispatch({\r\n                type:'SET_USER',\r\n                user:null\r\n            })\r\n        })\r\n        .catch(err=>{\r\n            console.log('error in logging out');\r\n        })\r\n    }\r\n    return (\r\n        <>\r\n\r\n            <div className = \"r-dashboard\">\r\n                <div className = \"dashboard-selector\">\r\n                    <div className = \"dashboard-option\" id = \"home\">\r\n                        <i className=\"fas fa-h-square d-opt-icon\"></i>\r\n                    </div>\r\n                    <div className = \"dashboard-option\" id = \"vidup\">\r\n                        <i className=\"fas fa-upload d-opt-icon\"></i>\r\n                    </div>\r\n                    <div className = \"dashboard-option\" id = \"vidch\">\r\n                        <i className=\"fas fa-video d-opt-icon\"></i>\r\n                    </div>\r\n                    <div className = \"dashboard-option\" id = \"vid\">\r\n                        <i className=\"fab fa-youtube d-opt-icon\"></i>\r\n                    </div>\r\n                    <div className = \"d-opt-selector\"/>\r\n                </div>\r\n                \r\n                <div className = \"rholder\" onClick = {()=>SignOut()}>\r\n                    <div className=\"rinnercircle\"/>\r\n                    <i class=\"fas fa-sign-out-alt rk-vid-upload\"></i>\r\n                </div>\r\n\r\n                <div className = \"r-rooms\">\r\n                    \r\n                    <div className=\"r-mem-prelim\">Rooms Created ({rooms.created?rooms.created.length:0})</div>\r\n                    {\r\n                        rooms.created&&\r\n                        rooms.created.map((item,index) => {\r\n                            return(\r\n                                <div key = {index} className = \"r-room\" onClick = {()=>changeRoom(item.id)}>\r\n                                    <div style = {{background:getColor()}} className=\"img-prof1\">{title2Case(item.name)}</div>\r\n                                    {item.name} {item.id == video.user.room?<div className = \"current-room\"/>:null}\r\n                                </div>\r\n                            )\r\n                        })\r\n                    }\r\n                    <div className=\"r-mem-prelim\">Other Rooms ({rooms.member?rooms.member.length:0})</div>\r\n                    {\r\n                        rooms.member&&\r\n                        rooms.member.map((item,index) => {\r\n                            if(index == rooms.member.length-1){\r\n                                setTimeout(function () {\r\n                                    $('.r-room').each(\r\n                                        function (ind) {  \r\n                                            observer2.observe(this)\r\n                                        }\r\n                                    )\r\n                                },100);\r\n                            }\r\n                            return(\r\n                                <div key = {index} className = \"r-room\" onClick = {()=>changeRoom(item.id)}>\r\n                                    <div style = {{background:getColor()}} className=\"img-prof1\">{title2Case(item.name)}</div>\r\n                                    {item.name} {item.id == video.user.room?<div className = \"current-room\"/>:null}\r\n                                </div>\r\n                            )\r\n                        })\r\n                    }\r\n                </div>\r\n                <div className = \"r-videos\">\r\n                    {\r\n                        myvideos.length!=0?\r\n                        <>\r\n                            <div className = \"r-mem-prelim\">Your Videos</div>\r\n                            {\r\n                                myvideos.map((item,index) =>{\r\n                                    if(index == myvideos.length-1){\r\n                                        setTimeout(function () {\r\n                                            $('.r-video-').each(\r\n                                                function (ind) {  \r\n                                                    observer2.observe(this)\r\n                                                }\r\n                                            )\r\n                                        },100);\r\n                                    }\r\n                                    return(\r\n                                        <div key = {index} className = \"r-video-\">\r\n                                            <div className = \"vid-poster\"><img src = {item.poster} width = \"100\" height = \"75\"/></div>\r\n                                            <div className = \"vid-name\">{item.name}</div>\r\n                                            <div className = \"vid-views\">12 views</div>\r\n                                            <div className = \"vid-duration\">{item.duration}</div>\r\n                                        </div>    \r\n                                    )\r\n                                })\r\n                            }\r\n                        </>\r\n                        :<div className = \"r-mem-prelim\">No Videos Uploaded</div>\r\n                    }\r\n                </div>    \r\n                <div className = 'r-members' >\r\n                    <div className = 'r-mem-prelim'>Total Members ({members.length+1})</div>\r\n                    <div className = 'r-mem-prelim'>Online ({users.length+1})</div>\r\n                    <div className = 'r-member' onClick = {(e)=>{myPin(e)}}>\r\n                        <div style = {{background:col}} className=\"img-prof\">{title2Case(video.user.user.username)}</div>\r\n                        {video.user.user.username} (you)\r\n                    </div>\r\n                    \r\n                    {\r\n                        users.map((user,index)=>{\r\n                            if(index == peersRef.current.length-1){\r\n                                setTimeout(function (params) {\r\n                                    $('.r-member').each(\r\n                                        function (ind) {  \r\n                                            observer.observe(this)\r\n                                        }\r\n                                    )\r\n                                },100);\r\n                            }\r\n                            return (\r\n                                <div className = 'r-member' key = {index} onClick = {()=>{otherPinSel(user)}}>\r\n                                    \r\n                                    <div style = {{background:getColor()}} className=\"img-prof\">{title2Case(user.username)}</div>\r\n                                    {user.username}\r\n                                </div>\r\n                            )\r\n                        })\r\n                    }\r\n                    <div className = 'r-mem-prelim'>Offline</div>\r\n                    {\r\n                        notJoined.map((t,index) => {\r\n                            if(index == notJoined.length-1){\r\n                                setTimeout(function (params) {\r\n                                    $('.r-member').each(\r\n                                        function (ind) {  \r\n                                            observer.observe(this)\r\n                                        }\r\n                                    )\r\n                                },100);\r\n                            }\r\n                            return (\r\n                                <div className = 'r-member' key = {index}>\r\n                                    <div style = {{background:getColor()}} className=\"img-prof\">{title2Case(t.username)}</div>\r\n                                    {t.username}\r\n                                </div>\r\n                            )\r\n                        })\r\n                    }\r\n\r\n                </div>\r\n            </div>\r\n            \r\n            <div className = \"overall-container\">\r\n                <div className = \"inside-overall-container\">\r\n                    <div className = \"video-list\">\r\n                        <VideoList socket = {socketRef.current} />\r\n                    </div>\r\n                    <div className = \"video-upload-container\">\r\n                        <VideoUpload addVideo = {(i)=>addVideo(i)}/>\r\n                    </div>\r\n                    <div className = \"container\">\r\n                        <div className = \"circle-temp2\"/>\r\n                        <div className = \"egg-temp\"/>\r\n                        <div className = \"circle-temp1\"/>\r\n                        <div className = \"circle-temp3\"/>\r\n                        <div className = \"circle-temp4\"/>\r\n                    <div className = \"rvideo-grid\">\r\n                        <div className = \"rvideo-surround me\" onClick={()=>myPin()}>\r\n                            <video muted width=\"100%\" height='100%' ref={userVideo} autoPlay playsInline className = \"rvideo\"/>\r\n                            <div className = \"r-container\">\r\n                                <div onClick = {(e)=>meUnpin(e)} className = \"rvideo-pin\"><i className=\"fas fa-map-pin ricon\"></i></div>\r\n                                <div className = \"rvideo-name\">you</div>\r\n                            </div>\r\n                        </div>             \r\n                        {actualPeersRef.current.length > 0?\r\n                            actualPeersRef.current.map(({peerID,peer,user}, index) => {\r\n                                if(index == actualPeersRef.current.length - 1){\r\n                                    setTimeout(function(){ch();\r\n                                        if($('.me').hasClass('rvideo-surround')){\r\n                                            $('.other .rvideo-pin').fadeOut();\r\n                                        }\r\n                                    },300);\r\n                                }\r\n                                return (\r\n                                    <div key={index} id = {peerID} onClick = {()=>otherPin(peerID)} className = \"rvideo-surround other\">\r\n                                        <Video setSt = {(k)=>{setStre(us=>[...us,k])}} st = {retStre(peerID)} otherUnpin = {(e)=>{otherUnpin(e)}} id = {peerID} peer={peer} user = {user} className = \"rvideo\"/>  \r\n                                    </div> \r\n                                );\r\n                            }\r\n                        )\r\n                        :\r\n                        null}\r\n                        \r\n                        \r\n                    </div>\r\n                    \r\n\r\n                    <div className = \"vid-btn-holder\">\r\n                        <div className = \"vid vid-off crricon-surround\" onClick = {vidOn} ><i className=\"fas fa-video-slash icon\"></i></div>\r\n                        <div className = \"vid vid-on crricon-surround\" onClick = {vidOff}><i className=\"fas fa-video icon\"></i></div>\r\n                        <div className = \"drp-dwn\" onClick = {()=>changeVideo()}><i className=\"fas fa-caret-down\"></i></div>\r\n                    </div>\r\n                    <div className = \"aud-btn-holder\">\r\n                        <div className = \"aud aud-off crricon-surround\" onClick = {audOn}><i className=\"fas fa-microphone-slash icon\"></i></div>\r\n                        <div className = \"aud aud-on crricon-surround\" onClick = {audOff}><i className=\"fas fa-microphone icon\"></i></div>\r\n                        <div className = \"drp-dwn\" onClick = {()=>changeAudio()}><i className=\"fas fa-caret-down\"></i></div>\r\n                    </div>\r\n                </div>\r\n                </div>    \r\n            </div>\r\n            \r\n            <div className = 'ricon-surround ch-open'>\r\n                <i className=\"fas fa-comment-alt ricon\"></i>\r\n                Chat\r\n            </div>\r\n            <div className = 'ricon1-surround ch-close'>\r\n                <i className=\"fas fa-chevron-right ricon1\"></i>\r\n            </div>\r\n            <div className = 'rchat-holder'>\r\n                <Chat id = {video.user.user._id} chat = {chat} />\r\n            </div>        \r\n        </>\r\n    );\r\n};\r\n\r\nexport default Room;\r\n\r\n\r\n\r\n","const videoReducer = (state,action) =>{\r\n    switch(action.type){\r\n      case 'SET_VOICE':\r\n            return { ...state,voice:action.voice}\r\n      case 'SET_AUDOP':\r\n            return { ...state,voiceOp:action.voiceOp}\r\n      case 'SET_URL':\r\n          return {...state,url:action.url}\r\n      case 'SET_VIDEO':\r\n        return {...state,video:action.video}\r\n      case 'SET_ROOM':\r\n        return {...state,room:action.room}\r\n      case 'SET_NAME':\r\n        return {...state,name:action.name}\r\n      case 'SET_USER':\r\n        return {...state,user:action.user}\r\n      case 'SET_CUR':\r\n        return {...state,curV:action.curV,curA:action.curA}\r\n      case 'SET_OPTIONS':\r\n        return {...state,options:action.options}\r\n      case 'SET_VIDEO_URL':\r\n        return {...state,videoUrl:action.videoUrl}\r\n      case 'SET_EVERYTHING':\r\n        return {...state,voice:action.voice,voiceOp:action.voiceOp,video:action.video,room:action.room,\r\n                curV:action.curV,curA:action.curA,options:action.options,user:action.user  \r\n        }\r\n      default:\r\n        return state\r\n    }\r\n  }\r\n\r\n  export {videoReducer as default}","import React,{useContext} from 'react'\r\nimport videoContext from '../context/video-context'\r\nimport CreateRoom from './CreateRoom'\r\nconst SelectMedia = (props) =>{\r\n    const {video,dispatch} = useContext(videoContext)\r\n\r\n    const roomID = props.roomID;\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <CreateRoom {...props} roomID={roomID}/>\r\n        </React.Fragment>\r\n    );\r\n};\r\n\r\nexport default SelectMedia","import React from 'react'\r\nimport { Route ,Redirect} from 'react-router-dom'\r\nimport SelectMedia from '../routes/selectMedia'\r\nimport aes from 'crypto-js/aes'\r\nimport crypto from 'crypto-js'\r\n\r\n\r\nexport const CheckRouter = ({\r\n    alreadySet,\r\n    component : Component,\r\n    ...rest\r\n}) =>{\r\n        var k = (new URL(window.location.href)).pathname;\r\n        var roomID = k.replace('/room/','');\r\n        var def = aes.decrypt(roomID,'def');\r\n        var k = def.toString(crypto.enc.Utf8);\r\n\r\n        var RoomName = k.substr(k.indexOf(' ')+1);\r\n        // console.log(k.substr(k.indexOf(' ')+1));\r\n        if(RoomName == ''){\r\n            alert(\"Sorry No Such Rooms...\");\r\n            roomID = '';RoomName = '';\r\n            window.location.href = (new URL(window.location.href)).origin + '/create';\r\n        }\r\n    return (\r\n     <Route {...rest} component={(props) =>(\r\n            !!alreadySet ? (\r\n                <Component /> \r\n            ) : (\r\n                <SelectMedia roomID={roomID} RoomName = {RoomName} {...props}/>\r\n            )\r\n        )} />\r\n)\r\n}\r\n\r\nexport default CheckRouter","import React from 'react'\r\nimport './styles/login.css'\r\n\r\nconst Login = () => {\r\n    React.useEffect(()=>{\r\n        const script = document.createElement(\"script\");\r\n        script.src = \"/path/to/login.js\";\r\n        script.async = true;\r\n        document.body.appendChild(script);\r\n    },[]);\r\n    return(\r\n        <>\r\n            <div className = 'login-bg'>\r\n                <div className = \"wrong-message\">\r\n                    The Email or Password is incorrect\r\n                </div>\r\n                <div className = \"login\">\r\n                    <div className = \"caurosel\">\r\n                        <div className = \"caurosel-container\">\r\n                            <div className = \"temp\">\r\n                                <div className=\"temp-cover\">Create a Party</div>\r\n                                <div className=\"temp-cover\">Invite Your Friends</div>                            \r\n                            </div>\r\n                            <div className = \"temp\">\r\n                                <div className=\"temp-cover\">Share Your Video File</div>\r\n                                <div className=\"temp-cover\">Watch Along</div>\r\n                                \r\n                            </div>\r\n                            <div className = \"temp\">\r\n                                <div className=\"temp-cover\">Experience Endless Entertainment</div>\r\n                                \r\n                            </div>\r\n                        </div>\r\n                        <div className = \"changer\">\r\n                            <div className = \"ind-changer\" count = \"0\"/>\r\n                            <div className = \"ind-changer\" count = \"1\"/>\r\n                            <div className = \"ind-changer\" count = \"2\"/>\r\n                            <div className=\"ind-cover\"/>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"login-signup\">\r\n                        <div className=\"button\">\r\n                            <button id = \"login\">Login</button>\r\n                            <button id = \"signup\">Sign Up</button>\r\n                            {/* <div className = \"slider\"/> */}\r\n                        </div>\r\n                        <div className=\"lsmain\">\r\n                            <div className=\"l\">\r\n                                <div className = \"circle-temp\"/>\r\n                                <div className = \"circle-temp1\"/>    \r\n                                <div className = \"circle-temp2\"/>    \r\n                                <div className = \"underline\">\r\n                                    <span className=\"icon-surround\">\r\n                                        <i className = \"fas fa-user icon\" ></i>\r\n                                    </span>\r\n                                    <input required type = 'email' id = 'lemail' placeholder=\"Your Email\"/>\r\n                                </div>\r\n                                <div className = \"underline\">\r\n                                    <span className=\"icon-surround\">\r\n                                        <i className = \"fas fa-unlock icon\" ></i>\r\n                                    </span>\r\n                                    <input required type = 'password' id = \"lpass\" placeholder=\"Your Password\"/>\r\n                                    <i className=\"fas fa-eye icon3\"></i>\r\n                                    <i className=\"fas fa-eye-slash icon3\" ></i>\r\n                                </div>\r\n                                <div className = \"submit lsub\">Sign In</div>\r\n                            </div>\r\n                            <div className=\"s\">\r\n                                <div className = \"circle-temp\"/>\r\n                                <div className = \"circle-temp1\"/>    \r\n                                <div className = \"circle-temp2\"/>     \r\n                                <div className = \"underline\">\r\n                                    <span className=\"icon-surround\">\r\n                                        <i className = \"fas fa-user icon\" ></i>\r\n                                    </span>\r\n                                    <input type = 'text'  spellCheck=\"false\" required id = 'user' placeholder=\"Your Username\"/>\r\n                                    <i className=\"fas fa-check-circle icon1\"></i>\r\n                                    <i className=\"fas fa-times-circle icon2\"></i><span className=\"tool-tip\">Username must be atleast 5 characters</span>\r\n                                </div>\r\n                                <div className = \"underline\">\r\n                                    <span className=\"icon-surround\">\r\n                                        <i className=\"fas fa-envelope-open-text icon\"></i>\r\n                                    </span>\r\n                                    <input type = 'email' spellCheck=\"false\" required  id = 'email' placeholder=\"Your Email\"/>\r\n                                    <i className=\"fas fa-check-circle icon1\"></i>\r\n                                    <i className=\"fas fa-times-circle icon2\"></i><span className=\"tool-tip\">Please enter a valid Email Id</span>\r\n                                </div>\r\n                                <div className = \"underline\">\r\n                                    <span className=\"icon-surround\">\r\n                                        <i className = \"fas fa-unlock icon\" ></i>\r\n                                    </span>\r\n                                    <input required type = 'password' id = 'pass' placeholder=\"Your Password\"/>\r\n                                    <i className=\"fas fa-eye icon3\"></i>\r\n                                    <i className=\"fas fa-eye-slash icon3\"></i>\r\n                                    <i className=\"fas fa-check-circle icon1\"></i>\r\n                                    <i className=\"fas fa-times-circle icon2\"></i><span className=\"tool-tip\">Password must be atleast 8 Characters</span>\r\n                                </div>\r\n                                <div className = \"underline\">\r\n                                    <span className=\"icon-surround\">\r\n                                        <i className=\"fas fa-key icon\"></i>\r\n                                    </span>\r\n                                    <input required type = 'password' id = 'cpass' placeholder=\"Confirm Your Password\"/>\r\n                                    <i className=\"fas fa-eye icon3\"></i>\r\n                                    <i className=\"fas fa-eye-slash icon3\"></i>\r\n                                    <i className=\"fas fa-check-circle icon1\"></i>\r\n                                    <i className=\"fas fa-times-circle icon2\"></i><span className=\"tool-tip\">Passwords doesn't match</span>\r\n                                </div>\r\n                                <div className = \"submit ssub\">Sign Up</div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                \r\n                </div>\r\n                \r\n            </div>\r\n        </>\r\n    )\r\n}\r\nexport {Login as default}","import React, { useReducer } from 'react';\nimport { BrowserRouter, Route, Switch } from \"react-router-dom\";\nimport CreateRoom from \"./routes/CreateRoom\";\nimport Room from \"./routes/Room\";\nimport videoContext from './context/video-context'\nimport videoReducer from './reducers/video'\nimport CheckRouter from './routers/voiceCheckRouter'\nimport SelectMedia from './routes/selectMedia'\nimport Login from './routes/Login'\nimport axios from 'axios';\n\nfunction App() {\n  const [video,dispatch] = useReducer(videoReducer,[])\n  \n  React.useEffect(()=>{\n    var e_cookie = localStorage.getItem('id');\n    var url = window.location.href;  \n    url = new URL(url)\n    if(!e_cookie){\n      if(url.pathname == '/login')return;\n      window.redirect = url.pathname == '/'?'/create':url.pathname;\n      window.location.href = url.origin + '/login?redirect='+window.redirect;\n    }\n    else{\n      if(!video.user){\n        axios.get('https://watch-party-latest.herokuapp.com/users/me',{\n          headers: {\n            Authorization: 'Bearer ' + localStorage.getItem('vid-token') \n          }\n        }).then((res)=>{\n          dispatch({\n            type:'SET_USER',\n            user:{...res.data,token:localStorage.getItem('vid-token')}\n          })\n        })\n      }\n      if(url.pathname == '/create')return;\n      if(url.pathname != '/login'&& url.pathname != '/'){\n        return;\n      }\n      window.location.href = url.origin + '/create';\n    }\n  },[])\n  return (\n    <videoContext.Provider value={{video,dispatch}}>\n      <BrowserRouter>\n        <Switch>\n          <Route path = '/login' component = {Login}/>\n          <Route path = \"/create\" exact component = {CreateRoom} />\n          <Route path = \"/selectMedia\" component = {SelectMedia} />\n          <CheckRouter path = \"/room/:roomID\" component = {Room} alreadySet = {!!video.room} />\n        </Switch>\n      </BrowserRouter>\n    </videoContext.Provider>\n  );\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport * as serviceWorker from './serviceWorker';\nimport App from './App'\nReactDOM.render(\n  <React.StrictMode>\n    <App/>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}