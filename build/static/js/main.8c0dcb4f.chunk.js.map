{"version":3,"sources":["serviceWorker.js","context/video-context.js","routes/CreateRoom.js","components/VideoUpload.js","routes/Chat.js","components/Chatinv.js","components/Video.js","components/ListVideos.js","components/VideoFile.js","components/VideoList.js","routes/Room.js","reducers/video.js","routes/selectMedia.js","routers/voiceCheckRouter.js","routes/Login.js","App.js","index.js"],"names":["Boolean","window","location","hostname","match","videoContext","React","createContext","videoConstraints","height","width","CreateRoom","props","useContext","video","dispatch","userVideo","useRef","value","roomID","audioHtml","videoHtml","audioopHtml","audioCount","videoCount","audD","vidD","curA","curV","useState","rooms","setRooms","navigator","mediaDevices","enumerateDevices","then","devices","$","fadeOut","forEach","device","kind","label","deviceId","fadeIn","getUserMedia","exact","audio","stream","current","srcObject","catch","err","console","log","message","useEffect","localStorage","getItem","axios","get","headers","Authorization","res","data","printError","item","html","css","left","transform","setTimeout","create","e","k","val","trim","id","post","user","_id","roomId","status","text","top","disp","roomName","abc","aes","encrypt","toString","name","token","preventDefault","type","voice","voiceOp","options","room","stop","getTracks","map","t","a","getRandomInt","min","max","Math","ceil","floor","random","getColor","r","ind","temp","title2Case","stri","l","toUpperCase","split","length","changeRoom","roomid","url","URL","href","origin","className","onClick","backgroundColor","myRoomDisplay","created","index","key","style","background","member","muted","ref","autoPlay","playsInline","alert","pause","right","RoomName","onChange","placeholder","VideoUpload","addVideo","script","document","createElement","src","async","body","appendChild","required","rows","stroke","strokeWidth","fill","cx","cy","Chat","chat","socket","addZero","num","root","querySelector","rootMargin","threshold","observer","IntersectionObserver","entries","entry","intersectionRatio","target","hasClass","dateDiffInDays","b","utc1","Date","UTC","getFullYear","getMonth","getDate","utc2","abs","day_name","new_day","day_js","createdAt","diff","getDay","dayjs","format","dayjs_finder","each","observe","this","scrollTop","scrollHeight","animation","temp_color","d","ownedBy","getHours","getMinutes","color","owner","Chatinv","scrollbarWidth","bottom","Video","vid","video_url","poster","orgPoster","backgroundImage","xmlns","viewBox","elevation","alt","strokeLinecap","strokeLinejoin","shapeRendering","points","x","y","role","aria-valuemax","aria-valuemin","aria-valuenow","defaultValue","step","disabled","tabIndex","datavideo","preload","controlsList","crossOrigin","def","ListVideos","videosList","videosList1","viewVideo","extend","relativeTime","calendar","postion","display","flexDirection","alignItems","wid","marginLeft","marginRight","opacity","username","replace","txt","charAt","substr","toLowerCase","fromNow","fileOwner","defposter","VideoList","setVideosList","setVideosList1","vidUrl","setVidUrl","streamRef","createPeersRef","createStreamRef","addPeersRef","socketRef","setUsers","url_set","setUrlset","emit","on","users","captureStream","peerID","peer","userToSignal","callerID","Peer","initiator","trickle","signal","duration","createFilePeer","push","payload","incomingSignal","addFilePeer","find","p","webkitURL","destroy","arr","i","assignVideos","to","startedBy","borderRadius","closeUrlVideo","reg","str","append","playUrl","filetemp","files","canPlayType","fileUrl","createObjectURL","fileVideoChange","accept","Slider","video_element","volCh","range","volume","attr","to_","visibility","stopPropagation","hover","clearTimeout","keyup","voCh","fn","textWidth","font","fakeEl","hide","appendTo","slider","setSlider","audref","nameStyle","isVid","getVideoTracks","vuMeter","setSt","st","audioContext","AudioContext","analyser","createAnalyser","microphone","createMediaStreamSource","javascriptNode","createScriptProcessor","smoothingTimeConstant","fftSize","connect","destination","onaudioprocess","array","Uint8Array","frequencyBinCount","getByteFrequencyData","values","average","round","boxShadow","te","prete","locked","o","onTimeUpdate","currentTime","fontSize","load","onCanPlay","onLoadedMetadata","otherUnpin","onMouseEnter","onMouseLeave","word","join","vidRef","Room","stre","setStre","setPeers","peersRef","actualPeersRef","setChat","setRenderer","members","setMembers","myvideos","setMyvideos","videos","durationfinder","hr","sec","arrayPush","userssum","createPeer","addPeer","io","transports","audOff","vidOff","mode","peeers","change","reload","peerObj","peerObj1","filter","borderRight","audOn","vidOn","mouse_is_inside","mouseup","oldt","getAudioTracks","removeTrack","addTrack","newt","replaceTrack","play","enabled","ht","ch","len","gridTemplateColumns","myPin","removeClass","dummy","otherPin","lim","addClass","options1","options2","callback","observer2","col","notJoined","includes","retStre","RTCDataChannel","onerror","removeItem","SignOut","params","otherPinSel","vids","meUnpin","us","videoReducer","state","action","videoUrl","SelectMedia","Fragment","CheckRouter","alreadySet","Component","component","rest","pathname","decrypt","crypto","enc","Utf8","indexOf","Login","count","spellCheck","App","useReducer","e_cookie","redirect","Provider","path","ReactDOM","render","StrictMode","getElementById","serviceWorker","ready","registration","unregister","error"],"mappings":"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","file":"static/js/main.8c0dcb4f.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react'\r\n\r\nconst videoContext = React.createContext()\r\n\r\nexport {videoContext as default }","import React,{useContext,useRef,useEffect, useState} from \"react\";\r\nimport videoContext from '../context/video-context'\r\nimport './styles/createRoom.css';\r\nimport $ from 'jquery';\r\nimport aes from 'crypto-js/aes'\r\nimport axios from 'axios'\r\nconst videoConstraints = {\r\n    height: '100%',\r\n    width: '100%'\r\n};\r\n\r\n\r\n\r\nconst CreateRoom = (props) => {\r\n\r\n    const {video,dispatch} = useContext(videoContext)\r\n    const userVideo = useRef();\r\n    const value = props.roomID?\"Join Room\":\"Create Room\"\r\n\r\n    var audioHtml = '<div  id=\"audioDevice\" class = \"drp-dwn-box\"><div class = \"set-prelim\">INPUT DEVICES</div>'\r\n    var videoHtml = '<div  id=\"videoDevice\" class = \"drp-dwn-box\"><div class = \"set-prelim\">VIDEO DEVICES</div>'\r\n    var audioopHtml = '<div class = \"set-prelim\">OUTPUT DEVICES</div>'\r\n    var audioCount=0,videoCount=0,audD = false,vidD = false,curA = false,curV = false;\r\n\r\n    const [rooms,setRooms] = useState([]);\r\n    navigator.mediaDevices.enumerateDevices().then(devices =>{\r\n        $('.vid-on,.aud-on').fadeOut();\r\n        \r\n        devices.forEach((device) => {\r\n            if(device.kind === 'audioinput'){\r\n                if(device.label != ''){\r\n                    curA = true;\r\n                    if(audioCount == 0){audD = device.deviceId}\r\n                    audioCount +=  1;\r\n                    $('.aud-off').fadeOut(300);$('.aud-on').fadeIn(300);\r\n                    audioHtml += '<div class=\"options aud-opt\" value=\"'+device.deviceId+'\">'+device.label+'</i></div>'\r\n                }\r\n                else{\r\n                    audioHtml += '<div class=\"options\" >Default</i></div>'\r\n                }\r\n            }\r\n            else if(device.kind === 'audiooutput'){\r\n                if(device.label!='')\r\n                    audioopHtml += '<div class=\"options aud-op-opt\" value=\"'+device.deviceId+'\">'+device.label+'</i></div>'\r\n                else\r\n                    audioopHtml += '<div class=\"options\" >Default</i></div>'\r\n            }\r\n            else if(device.kind === 'videoinput'){\r\n                if(device.label != ''){\r\n                    if(videoCount == 0){vidD = device.deviceId}\r\n                    curV = true;\r\n                    videoCount += 1;\r\n                    $('.vid-off').fadeOut(300);$('.vid-on').fadeIn(300);\r\n                    videoHtml += '<div class=\"options vid-opt\" value=\"'+device.deviceId+'\">'+device.label+'</i></div>'\r\n                }\r\n                else{\r\n                    videoHtml += '<div class=\"options\" >Default</i></div>'\r\n                }\r\n            }\r\n        });\r\n        navigator.mediaDevices.getUserMedia({  \r\n            video: vidD?{deviceId:{exact:vidD}}:false,\r\n            audio: audD?{deviceId:{exact:audD}}:false\r\n        })\r\n        .then(stream => {\r\n            if(userVideo.current)\r\n            { userVideo.current.srcObject = stream;}\r\n        }).catch(err => {console.log(err.message)})\r\n        audioHtml += (audioopHtml+'</div>')\r\n        videoHtml += '</div>'\r\n        \r\n    })\r\n    useEffect(()=>{\r\n        console.log('local storage : ',localStorage.getItem('vid-token'),localStorage.getItem('id'))\r\n        axios.get('https://watch-party-latest.herokuapp.com/room/me',{\r\n            headers:{\r\n                Authorization: 'Bearer ' + localStorage.getItem('vid-token')\r\n            }\r\n        })\r\n        .then(res => {\r\n            setRooms(res.data)\r\n        })\r\n        .catch(err => {\r\n            console.log(err);\r\n        })\r\n    },[])\r\n    \r\n    const audOn = () => {\r\n        navigator.mediaDevices.getUserMedia({ \r\n            video: curV?{deviceId: {exact: vidD},videoConstraints}:false, \r\n            audio: {deviceId: {exact: audD}}\r\n        }).then(stream => {\r\n            if(userVideo.current)\r\n            { userVideo.current.srcObject = stream;}\r\n            $('.aud-off').fadeOut(1000);$('.aud-on').fadeIn(1000);\r\n        }).catch(err=>{\r\n            alert('Permission Denied');\r\n        })\r\n        curA = true;\r\n    }\r\n    const vidOn = ()=>{\r\n        navigator.mediaDevices.getUserMedia({  \r\n            video: {deviceId: {exact: vidD},videoConstraints},\r\n            audio:curA?{deviceId:{exact:audD}}:false\r\n            }).then(stream => {\r\n                if(userVideo.current)\r\n                { userVideo.current.srcObject = stream;}\r\n                $('.vid-off').fadeOut(1000);$('.vid-on').fadeIn(1000);\r\n            }).catch(err=>{\r\n                alert('Permission Denied');\r\n            })\r\n        curV = true;\r\n    }\r\n    const printError = (item) =>{\r\n        $('.crwrong-text').html('Room - <span class = \"error-room\">'+item+'</span> has already been created')\r\n        $(\".crwrong-message\").css({left:'2%',transform:'scale(1.0)'})\r\n        setTimeout(()=>{\r\n            $(\".crwrong-message\").css({left:'-50%',transform:'scale(0.5)'})\r\n        },5000)\r\n    }   \r\n    function create(e,k = 0) {\r\n        if(!props.roomID && $('.join-room').val().trim()==''){\r\n            return;\r\n        }\r\n        var id;\r\n        if(!props.roomID){\r\n            var roomName = $('.join-room').val().trim();\r\n            var abc = aes.encrypt(video.user.user._id+' '+roomName,'def');\r\n            id = abc.toString();\r\n            axios.post('https://watch-party-latest.herokuapp.com/room/create',{roomId:id,name:roomName},{headers: {\r\n                Authorization: 'Bearer ' + video.user.token \r\n              }})\r\n            .then(res=>{\r\n                disp(id)\r\n            })\r\n            .catch(err=>{\r\n                printError(roomName);\r\n                return;\r\n            })\r\n        }    \r\n        else{\r\n            id = props.roomID;\r\n            axios.post('https://watch-party-latest.herokuapp.com/room/add',{id:video.user.user._id,roomId:props.roomID})\r\n            .then(res=>{\r\n                if(res.data.status == 'NA' && k==0){\r\n                    $('.crwrong-text').text('You have already joined')\r\n                    $(\".crwrong-message\").css({left:'2%',transform:'scale(1.0)'})\r\n                    setTimeout(()=>{\r\n                        $(\".wanna-join\").css({top:'5%',transform:'scale(1.0)'})\r\n                        $(\".crwrong-message\").css({left:'-50%',transform:'scale(0.5)'})\r\n                    },4010)\r\n                    return;\r\n                }\r\n                else{\r\n                    disp(id);\r\n                }\r\n            })\r\n            .catch(err=>{\r\n                console.log(err)\r\n            })\r\n        }\r\n        e.preventDefault()\r\n        \r\n    }\r\n\r\n    function disp(id){\r\n        dispatch({\r\n            type:'SET_EVERYTHING',\r\n            voice : audD,\r\n            voiceOp:audD,\r\n            curA,curV,\r\n            video : vidD,\r\n            options:{audio:audioHtml,video:videoHtml},\r\n            room:true,\r\n            user:{...video.user,room:id}\r\n        })\r\n        window.user = {...video.user,room:id};\r\n    } \r\n\r\n    const vidOff = ()=>{\r\n        stop('video');\r\n        curV = false;\r\n        userVideo.current.pause();\r\n        $('.vid-on').fadeOut(1000);$('.vid-off').fadeIn(1000);\r\n    }\r\n    const audOff = ()=>{\r\n        stop('audio');\r\n        curA = false;\r\n        $('.aud-on').fadeOut(1000);$('.aud-off').fadeIn(1000);\r\n    }\r\n    const stop = k => userVideo.current.srcObject.getTracks().map(async(t) =>{ if(t.kind == k){await t.stop();}});\r\n    \r\n    const roomPrint = (e)=>{\r\n        if($('.join-room').val() == ''){\r\n            $('.crlunderline').css({top:'40%'});\r\n        }\r\n        else{\r\n            $('.crlunderline').css({top:'21.5%'});\r\n        }\r\n        $('.room-name').text($('.join-room').val());\r\n    }\r\n    function getRandomInt(min, max) {\r\n        min = Math.ceil(min);\r\n        max = Math.floor(max);\r\n        return Math.floor(Math.random() * (max - min) + min);\r\n    }\r\n    function getColor(){\r\n        var r = [getRandomInt(10,250), getRandomInt(50,250), getRandomInt(10,250)];\r\n        var ind = getRandomInt(0,3);\r\n        var temp = r[ind];r[ind] = r[1];r[1] = temp;\r\n        return 'rgb('+r[0]+','+r[1]+','+r[2]+')';\r\n    }\r\n    function title2Case(stri){\r\n        stri = stri.toUpperCase();\r\n        var k = stri.split(' ');var l;\r\n        if(k.length == 1){k = k[0];return k[0]}\r\n        else {l = k[0];k = k[1];return l[0]+k[0]}\r\n    }\r\n    const changeRoom = (roomid) =>{\r\n        var url = new URL(window.location.href)\r\n        if(roomid == props.roomID) return;\r\n        window.location.href = url.origin + '/room/' + roomid\r\n    }\r\n    const myRoomDisplay = () =>{\r\n        if($('.my-rooms-btn').css('backgroundColor') == 'rgb(25, 175, 40)'){\r\n            $('.available-rooms').css({transform:'translateX(-102%)'})\r\n            $('.my-rooms-btn').css({backgroundColor:'rgb(175,20,20)'})\r\n            $('.video-surround').css({left:'10%'});\r\n            return;\r\n        }\r\n        $('.available-rooms').css({transform:'translateX(0%)'})\r\n        $('.my-rooms-btn').css({backgroundColor:'rgb(25,175,40)'})\r\n        $('.video-surround').css({left:'20.5%'});   \r\n    }\r\n    const changeUrl = () =>{\r\n        window.location.href = (new URL(window.location.href)).origin + '/create/'\r\n    }\r\n    return (\r\n        <>\r\n            <div className=\"wanna-join\" onClick = {(e)=>create(e,1)}>\r\n                Join<br/>Anyway\r\n            </div>\r\n            <div className = \"my-rooms-btn\" onClick = {()=>myRoomDisplay()}>\r\n                <i className = \"fas fa-wine-glass-alt crlicon\" ></i>\r\n            </div>\r\n            <div className = \"available-rooms\">\r\n                <div className=\"cr-mem-prelim\">Rooms Created ({rooms.created?rooms.created.length:0})</div>\r\n                {\r\n                    rooms.created&&\r\n                    rooms.created.map((item,index) => {\r\n                        return(\r\n                            <div key = {index} className = \"cr-room\" onClick = {()=>changeRoom(item.id)}>\r\n                                <div style = {{background:getColor()}} className=\"crimg-prof1\">{title2Case(item.name)}</div>\r\n                                {item.name} \r\n                            </div>\r\n                        )\r\n                    })\r\n                }\r\n                <div className=\"cr-mem-prelim\">Other Rooms ({rooms.member?rooms.member.length:0})</div>\r\n                {\r\n                    rooms.member&&\r\n                    rooms.member.map((item,index) => {\r\n                        return(\r\n                            <div key = {index} className = \"cr-room\" onClick = {()=>changeRoom(item.id)}>\r\n                                <div style = {{background:getColor()}} className=\"crimg-prof1\">{title2Case(item.name)}</div>\r\n                                {item.name} \r\n                            </div>\r\n                        )\r\n                    })\r\n                }\r\n            </div>\r\n            \r\n            <div className = \"create-room-heading\">{props.roomID?'Join':'Create'} Room</div>\r\n            <div className = \"video-surround\">\r\n                <video muted ref={userVideo} autoPlay playsInline className = \"crvideo\"/>\r\n                <div className = \"vid vid-off cricon-surround\" onClick = {vidOn} ><i className=\"fas fa-video-slash icon\"></i></div>\r\n                <div className = \"vid vid-on cricon-surround\" onClick = {vidOff}><i className=\"fas fa-video icon\"></i></div>\r\n                <div className = \"aud aud-off cricon-surround\" onClick = {audOn}><i className=\"fas fa-microphone-slash icon\"></i></div>\r\n                <div className = \"aud aud-on cricon-surround\" onClick = {audOff}><i className=\"fas fa-microphone icon\"></i></div>\r\n            </div>\r\n            <div className = \"crwrong-message\">\r\n                <i className=\"fas fa-times-circle\"></i>\r\n                <span className = \"crwrong-text\"></span>\r\n            </div>\r\n            <div style = {{right:props.roomID?'40px':'70px'}} className = \"crl\">\r\n                <div className = \"circle-temp\"/>\r\n                <div className = \"circle-temp1\"/>\r\n                <div className = \"circle-temp2\"/>\r\n                {\r\n                    props.roomID?\r\n                    <div className = \"room-name\">{props.RoomName}</div>\r\n                    :\r\n                    <>\r\n                        <div className = \"room-name\"></div>\r\n                        <div className = \"crlunderline\">\r\n                            <span className=\"crlicon-surround\">\r\n                                <i className = \"fas fa-wine-glass-alt crlicon\" ></i>\r\n                            </span>\r\n                            <input onChange = {(e)=>roomPrint(e)} type = \"text\" className = \"join-room\" placeholder = \"Room Name\"/>\r\n                        </div>\r\n                    </>\r\n                }      \r\n                <button className = \"crbtn\" onClick = {create}>{value}</button>\r\n            </div>\r\n            {\r\n                props.roomID&&\r\n                    <button className = \"crbtn createbtn\" onClick = {changeUrl}>Create a Room</button>\r\n\r\n            }\r\n            \r\n        </>\r\n    );\r\n};\r\n\r\nexport default CreateRoom;\r\n","import React,{useEffect} from 'react'\r\nimport './styles/videoUpload.css'\r\n\r\nconst VideoUpload = ({addVideo}) =>{\r\n    window.addVideo = addVideo;\r\n    useEffect(()=>{\r\n        const script = document.createElement(\"script\");\r\n        script.src = \"/path/to/videoUpload.js\";\r\n        script.async = true;\r\n        document.body.appendChild(script);\r\n    },[])\r\n    return(\r\n        <>\r\n            <div className = \"circle-temp2\"/>\r\n            <div className = \"egg-temp\">Video<br/>Upload</div>\r\n            <div className = \"circle-temp1\"/>\r\n            <div className = \"circle-temp3\"/>\r\n            <div className = \"circle-temp4\"/>\r\n\r\n            <input type = \"text\" className = \"video-name\" required placeholder = \"Video Name*\"/>\r\n            <textarea rows = \"10\" className = \"video-desc\" placeholder = \"Video Description\"/>\r\n            <div className = \"file1\">\r\n                <input id = \"imgfile\" type = 'file' className = \"innercircle1\"/>\r\n                <i className=\"fas fa-image\"></i>\r\n            </div>\r\n            <div className=\"holder\">\r\n                <div className = \"ano-holder\">\r\n                    <svg className=\"progress-ring\" width=\"120\" height=\"120\">\r\n                        <circle className=\"progress-ring__circle\" stroke=\"rgb(3,240,250)\" strokeWidth=\"4\" fill=\"transparent\" r=\"53.2\" cx=\"60\" cy=\"60\"/>\r\n                    </svg>\r\n                    <input name=\"file\" id = \"vidfile\" type=\"file\" className=\"cloudinary-fileupload innercircle\" />\r\n                    <i className=\"fas fa-upload k-vid-upload\"></i>\r\n                    <i className=\"fas fa-check\"></i>\r\n                </div>   \r\n            </div>\r\n            \r\n            <div className = \"filename_holder\">\r\n                <div className = \"heading\">Poster</div>\r\n                <div className = \"poster\"></div>\r\n                <div className = \"heading\">Video</div>\r\n                <div className = \"videoflname\"></div>\r\n            </div>\r\n            <div className=\"cloudSubmit\">\r\n                <i className=\"fas fa-arrow-right\"></i>\r\n            </div>\r\n            <div className = \"cloudCancel\">\r\n                <i className=\"fas fa-times-circle cancelreq\"></i>\r\n            </div>\r\n            <div className = \"message\">\r\n            </div>\r\n            <div className = \"wr-message\">\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport {VideoUpload as default}","import React from 'react';\r\nimport './styles/chat.css';\r\nimport $ from 'jquery';\r\nimport dayjs from 'dayjs';\r\nconst Chat = ({chat,id,socket})=>{\r\n    function addZero(num){\r\n        if(num/10<1){\r\n          return '0'+num;\r\n        }\r\n        return num;\r\n    }\r\n    React.useEffect(()=>{\r\n        if(socket){\r\n            const script = document.createElement(\"script\");\r\n            script.src = \"/path/to/chat.js\";\r\n            script.async = true;\r\n            document.body.appendChild(script);\r\n        }\r\n    },[socket]);\r\n    function getRandomInt(min, max) {\r\n        min = Math.ceil(min);\r\n        max = Math.floor(max);\r\n        return Math.floor(Math.random() * (max - min) + min);\r\n    }\r\n    function getColor(){\r\n        var r = [getRandomInt(10,250), getRandomInt(50,250), getRandomInt(10,250)];\r\n        var ind = getRandomInt(0,3);\r\n        var temp = r[ind];r[ind] = r[1];r[1] = temp;\r\n        return 'rgb('+r[0]+','+r[1]+','+r[2]+')';\r\n    }\r\n    const options = {\r\n        root: document.querySelector('ch-o-bt'),\r\n        rootMargin: '0px',\r\n        threshold: [0.1]\r\n    }\r\n    function callback (entries, observer) {\r\n        entries.forEach(entry => {\r\n            if (entry.intersectionRatio > 0.1) {\r\n                $(entry.target).css({transform:' translateX(0%)'})\r\n            } else {\r\n                if($(entry.target).hasClass('message-mine'))\r\n                    $(entry.target).css({transform:' translateX(50%)'})\r\n                else\r\n                    $(entry.target).css({transform:' translateX(-50%)'})\r\n            }\r\n        });\r\n    }\r\n    let observer = new IntersectionObserver(callback, options);\r\n    \r\n    const _MS_PER_DAY = 1000 * 60 * 60 * 24;\r\n    function dateDiffInDays(a, b) {\r\n        const utc1 = Date.UTC(a.getFullYear(), a.getMonth(), a.getDate());\r\n        const utc2 = Date.UTC(b.getFullYear(), b.getMonth(), b.getDate());\r\n        return Math.abs(Math.floor((utc2 - utc1) / _MS_PER_DAY));\r\n    }\r\n    var day_name = ['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'] \r\n    function dayjs_finder(createdAt){\r\n        var day_js = ''\r\n        var diff = dateDiffInDays(new Date(createdAt),new Date())\r\n        if(diff == 0){\r\n            day_js = 'Today';\r\n        }\r\n        else if(diff == 1){\r\n            day_js = 'Yesterday';\r\n        }\r\n        else if(diff <=6 && diff >= 2){\r\n            day_js = day_name[(new Date(createdAt)).getDay()];\r\n        }\r\n        else{\r\n            day_js = dayjs(createdAt).format('YYYY , D MMM ');\r\n        }\r\n        return day_js\r\n    }\r\n    return (\r\n        <>\r\n            <div className=\"chat-window\">\r\n                <div className = \"chat-title\">\r\n                    Chat Room\r\n                    <i className=\"far fa-comment-alt\"></i>\r\n                </div>\r\n                <div className=\"chat-output\">\r\n\r\n                    <div className = \"chat-loader-surround\"><div className = \"chat-loader\"/></div>\r\n                    <div className=\"ch-o-bt\">\r\n                        {chat.length>0?\r\n                            chat.map((t,index)=>{\r\n                                var new_day = false;\r\n                                var day_js = '';\r\n                                if(index!=0){\r\n                                    if(dateDiffInDays(new Date(t.createdAt),new Date(chat[index-1].createdAt)) > 0){\r\n                                        new_day = true;\r\n                                    }\r\n                                }\r\n                                else{\r\n                                    new_day = true;\r\n                                }\r\n                                if(new_day == true){\r\n                                    day_js = dayjs_finder(t.createdAt)\r\n                                }\r\n                                if(index == chat.length-1){\r\n                                    setTimeout(function () {\r\n                                        $('.message-mine').each(\r\n                                            function (ind) {  \r\n                                                observer.observe(this)\r\n                                            }\r\n                                        )\r\n                                        $('.message-other').each(\r\n                                            function (ind) {  \r\n                                                observer.observe(this)\r\n                                            }\r\n                                        )\r\n                                        $('.ch-o-bt')[$('.ch-o-bt').length-1].scrollTop = $('.ch-o-bt')[$('.ch-o-bt').length-1].scrollHeight;\r\n                                                                                \r\n                                    },100);\r\n                                }                               \r\n                                if(t == 'no chat'){\r\n                                    return null;\r\n                                }\r\n                                $('.chat-loader-surround').css({top:'0%'});\r\n                                $('.chat-loader').css({animation:'none'});\r\n                                var temp_color = getColor();\r\n                                var d = new Date(t.createdAt);\r\n                                if(id == t.ownedBy){\r\n                                    return (\r\n                                        <span key = {t._id}>\r\n                                            {\r\n                                                day_js!=''&&\r\n                                                <div className = \"chat-date\">\r\n                                                    {day_js}\r\n                                                </div>\r\n                                            }\r\n                                            <div  className = \"message-mine\" >{t.message}<div className=\"message-time\">{addZero(d.getHours())}:{addZero(d.getMinutes())}</div></div>\r\n                                        </span>\r\n                                    )\r\n                                }\r\n                                else{\r\n                                    return(\r\n                                        <span key = {t._id}>\r\n                                            {\r\n                                                day_js!=''&&\r\n                                                <div className = \"chat-date\">\r\n                                                    {day_js}\r\n                                                </div>\r\n                                            } \r\n                                            <div key = {t._id} className = \"message-other\" ><div className = \"message-owner\" style = {{color:temp_color}}>{t.owner}</div>\r\n                                            {t.message}<div className=\"message-time\">{addZero(d.getHours())}:{addZero(d.getMinutes())}</div></div>\r\n                                        </span>    \r\n                                    )\r\n                                }\r\n                            })\r\n                            :null\r\n                        }\r\n                    </div>\r\n                </div>\r\n                <div className=\"chat-input\">\r\n                    <div className=\"inp-surround\">\r\n                        <textarea  rows ='1' placeholder=\"Type a Message...\"  id = \"inp\" />\r\n                    </div>\r\n                    <div className = \"chat-send\">\r\n                        <i className=\"fas fa-pen-nib\"></i>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\nexport {Chat as default}","import React from 'react';\r\n\r\n\r\nconst Chatinv = ()=>{\r\n    \r\n    return(\r\n        <>\r\n            <div style={{scrollbarWidth:'none'}} className=\"chat-window\">\r\n                <div style={{scrollbarWidth:'none'}} className=\"chat-output\">\r\n                    <div style={{bottom:'6%',scrollbarWidth:'none'}} className=\"ch-o-bt\">\r\n                    </div>\r\n                </div>\r\n                {/* <div className=\"chat-input\">\r\n                    <div className=\"inp-surround\">\r\n                        <textarea  rows ='1' placeholder=\"Type a Message...\"  id = \"inp\" />\r\n                    </div>\r\n                    <div className = \"chat-send\">\r\n                        <img src = \"/static-img/send_black.png\" alt=\"send\" width=\"18\" height =\"18\" />\r\n                    </div>\r\n                </div> */}\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport {Chatinv as default};","import React,{useContext} from 'react';\r\nimport $ from 'jquery';\r\nimport './styles/video.css'\r\nimport Chatinv from './Chatinv';\r\nimport videoContext from '../context/video-context'\r\n\r\nconst Video = ({vid,stream})=>{\r\n    console.log(vid)\r\n    const video_url = vid.video.video;\r\n    const poster = vid.video.poster;\r\n    const defposter = 'https://raw.githubusercontent.com/Ahmetaksungur/twitter-video-player-clone/master/92456705_506989316849451_7379405183454806542_n.jpg';\r\n    const orgPoster = 'url('+(poster?poster:defposter)+')';\r\n    \r\n    React.useEffect(()=>{\r\n        const script = document.createElement(\"script\");\r\n        script.src = \"/path/to/twivid.js\";\r\n        script.async = true;\r\n        document.body.appendChild(script);\r\n    },[]);\r\n\r\n    return (\r\n    <>\r\n        <div className = \"video vid-url-play\">\r\n            <div className = \"vchat-holder\"> \r\n                <Chatinv/>\r\n            </div>    \r\n            <div className=\"video-preview\" style = {{backgroundImage:orgPoster}}>\r\n                <button className=\"video-start-btn\" >\r\n                    <svg width=\"50\" height=\"50\"  xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\">\r\n                        <path d=\"M256,0C114.833,0,0,114.844,0,256s114.833,256,256,256s256-114.844,256-256S397.167,0,256,0z M357.771,264.969\r\n                            l-149.333,96c-1.75,1.135-3.771,1.698-5.771,1.698c-1.75,0-3.521-0.438-5.104-1.302C194.125,359.49,192,355.906,192,352V160\r\n                            c0-3.906,2.125-7.49,5.563-9.365c3.375-1.854,7.604-1.74,10.875,0.396l149.333,96c3.042,1.958,4.896,5.344,4.896,8.969\r\n                            S360.813,263.01,357.771,264.969z\" elevation = \"2\"  />\r\n                    </svg>\r\n                </button>\r\n            </div>\r\n            <div className=\"video-top\"></div>\r\n\r\n            <div className = \"anim play-anim\"><img className = \"anim-img\" src = \"/static-img/play.png\" alt = \"as\" width=\"20\"height=\"20\"/></div>\r\n\r\n            <div className=\"video-loading\">\r\n                <div className=\"video-loading-spinner\"></div>\r\n            </div>\r\n            \r\n            <div className=\"video-reset\">\r\n                <button className=\"video-reset-btn\">Watch again</button>\r\n\r\n            </div>\r\n            \r\n            <div className = \"video-incoming\">\r\n                <h3 className=\"grad-text\">\r\n                    <span>S</span><span>o</span><span>m</span><span>e</span><span>o</span><span>n</span><span>e</span><span> </span>\r\n                    <span>I</span><span>s</span><span> </span>\r\n                    <span>A</span><span>b</span><span>o</span><span>u</span><span>t</span><span> </span> \r\n                    <span>T</span><span>o</span><span> </span>\r\n                    <span>J</span><span>o</span><span>i</span><span>n</span><span>.</span><span>.</span><span>.</span>\r\n                </h3>\r\n                <h3 className=\"grad-text reflex\">\r\n                    <span>S</span><span>o</span><span>m</span><span>e</span><span>o</span><span>n</span><span>e</span><span> </span>\r\n                    <span>I</span><span>s</span><span> </span>\r\n                    <span>A</span><span>b</span><span>o</span><span>u</span><span>t</span><span> </span> \r\n                    <span>T</span><span>o</span><span> </span>\r\n                    <span>J</span><span>o</span><span>i</span><span>n</span><span>.</span><span>.</span><span>.</span>\r\n                </h3>\r\n                <h3 className=\"grad-text\">\r\n                    <span>P</span><span>l</span><span>e</span><span>a</span><span>s</span><span>e</span><span> </span>\r\n                    <span>W</span><span>a</span><span>i</span><span>t</span>\r\n                </h3>\r\n                <h3 className=\"grad-text reflex\">\r\n                    <span>P</span><span>l</span><span>e</span><span>a</span><span>s</span><span>e</span><span> </span>\r\n                    <span>W</span><span>a</span><span>i</span><span>t</span>\r\n                </h3>\r\n                \r\n            </div>\r\n\r\n            <div className=\"video-player-controls\">\r\n                <div className=\"video-slider\">\r\n                    <div className = \"video-slider-tooltip\">hi</div>\r\n                <div className=\"video-slider-container\">\r\n                    <div className=\"video-slider-bg\">\r\n                        <div className=\"video-slider-buffered\"></div>\r\n                        <div className=\"video-slider-rail\"></div>\r\n                        <div className=\"video-slider-buffer\"></div>\r\n                    </div>\r\n                </div>\r\n\r\n                </div>\r\n                <div className=\"row\">\r\n                <div className=\"wrap\">\r\n                    <div className=\"video-control\">\r\n                        <button className=\"video-control-btn\" >\r\n                            <svg className=\"video-control-play\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" shapeRendering=\"geometricPrecision\">\r\n                            <polygon points=\"5 3 19 12 5 21 5 3\" fill=\"currentColor\"></polygon>\r\n                            </svg>\r\n                            <svg className=\"video-control-pause\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" shapeRendering=\"geometricPrecision\">\r\n                            <rect x=\"6\" y=\"4\" width=\"4\" height=\"16\" fill=\"currentColor\"></rect>\r\n                            <rect x=\"14\" y=\"4\" width=\"4\" height=\"16\" fill=\"currentColor\"></rect>\r\n                            </svg>\r\n\r\n                        </button>\r\n                    </div>\r\n                    <div className=\"video-counts\"><span className=\"video-count-time\">0:00</span><span className=\"video-count-line\">/</span><span className=\"video-count-fulltime\">0:00</span></div>\r\n                    {/* <div className=\"video-pixel-rate\">\r\n                        <div className=\"video-pixel-box\">\r\n                            <div className=\"video-pixel\" >Low</div>\r\n                            <div className=\"video-pixel\" >Medium</div >\r\n                            <div className=\"video-pixel\" >High</div>\r\n                        </div>\r\n                        <div className = \"video-pixel-speed\">\r\n                            Low\r\n                        </div>\r\n                    </div> */}\r\n                    \r\n                </div>\r\n                <div className=\"wrap\">\r\n                    <div className=\"video-chat\" >\r\n                        <img id = \"chat-on\" src = \"/static-img/chat_white.png\" alt = \"pip\" width=\"24\" height = \"24\"></img>\r\n                        <img id = \"chat-off\" src = \"/static-img/chat_off.png\" alt = \"pip\" width=\"24\" height = \"24\"></img>\r\n                    </div>\r\n\r\n                    <div className=\"video-voice\">\r\n                        <div className=\"video-voice-slider\">\r\n                            <div className=\"video-voice-slider-rail\" role=\"slider\" aria-valuemax=\"1\" aria-valuemin = \"0\" aria-valuenow=\"1\">\r\n                                <div className=\"video-voice-slider-buffer\"></div>\r\n                                <input className=\"video-voice-slider-range\" type=\"range\" min=\"0\" max=\"1\" defaultValue=\"1\" step=\"0.01\" />\r\n                            </div>\r\n                        </div>\r\n                        \r\n\r\n                        <button className=\"video-voice-btn\">\r\n                            <svg className=\"video-voice-on\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" fill=\"none\" shapeRendering=\"geometricPrecision\">\r\n                            <path d=\"M11 5L6 9H2v6h4l5 4V5z\"></path>\r\n                            <path d=\"M19.07 4.93a10 10 0 010 14.14M15.54 8.46a5 5 0 010 7.07\"></path>\r\n                            </svg>\r\n                            <svg className=\"video-voice-off\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" fill=\"none\" shapeRendering=\"geometricPrecision\" >\r\n                            <path d=\"M11 5L6 9H2v6h4l5 4V5z\"></path>\r\n                            <path d=\"M23 9l-6 6\"></path>\r\n                            <path d=\"M17 9l6 6\"></path>\r\n                            </svg>\r\n                        </button>\r\n\r\n                    </div>\r\n\r\n                    <div className=\"video-playback-rate\">\r\n                        <div className=\"video-playback-box\">\r\n                            <div className=\"video-playback\" >0.25</div><div className=\"video-playback\">0.50</div ><div className=\"video-playback\">0.75</div>\r\n                            <div className=\"video-playback\">Normal</div>\r\n                            <div className=\"video-playback\">1.25</div><div className=\"video-playback\">1.50</div><div className=\"video-playback\">1.75</div>\r\n                            <div className=\"video-playback\">2.0</div>\r\n                        </div>\r\n                        <div className = \"video-playback-speed\">\r\n                            Normal\r\n                        </div>\r\n                    </div>\r\n                    \r\n                    <div className=\"video-pip\" disabled>\r\n                        <img src = \"/static-img/pip_white.png\" alt = \"pip\" width=\"24\" height = \"24\"></img>\r\n                    </div>\r\n                    \r\n                    <div className=\"full-screen\">\r\n                    <button className=\"full-screen-btn\">\r\n                        <svg className=\"full-screen-open\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" fill=\"none\" shapeRendering=\"geometricPrecision\">\r\n                        <path d=\"M15 3h6v6\"></path>\r\n                        <path d=\"M9 21H3v-6\"></path>\r\n                        <path d=\"M21 3l-7 7\"></path>\r\n                        <path d=\"M3 21l7-7\"></path>\r\n                        </svg>\r\n\r\n                        <svg className=\"full-screen-exit\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" fill=\"none\" shapeRendering=\"geometricPrecision\">\r\n                        <path d=\"M4 14h6v6\"></path>\r\n                        <path d=\"M20 10h-6V4\"></path>\r\n                        <path d=\"M14 10l7-7\"></path>\r\n                        <path d=\"M3 21l7-7\"></path>\r\n                        </svg>\r\n\r\n                    </button>\r\n\r\n                    </div>\r\n                </div>\r\n                </div>\r\n            </div>\r\n            \r\n            <div className=\"video-player\">\r\n                <video poster = {poster} tabIndex=\"-1\" datavideo=\"\" preload=\"auto\" controlsList=\"nodownload\" crossOrigin = \"anonymous\">\r\n                    <source def = {video_url} id = \"org-video-src\" src={video_url} type=\"video/mp4\"/>\r\n                </video>\r\n            </div>\r\n\r\n            \r\n        </div>\r\n        <canvas id=\"canvas\"></canvas>\r\n    </>\r\n)\r\n}\r\nexport {Video as default};","import React, { useEffect } from 'react'\r\nimport dayjs from 'dayjs'\r\nimport relativeTime from 'dayjs/plugin/relativeTime'\r\nimport calendar from 'dayjs/plugin/calendar'\r\nimport $ from 'jquery'\r\n\r\nconst ListVideos = ({videosList,videosList1,viewVideo}) =>{\r\n    dayjs.extend(relativeTime)\r\n    dayjs.extend(calendar)\r\n    useEffect(()=>{\r\n        setTimeout(()=>{\r\n            console.log('set Time out running');\r\n            const script = document.createElement(\"script\");\r\n            script.src = \"/path/to/videoList.js\";\r\n            script.async = true;\r\n            document.body.appendChild(script);   \r\n        },300);\r\n    },[])\r\n    function title2Case(stri){\r\n        stri = stri.toUpperCase();\r\n        var k = stri.split(' ');var l;\r\n        if(k.length == 1){k = k[0];return k[0]}\r\n        else {l = k[0];k = k[1];return l[0]+k[0]}\r\n    }\r\n    function toTitleCase(str) {\r\n        return str.replace(\r\n          /\\w\\S*/g,\r\n          function(txt) {\r\n            return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();\r\n          }\r\n        );\r\n    }\r\n\r\n    return(\r\n        <div className = \"video-container\">\r\n                <div className = \"video-caurosel\">\r\n                    <div className = \"circle-temp\"/>\r\n                    <div className = \"circle-temp1\"/>\r\n                    <div className = \"circle-temp3\"/>\r\n                    <div className = \"circle-temp4\"/>\r\n\r\n                    {videosList1.length!=0?\r\n                        <div style = {{width:'100%',height:'100%',postion:'absolute',top:'0',left:'0'}}>\r\n                            <div className = \"vid-caurosel-mover\" style = {{width:videosList1.length*100+'%',display:'flex',flexDirection:'row',alignItems:'center',height:'100%'}}>\r\n                                {   videosList1.length != 0&&\r\n                                    videosList1.map((item,index)=>{\r\n                                        if(index == videosList1.length - 1){\r\n                                            setTimeout(function(){\r\n                                                var wid = $('.video-caurosel').width();\r\n                                                $('.indv-caurosel').css({width:wid*0.8+'px',marginLeft:wid*0.1,marginRight:0.1*wid})\r\n                                                $('.caurosel-name').css({opacity:1.0});\r\n                                            },500);\r\n                                        }\r\n                                        var url  = 'url(\"'+item.video.poster+'\")'\r\n                                        return(\r\n                                            <div onClick = {()=>viewVideo(item)} style = {{backgroundImage:url}} key={index} className = \"indv-caurosel\">\r\n                                                <div className = \"caurosel-name\">{item.video.name}</div>\r\n                                            </div>\r\n                                        )\r\n                                    })\r\n                                }\r\n                            </div>\r\n                        </div>\r\n                    :null}\r\n                    <div className = \"prev-caurosel\"><i className=\"fas fa-chevron-left\"></i></div>\r\n                    <div className = \"next-caurosel\"><i className=\"fas fa-chevron-right\"></i></div>\r\n                </div>\r\n                {   videosList.length != 0&&\r\n                    videosList.map((item,index)=>{\r\n                        return(\r\n                            <div key = {index} className = \"single-video\" onClick = {()=>viewVideo(item)}>\r\n                                <div className = \"circle-temp\"/>\r\n                                <div className = \"circle-temp1\"/>\r\n                                <div className = \"circle-temp2\"/>\r\n\r\n                                <div className = \"sin-vid-poster\"><img src = {item.video.poster} width = \"373\" height = \"250\"/></div>\r\n                                <div className = \"vvideo-name\">{item.video.name}</div>\r\n                                <div className = \"vvideo-info-holder\">\r\n                                    <div className = \"vvideo-views\">12 views</div>\r\n                                    <div className = \"vvideo-owner\">\r\n                                        <div className = \"img-prof2\">{title2Case(item.user.username)}</div>{toTitleCase(item.user.username)}\r\n                                    </div>\r\n                                    <div className = \"vvideo-created\">{dayjs(item.video.createdAt).fromNow()}</div>\r\n                                </div>\r\n                            </div>\r\n                        )\r\n                    })\r\n                }\r\n            </div>    \r\n    )\r\n}\r\n\r\nexport {ListVideos as default}","import React,{useContext} from 'react';\r\nimport $ from 'jquery';\r\nimport './styles/video.css'\r\nimport Chatinv from './Chatinv';\r\nimport videoContext from '../context/video-context'\r\n\r\nconst Video = ({vid,stream})=>{\r\n    console.log('video stream , Video File :',stream,window.fileOwner)\r\n    var video_url = vid\r\n    if(vid == 'copy'){\r\n        video_url = ''\r\n        setTimeout(()=>{\r\n            $('video')[0].srcObject = stream\r\n        },400)\r\n    }\r\n    const defposter = 'https://raw.githubusercontent.com/Ahmetaksungur/twitter-video-player-clone/master/92456705_506989316849451_7379405183454806542_n.jpg';\r\n    \r\n    const orgPoster = defposter;\r\n    const poster = defposter\r\n    React.useEffect(()=>{\r\n        const script = document.createElement(\"script\");\r\n        script.src = \"/path/to/twividFile.js\";\r\n        script.async = true;\r\n        document.body.appendChild(script);\r\n    },[]);\r\n    \r\n    return (\r\n    <>\r\n        <div className = \"video vid-file-main\">\r\n            <div className = \"vchat-holder\"> \r\n                <Chatinv/>\r\n            </div>    \r\n            <div className=\"video-preview\" style = {{backgroundImage:orgPoster}}>\r\n                <button className=\"video-start-btn\" >\r\n                    <svg width=\"50\" height=\"50\"  xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\">\r\n                        <path d=\"M256,0C114.833,0,0,114.844,0,256s114.833,256,256,256s256-114.844,256-256S397.167,0,256,0z M357.771,264.969\r\n                            l-149.333,96c-1.75,1.135-3.771,1.698-5.771,1.698c-1.75,0-3.521-0.438-5.104-1.302C194.125,359.49,192,355.906,192,352V160\r\n                            c0-3.906,2.125-7.49,5.563-9.365c3.375-1.854,7.604-1.74,10.875,0.396l149.333,96c3.042,1.958,4.896,5.344,4.896,8.969\r\n                            S360.813,263.01,357.771,264.969z\" elevation = \"2\"  />\r\n                    </svg>\r\n                </button>\r\n            </div>\r\n            <div className=\"video-top\"></div>\r\n\r\n            <div className = \"anim play-anim\"><img className = \"anim-img\" src = \"/static-img/play.png\" alt = \"as\" width=\"20\"height=\"20\"/></div>\r\n\r\n            <div className=\"video-loading\">\r\n                <div className=\"video-loading-spinner\"></div>\r\n            </div>\r\n            \r\n            <div className=\"video-reset\">\r\n                <button className=\"video-reset-btn\">Watch again</button>\r\n\r\n            </div>\r\n            \r\n            <div className = \"video-incoming\">\r\n                <h3 className=\"grad-text\">\r\n                    <span>S</span><span>o</span><span>m</span><span>e</span><span>o</span><span>n</span><span>e</span><span> </span>\r\n                    <span>I</span><span>s</span><span> </span>\r\n                    <span>A</span><span>b</span><span>o</span><span>u</span><span>t</span><span> </span> \r\n                    <span>T</span><span>o</span><span> </span>\r\n                    <span>J</span><span>o</span><span>i</span><span>n</span><span>.</span><span>.</span><span>.</span>\r\n                </h3>\r\n                <h3 className=\"grad-text reflex\">\r\n                    <span>S</span><span>o</span><span>m</span><span>e</span><span>o</span><span>n</span><span>e</span><span> </span>\r\n                    <span>I</span><span>s</span><span> </span>\r\n                    <span>A</span><span>b</span><span>o</span><span>u</span><span>t</span><span> </span> \r\n                    <span>T</span><span>o</span><span> </span>\r\n                    <span>J</span><span>o</span><span>i</span><span>n</span><span>.</span><span>.</span><span>.</span>\r\n                </h3>\r\n                <h3 className=\"grad-text\">\r\n                    <span>P</span><span>l</span><span>e</span><span>a</span><span>s</span><span>e</span><span> </span>\r\n                    <span>W</span><span>a</span><span>i</span><span>t</span>\r\n                </h3>\r\n                <h3 className=\"grad-text reflex\">\r\n                    <span>P</span><span>l</span><span>e</span><span>a</span><span>s</span><span>e</span><span> </span>\r\n                    <span>W</span><span>a</span><span>i</span><span>t</span>\r\n                </h3>\r\n                \r\n            </div>\r\n\r\n            <div className=\"video-player-controls\">\r\n                <div className=\"video-slider\">\r\n                    <div className = \"video-slider-tooltip\">0.00</div>\r\n                <div className=\"video-slider-container\">\r\n                    <div className=\"video-slider-bg\">\r\n                        <div className=\"video-slider-buffered\"></div>\r\n                        <div className=\"video-slider-rail\"></div>\r\n                        <div className=\"video-slider-buffer\"></div>\r\n                    </div>\r\n                </div>\r\n\r\n                </div>\r\n                <div className=\"row\">\r\n                <div className=\"wrap\">\r\n                    <div className=\"video-control\">\r\n                        <button className=\"video-control-btn\" >\r\n                            <svg className=\"video-control-play\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" shapeRendering=\"geometricPrecision\">\r\n                            <polygon points=\"5 3 19 12 5 21 5 3\" fill=\"currentColor\"></polygon>\r\n                            </svg>\r\n                            <svg className=\"video-control-pause\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" shapeRendering=\"geometricPrecision\">\r\n                            <rect x=\"6\" y=\"4\" width=\"4\" height=\"16\" fill=\"currentColor\"></rect>\r\n                            <rect x=\"14\" y=\"4\" width=\"4\" height=\"16\" fill=\"currentColor\"></rect>\r\n                            </svg>\r\n\r\n                        </button>\r\n                    </div>\r\n                    <div className=\"video-counts\"><span className=\"video-count-time\">0:00</span><span className=\"video-count-line\">/</span><span className=\"video-count-fulltime\">0:00</span></div>\r\n                    {/* <div className=\"video-pixel-rate\">\r\n                        <div className=\"video-pixel-box\">\r\n                            <div className=\"video-pixel\" >Low</div>\r\n                            <div className=\"video-pixel\" >Medium</div >\r\n                            <div className=\"video-pixel\" >High</div>\r\n                        </div>\r\n                        <div className = \"video-pixel-speed\">\r\n                            Low\r\n                        </div>\r\n                    </div> */}\r\n                    \r\n                </div>\r\n                <div className=\"wrap\">\r\n                    <div className=\"video-chat\" >\r\n                        <img id = \"chat-on\" src = \"/static-img/chat_white.png\" alt = \"pip\" width=\"24\" height = \"24\"></img>\r\n                        <img id = \"chat-off\" src = \"/static-img/chat_off.png\" alt = \"pip\" width=\"24\" height = \"24\"></img>\r\n                    </div>\r\n\r\n                    <div className=\"video-voice\">\r\n                        <div className=\"video-voice-slider\">\r\n                            <div className=\"video-voice-slider-rail\" role=\"slider\" aria-valuemax=\"1\" aria-valuemin = \"0\" aria-valuenow=\"1\">\r\n                                <div className=\"video-voice-slider-buffer\"></div>\r\n                                <input className=\"video-voice-slider-range\" type=\"range\" min=\"0\" max=\"1\" defaultValue=\"1\" step=\"0.01\" />\r\n                            </div>\r\n                        </div>\r\n                        \r\n\r\n                        <button className=\"video-voice-btn\">\r\n                            <svg className=\"video-voice-on\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" fill=\"none\" shapeRendering=\"geometricPrecision\">\r\n                            <path d=\"M11 5L6 9H2v6h4l5 4V5z\"></path>\r\n                            <path d=\"M19.07 4.93a10 10 0 010 14.14M15.54 8.46a5 5 0 010 7.07\"></path>\r\n                            </svg>\r\n                            <svg className=\"video-voice-off\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" fill=\"none\" shapeRendering=\"geometricPrecision\" >\r\n                            <path d=\"M11 5L6 9H2v6h4l5 4V5z\"></path>\r\n                            <path d=\"M23 9l-6 6\"></path>\r\n                            <path d=\"M17 9l6 6\"></path>\r\n                            </svg>\r\n                        </button>\r\n\r\n                    </div>\r\n\r\n                    <div className=\"video-playback-rate\">\r\n                        <div className=\"video-playback-box\">\r\n                            <div className=\"video-playback\" >0.25</div><div className=\"video-playback\">0.50</div ><div className=\"video-playback\">0.75</div>\r\n                            <div className=\"video-playback\">Normal</div>\r\n                            <div className=\"video-playback\">1.25</div><div className=\"video-playback\">1.50</div><div className=\"video-playback\">1.75</div>\r\n                            <div className=\"video-playback\">2.0</div>\r\n                        </div>\r\n                        <div className = \"video-playback-speed\">\r\n                            Normal\r\n                        </div>\r\n                    </div>\r\n                    \r\n                    <div className=\"video-pip\" disabled>\r\n                        <img src = \"/static-img/pip_white.png\" alt = \"pip\" width=\"24\" height = \"24\"></img>\r\n                    </div>\r\n                    \r\n                    <div className=\"full-screen\">\r\n                    <button className=\"full-screen-btn\">\r\n                        <svg className=\"full-screen-open\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" fill=\"none\" shapeRendering=\"geometricPrecision\">\r\n                        <path d=\"M15 3h6v6\"></path>\r\n                        <path d=\"M9 21H3v-6\"></path>\r\n                        <path d=\"M21 3l-7 7\"></path>\r\n                        <path d=\"M3 21l7-7\"></path>\r\n                        </svg>\r\n\r\n                        <svg className=\"full-screen-exit\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" fill=\"none\" shapeRendering=\"geometricPrecision\">\r\n                        <path d=\"M4 14h6v6\"></path>\r\n                        <path d=\"M20 10h-6V4\"></path>\r\n                        <path d=\"M14 10l7-7\"></path>\r\n                        <path d=\"M3 21l7-7\"></path>\r\n                        </svg>\r\n\r\n                    </button>\r\n\r\n                    </div>\r\n                </div>\r\n                </div>\r\n            </div>\r\n            \r\n            <div className=\"video-player\">\r\n                <video  id = \"vid-file-stream\" poster = {poster} tabIndex=\"-1\" datavideo=\"\" preload=\"auto\" controlsList=\"nodownload\" crossOrigin = \"anonymous\">\r\n                    <source def = {video_url} id = \"org-video-src\" src={video_url} type=\"video/mp4\"/>\r\n                </video>\r\n\r\n            </div>\r\n\r\n            \r\n        </div>\r\n        <canvas id=\"canvas\"></canvas>\r\n    </>\r\n)\r\n}\r\nexport {Video as default};","import React, { useEffect,useState,useContext, useRef } from 'react';\r\nimport './styles/videoList.css';\r\nimport axios from 'axios';\r\nimport $ from 'jquery'\r\nimport VideoPlayer from './Video'\r\nimport videoContext from '../context/video-context'\r\nimport ListVideos from './ListVideos'\r\nimport VideoFilePlayer from './VideoFile'\r\nimport Peer from 'simple-peer'\r\n\r\nconst VideoList = ({socket})=>{\r\n    const {video} = useContext(videoContext)\r\n    const [videosList,setVideosList] = useState([]);\r\n    const [videosList1,setVideosList1] = useState([]);\r\n    const [vidUrl,setVidUrl] = useState({});\r\n    const userVideo = useRef();\r\n    const streamRef = useRef();\r\n    const createPeersRef = useRef([]);\r\n    const createStreamRef = useRef();\r\n    const addPeersRef = useRef();\r\n    const socketRef = useRef();\r\n    const [users,setUsers] = useState(false);\r\n    const [url_set,setUrlset] = useState(false);\r\n\r\n    useEffect(()=>{\r\n        if(socket){\r\n            socketRef.current = socket;\r\n            socketRef.current.emit(\"join room file\", {roomID:video.user.room,type:'help'});\r\n                \r\n            socketRef.current.on(\"all users file\", users => {\r\n                console.log('all users : ',users,$('#vid-file-stream')[0])\r\n                if(!($('#vid-file-stream')[0])) return;\r\n                var stream = $('#vid-file-stream')[0].captureStream();\r\n                createStreamRef.current = stream;\r\n                console.log('other users : ',users);\r\n                users.forEach((id) => {\r\n                    const peer = createFilePeer(id, socketRef.current.id,stream);\r\n                    var temp = {peerID: id,peer}\r\n                    createPeersRef.current.push(temp)\r\n                })\r\n            })\r\n            \r\n            socketRef.current.on(\"user joined file\", payload => {\r\n                console.log('user joined file running...')\r\n                const peer = addFilePeer(payload.signal, payload.callerID);\r\n                addPeersRef.current = peer;\r\n                peer.on('stream',stream => {\r\n                    console.log(stream);\r\n                    userVideo.current = 'copy'\r\n                    streamRef.current = stream\r\n                    setUsers(a => !a)\r\n                })\r\n                setUsers(a=>!a)\r\n            });\r\n            socketRef.current.on(\"receiving returned signal file\", payload => {\r\n                const item = createPeersRef.current.find(p => p.peerID === payload.id);\r\n                item.peer.signal(payload.signal);\r\n            });\r\n            var URL = window.URL || window.webkitURL\r\n            \r\n            socketRef.current.on('video end file',()=>{\r\n                streamRef.current = null;\r\n                userVideo.current = '';\r\n                window.fileOwner = '';\r\n                addPeersRef.current.destroy();\r\n                setUsers(a => !a)\r\n            })\r\n        }\r\n    },[socket])\r\n    function fileVideoChange(e){\r\n        \r\n        var filetemp = e.target.files[0]\r\n        if(!filetemp) return;\r\n        var type = filetemp.type\r\n        var videoNode = document.createElement('video')\r\n        var canPlay = videoNode.canPlayType(type)\r\n        if(canPlay == '') return;\r\n        var fileUrl = URL.createObjectURL(filetemp)\r\n        console.log(filetemp)\r\n        \r\n        userVideo.current = fileUrl;\r\n        setUsers(a => !a)\r\n    }\r\n    function createFilePeer(userToSignal, callerID, stream) {\r\n        \r\n        const peer = new Peer({\r\n            initiator: true,\r\n            trickle: false,\r\n            stream,\r\n        });\r\n        peer.on(\"signal\", signal => {\r\n            socketRef.current.emit(\"sending signal file\", { userToSignal, callerID, signal,vid:$('video')[0].duration })\r\n        })\r\n        return peer;\r\n    }\r\n\r\n    function addFilePeer(incomingSignal, callerID) {\r\n        const peer = new Peer({\r\n            initiator: false,\r\n            trickle: false,\r\n        })\r\n        window.fileOwner = callerID\r\n        peer.on(\"signal\", signal => {\r\n            socketRef.current.emit(\"returning signal file\", { signal, callerID })\r\n        })\r\n\r\n        peer.signal(incomingSignal);\r\n\r\n        return peer;\r\n    }\r\n\r\n    useEffect(()=>{\r\n        axios.get('https://watch-party-latest.herokuapp.com/video/all')\r\n        .then(res => {\r\n            setVideosList(res.data.video);\r\n            assignVideos(res.data.video);\r\n        })\r\n    },[])\r\n    function assignVideos(arr){\r\n        var k = []\r\n        for(var i = 0;i<4&&i<arr.length;i++){\r\n            k.push(arr[i])\r\n        }\r\n        setVideosList1(k);\r\n    }\r\n    useEffect(()=>{\r\n        if(socket){\r\n            setTimeout(()=>{\r\n                socket.emit('any-video-selected',video.user.room);\r\n                socket.on('video-selected',function(item){\r\n                    setVidUrl(item)\r\n                })\r\n                socket.on('any-video-selected',function (item) {\r\n                    console.log('any-video-selected running and running ',window.vidUrl,item,socket.id)\r\n                    socket.emit('yes-video-selected',{vidUrl:(window.vidUrl?window.vidUrl:{}),to:item})\r\n                })\r\n                socket.on('yes-video-selected',function (item) {\r\n                    console.log('yes-video-selected',item)\r\n                    setVidUrl(item)\r\n                })\r\n            },500);\r\n        }\r\n    },[socket])\r\n\r\n\r\n    if(socket){\r\n        const viewVideo = (item) => {\r\n            window.vidUrl = item;\r\n            if(vidUrl.startedBy){\r\n                alert('You aren\\'t allowed to close this video');\r\n                return;\r\n            }\r\n            socket.emit('video-selected',{item:item,roomID:video.user.room,startedBy:video.user.user._id});\r\n            setVidUrl(item)\r\n        }\r\n        const closeFileVideo = ()=>{\r\n            if(window.fileOwner) return;\r\n            createPeersRef.current.map(item => {\r\n                item.peer.destroy();\r\n            })\r\n            socketRef.current.emit('video end file',video.user.room)\r\n            userVideo.current = ''\r\n            setUsers(a => !a)\r\n        }\r\n        var vid;\r\n        const playUrl = (e) => {\r\n            var k = $('.vlrl .crbtn');\r\n            if(k.find('.cr-loading-spinner').length){\r\n                return;\r\n            }\r\n            var reg = /((([A-Za-z]{3,9}:(?:\\/\\/)?)(?:[-;:&=\\+\\$,\\w]+@)?[A-Za-z0-9.-]+(:[0-9]+)?|(?:www.|[-;:&=\\+\\$,\\w]+@)[A-Za-z0-9.-]+)((?:\\/[\\+~%\\/.\\w-_]*)?\\??(?:[-\\+=&;%@.\\w_]*)#?(?:[\\w]*))?)/\r\n            var str = $('.join-room').val()\r\n            if(str.match(reg) && str.match(reg).length != 0){\r\n                k.text('')\r\n                k.append('<div className=\"cr-loading-spinner\"/>');\r\n                vid = document.createElement('video')\r\n                vid.src = str;\r\n                $(vid).on('error',function(){\r\n                    $('.vlrl-wr-text').text('Sorry, Unable to play the url')\r\n                    $('.vlrl-wr-message').css({left:'3%',transform:'scale(1.0)'})\r\n                    k.text('Play Url')\r\n                    setTimeout(()=>{$('.vlrl-wr-message').css({left:'-33%',transform:'scale(0.5)'})},4000)\r\n                })\r\n                $(vid).on('canplay',function(){\r\n                    viewVideo({video:{video:vid.src,poster:''}})\r\n                    k.text('Play Url')\r\n                })\r\n            }\r\n            else{\r\n                $('.vlrl-wr-text').text('Please enter a valid url');\r\n                $('.vlrl-wr-message').css({left:'3%',transform:'scale(1.0)'})\r\n                setTimeout(()=>{$('.vlrl-wr-message').css({left:'-33%',transform:'scale(0.5)'})},4000)\r\n                return;\r\n            }\r\n            \r\n\r\n        }\r\n        const closeUrlVideo = (e) => {\r\n            if($(e.target).hasClass('url-container') == false) return;\r\n            $('.vlrl').css({transform:'scale(0)',borderRadius:'200px'});\r\n            setTimeout(()=>{\r\n                setUrlset(false)\r\n            },600)\r\n        }\r\n        const openUrlVideo = () => {\r\n            setUrlset(true);\r\n            $('.url-container').fadeIn(10);\r\n            setTimeout(()=>{\r\n                $('.vlrl').css({transform:'scale(1)',borderRadius:'40px'});                \r\n            },50);\r\n        }\r\n        \r\n        return(\r\n            <>\r\n                {vidUrl.video?\r\n                    <>\r\n                        {vidUrl.startedBy?\r\n                            null\r\n                        :\r\n                            <div className = \"vv-back\" onClick = {()=>viewVideo({})}>\r\n                                <i className=\"fas fa-times\"></i>\r\n                            </div>\r\n                        }\r\n                        <div className = 'vvideo-holder'>\r\n                            <VideoPlayer vid = {vidUrl} />\r\n                        </div>\r\n                    </>\r\n                :   \r\n                    <>\r\n                    {userVideo.current?\r\n                        <>\r\n                            {\r\n                                window.fileOwner?\r\n                                    null\r\n                                :\r\n                                    <div className = \"vv-back\" onClick = {()=>closeFileVideo()}>\r\n                                        <i className=\"fas fa-times\"></i>\r\n                                    </div>\r\n                            }\r\n                            <div className = 'vvideo-holder'>\r\n                                <VideoFilePlayer vid={userVideo.current} stream = {streamRef.current} />\r\n                            </div>\r\n                        \r\n                        </>\r\n                    :\r\n                        <>\r\n                            {\r\n                                url_set&&\r\n                                <div className = \"url-container\" onClick = {(e)=>{closeUrlVideo(e)}}>\r\n                                    <div className = \"vlrl-wr-message\">\r\n                                        <i className=\"fas fa-times-circle\"></i>\r\n                                        <span className = \"vlrl-wr-text\"></span>\r\n                                    </div>\r\n                                    <div className = \"vlrl\">\r\n                                        <div className = \"circle-temp\"/>\r\n                                        <div className = \"circle-temp1\"/>\r\n                                        <div className = \"circle-temp2\"/>\r\n                                        <div className = \"crlunderline\">\r\n                                            <span className=\"crlicon-surround\">\r\n                                                <i className = \"fas fa-link crlicon\" ></i>\r\n                                            </span>\r\n                                            <input type = \"url\" className = \"join-room\" placeholder = \"Paste a Url here\"/>\r\n                                        </div>\r\n                                        <button className = \"crbtn\" onClick = {(e)=>{playUrl(e)}}>Play Url</button>\r\n                                    </div>\r\n                                </div>\r\n                            }\r\n                            <div className=\"vlholder\">\r\n                                <input type=\"file\" id = \"vid-file-select\" onChange={(e)=>fileVideoChange(e)} className = \"vlinnercircle\" accept=\"video/*\"/>\r\n                                <i className=\"fas fa-share-alt vlk-vid-upload\"></i>\r\n                                <div className = \"vlano-holder\">\r\n                                    Share a Video\r\n                                </div>   \r\n                            </div>\r\n                            <div className = \"vlholder1\" onClick = {()=>openUrlVideo()}>\r\n                                <div className=\"vlinnercircle1\"/>\r\n                                <i className=\"fas fa-link vlk-vid-upload1\"></i>\r\n                                <div className = \"vlano-holder1\">\r\n                                    Share a Link\r\n                                </div>   \r\n                            </div>\r\n                            \r\n                            <ListVideos videosList = {videosList} videosList1 = {videosList1} viewVideo = {(i)=>viewVideo(i)} />\r\n                        </>\r\n                    }\r\n                    </>\r\n                }         \r\n            </>\r\n        )\r\n    }\r\n    else{\r\n        return null;\r\n    }\r\n}\r\n\r\nexport {VideoList as default}","import React, { useContext, useEffect, useRef, useState } from \"react\";\r\nimport io from \"socket.io-client\";\r\nimport Peer from \"simple-peer\";\r\nimport './styles/room.css'\r\nimport axios from 'axios'\r\nimport $, { get } from 'jquery'\r\nimport VideoUpload from '../components/VideoUpload'\r\n\r\nimport videoContext from '../context/video-context'\r\nimport Chat from './Chat'\r\nimport VideoList from '../components/VideoList'\r\n\r\nconst videoConstraints = {\r\n    height: 'auto',\r\n    width: 'auto'\r\n};\r\n\r\nconst UserInfo = (props) =>{\r\n    return(\r\n        <div className = \"user-info\">\r\n            <div className = \"user-info-top\">\r\n                <div className = \"img-shadow\"><div style ={{background:props.col}} className = 'img-prof'>{props.title}</div></div>\r\n                <div className = \"user-inform\">\r\n                    <div className = \"name\">{props.user.username}</div>\r\n                    <div className = \"email\">{props.user.email}</div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst Slider = (props) =>{\r\n    var video_element = props.vid[props.vid.length-1];\r\n    function volCh() {\r\n        var range =  $(this).val();\r\n        $(props.id+' .voice-slider-buffer').css(\"width\", range * 100 + \"%\");\r\n        video_element.volume = range;\r\n        $(props.id+' .voice-slider-range').attr(\"value\", range);\r\n        if (range == 0) {\r\n            video_element.muted = true;\r\n            $(props.id+' .vol-on').fadeOut(300,function(){$(props.id+' .vol-off').fadeIn(300)});\r\n        } else {\r\n            video_element.muted = false;\r\n            $(props.id+' .vol-off').fadeOut(300,function(){$(props.id+' .vol-on').fadeIn(300);});\r\n        }\r\n    }\r\n    function voCh(e){\r\n        e.stopPropagation();\r\n    }\r\n    useEffect(()=>{\r\n        if(!props.vid) return;\r\n        var to_;\r\n        $(props.id+' .voice-slider').css({width:'0px',visibility:'hidden',opacity:0});\r\n        $(props.id+' .vol-on').fadeIn(300,function(){$(props.id+' .vol-off').fadeOut(300)})\r\n        $(props.id+' .vol-on').on('click',function(e){\r\n            e.stopPropagation();\r\n            $(props.id+' .vol-on').fadeOut(300,function(){$(props.id+' .vol-off').fadeIn(300)});\r\n        })\r\n        $(props.id+' .vol-off').on('click',function(e){\r\n            e.stopPropagation();\r\n            $(props.id+' .vol-off').fadeOut(300,function(){$(props.id+' .vol-on').fadeIn(300);});\r\n        })\r\n\r\n        $(props.id+' .vol-on,'+props.id+' .vol-off,'+props.id+' .voice-slider').hover(function(){\r\n            if(to_) clearTimeout(to_)\r\n            $(props.id+' .voice-slider').css({width:'100px',opacity:'1',visibility:'visible'})\r\n            $(props.id+' .volume-changer').css({right:'-5px'});\r\n        },\r\n        function(){\r\n            to_ = setTimeout(function(){\r\n                $(props.id+' .voice-slider').css({width:'0px',opacity:'0',visibility:'hidden'})\r\n                $(props.id+' .volume-changer').css({right:'-15px'});\r\n            },2000)\r\n        })\r\n        \r\n        $(props.id+' .voice-slider-range').on(\"input change\", volCh);\r\n        $(props.id+' .voice-slider-range').keyup(volCh).keyup();  \r\n\r\n    },[])\r\n    if(!props.vid) return null;\r\n    return(\r\n        <div className = \"volume-changer\" onClick = {(e)=>voCh(e)}>\r\n            <div className = \"vol-surround vol-on\"><img src = \"/static-img/vol.png\" width=\"17\" height = \"17\"/></div>\r\n            <div className = \"vol-surround vol-off\"><img src = \"/static-img/vol_off.png\" width=\"17\" height = \"17\"/></div>\r\n            \r\n            <div className=\"voice-slider\">\r\n                <div className=\"voice-slider-rail\" role=\"slider\" aria-valuemax=\"1\" aria-valuemin = \"0\" aria-valuenow=\"1\">\r\n                    <div className=\"voice-slider-buffer\"/>\r\n                    <input className=\"voice-slider-range\" type=\"range\" min=\"0\" max=\"1\" defaultValue=\"1\" step=\"0.01\" />\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n    )\r\n}\r\nconst Video = (props) => {\r\n    $.fn.textWidth = function(text, font) {\r\n        if (!$.fn.textWidth.fakeEl) $.fn.textWidth.fakeEl = $('<span>').hide().appendTo(document.body);\r\n        $.fn.textWidth.fakeEl.text(text || this.val() || this.text()).css('font', font || this.css('font'));\r\n        return $.fn.textWidth.fakeEl.width();\r\n      };\r\n    const [dummy,setDummy] = useState(false)\r\n    const [slider,setSlider] = useState(false);\r\n    const ref = useRef();\r\n    const audref = useRef();\r\n\r\n    var colors = [\r\n        ['rgb(24,204,30)','rgb(24,220,30)'],\r\n        ['rgb(22,145,170)','rgb(22,170,190)'],\r\n        ['rgb(255,205,0)','rgb(255,225,10)'],\r\n        ['rgb(10,20,140)','rgb(20,10,160)'],\r\n        ['rgb(220,240,250)','rgb(210,255,255)']\r\n    ]\r\n    if(props.user){\r\n        var wid = $('<p>'+props.user.username.toUpperCase()+'</p>').textWidth();\r\n        var nameStyle = {width:wid+15+'px',left:'calc(98% - '+(wid + 10)+'px)'}\r\n    }\r\n    function titleCase(str) {\r\n        return str.toLowerCase().split(' ').map(function(word) {\r\n            return word.replace(word[0], word[0].toUpperCase());\r\n        }).join(' ');\r\n    }\r\n    function title2Case(stri){\r\n        stri = stri.toUpperCase();\r\n        var k = stri.split(' ');var l;\r\n        if(k.length == 1){k = k[0];return k[0]}\r\n        else {l = k[0];k = k[1];return l[0]+k[0]}\r\n    }\r\n    var isVid = false;\r\n    useEffect(() => {\r\n        var temp = false;\r\n        props.peer.on(\"stream\", stream => {\r\n            if(stream.getVideoTracks()[0]){\r\n                isVid = true;\r\n            }\r\n            ref.current.srcObject = stream;\r\n            audref.current.srcObject = stream;\r\n            vuMeter(stream);\r\n            temp = true;\r\n            props.setSt({id:props.id,stream:stream});\r\n        });\r\n        if(!temp && props.st){\r\n            ref.current.srcObject = props.st.stream\r\n        }\r\n    }, []);\r\n\r\n    const vuMeter = (stream) => {\r\n        console.log('vuMeter stream : ',stream)\r\n        var audioContext = new AudioContext();\r\n        var analyser = audioContext.createAnalyser();\r\n        var microphone = audioContext.createMediaStreamSource(stream);\r\n        var javascriptNode = audioContext.createScriptProcessor(2048, 1, 1);\r\n\r\n        analyser.smoothingTimeConstant = 0.8;\r\n        analyser.fftSize = 1024;\r\n\r\n        microphone.connect(analyser);\r\n        analyser.connect(javascriptNode);\r\n        javascriptNode.connect(audioContext.destination);\r\n        javascriptNode.onaudioprocess = function() {\r\n            var array = new Uint8Array(analyser.frequencyBinCount);\r\n            analyser.getByteFrequencyData(array);\r\n            var values = 0;\r\n\r\n            var length = array.length;\r\n            for (var i = 0; i < length; i++) {\r\n              values += (array[i]);\r\n            }\r\n\r\n            var average = values / length;\r\n            if(average-40 > 0){\r\n                $('#'+props.id+' .video-main-surround').css({transform:`scale(${1 + Math.round(average - 40) / 100})`,\r\n                    boxShadow:`0 0 ${5 + 20*Math.round(average - 40) / 100}px rgb(120,140,120)`})\r\n            }\r\n            else{\r\n                $('#'+props.id+' .video-main-surround').css({transform:`scale(1)`,boxShadow:`0 0 0px rgb(120,140,120)`})\r\n            }\r\n        } \r\n    }\r\n    \r\n    const hov = (e)=>{\r\n        $('.other .rvideo-pin').html('UN <i class=\"fas fa-map-pin ricon\"></i>')\r\n    }\r\n    const unhov = (e)=>{\r\n        $('.other .rvideo-pin').html('<i class=\"fas fa-map-pin ricon\"></i>')\r\n        \r\n    }\r\n    const metaLoad = ()=>{\r\n        $('#'+props.id+' audio')[0].pause()\r\n        audref.current.srcObject = null;\r\n        setSlider(true);\r\n    }\r\n    const audMetaLoad = ()=>{\r\n        setSlider(true);\r\n    }\r\n    const e = (str) => {\r\n        console.log(str);\r\n    }\r\n    var te = null;\r\n    var prete = null;\r\n    var locked = false;\r\n    const TimeUpdate = () => {\r\n        if(te){\r\n            clearTimeout(te);\r\n        }\r\n        if(ref.current)\r\n            prete = ref.current.currentTime;\r\n        else \r\n            return;\r\n        te = setTimeout(()=>{\r\n            console.log('time update',prete);\r\n            if(ref.current && prete == ref.current.currentTime && !locked){\r\n                $('#'+props.id+' .video-main-surround').css({width:'140px',height:'140px',fontSize:'70px',left:'calc(50% - 70px)',top:'calc(50% - 70px)'})\r\n                ref.current.load();\r\n                locked = true;\r\n            }\r\n        },1000);\r\n    }\r\n    const CanPlay = ()=>{\r\n        console.log('canplay');\r\n        if(isVid)\r\n            $('#'+props.id+' .video-main-surround').css({width:'40px',height:'40px',fontSize:'20px',left:'10px',top:'10px'})\r\n        locked = false;\r\n    }\r\n    function getRandomInt(min, max) {\r\n        min = Math.ceil(min);\r\n        max = Math.floor(max);\r\n        return Math.floor(Math.random() * (max - min) + min);\r\n    }\r\n    function getColor(){\r\n        var r = [getRandomInt(50,250), getRandomInt(150,250), getRandomInt(50,250)];\r\n        var ind = getRandomInt(0,3);\r\n        var temp = r[ind];r[ind] = r[1];r[1] = temp;\r\n        return 'rgb('+r[0]+','+r[1]+','+r[2]+')';\r\n    }\r\n    var o = getColor();\r\n    return (\r\n        <>\r\n            <video onTimeUpdate = {TimeUpdate} onCanPlay = {CanPlay} onLoadedMetadata = {()=>{metaLoad()}} playsInline autoPlay ref={ref} className=\"rvideo\"/>\r\n            <audio onLoadedMetadata = {()=>{audMetaLoad()}} playsInline autoPlay ref={audref}/>\r\n            <div className = \"video-controls-bg\">\r\n                {props.user&&\r\n                    <div className = \"video-main-surround\" \r\n                        style = {{backgroundImage:`linear-gradient(45deg, rgb(30,70,50) 0, rgb(30,50,80) 49%, ${o} 51%, ${o} 100%)`}}\r\n                    >\r\n                            {title2Case(props.user.username)}</div>\r\n                }\r\n                {props.user &&\r\n                    <>\r\n                        <div className = \"r-container\">\r\n                            <div onClick = {(e)=>props.otherUnpin(e)} onMouseEnter={hov} onMouseLeave={unhov} className = \"rvideo-pin\"><i className=\"fas fa-map-pin ricon\"></i></div>\r\n                            <div style = {nameStyle} className = \"rvideo-name\">{titleCase(props.user.username)}</div>\r\n                        </div>\r\n                        {slider &&\r\n                            <Slider vid = {$('#'+props.id+' video')} vidRef = {ref} id={'#'+props.id} />\r\n                        }\r\n                    </>\r\n                }\r\n            </div>\r\n        </> \r\n    );\r\n}\r\n\r\nconst Room = (props) => {\r\n    const [stre,setStre] = useState([]);\r\n    const [peers, setPeers] = useState([]);\r\n    const socketRef = useRef();\r\n    const userVideo = useRef();\r\n    const peersRef = useRef([]);\r\n    const actualPeersRef = useRef([]);\r\n\r\n\r\n    const [chat,setChat] = useState([]);\r\n    const {video,dispatch} = useContext(videoContext)\r\n    const [renderer,setRenderer] = useState(false);\r\n    const [members,setMembers] = useState([]);\r\n    const [users,setUsers] = useState([]);\r\n    const [rooms,setRooms] = useState([]);\r\n    const [myvideos,setMyvideos] = useState([]);\r\n\r\n    function addZero(num){\r\n        if(num == 0) return '0';\r\n        if(num/10<1){\r\n          return '0'+num;\r\n        }\r\n        return num;\r\n    }\r\n    React.useEffect(()=>{\r\n        const script = document.createElement(\"script\");\r\n        script.src = \"/path/to/room.js\";\r\n        script.async = true;\r\n        document.body.appendChild(script);\r\n        if(video.curV){$('.vid-off').fadeOut(300);}\r\n        else{$('.vid-on').fadeOut(300);}\r\n        if(video.curA){$('.aud-off').fadeOut(300);}\r\n        else{$('.aud-on').fadeOut(300);}\r\n        \r\n    },[]);\r\n    React.useEffect(()=>{\r\n        axios.post('https://watch-party-latest.herokuapp.com/room/members',{id:video.user.user._id,roomId:video.user.room})\r\n        .then(res=>{\r\n            setMembers(res.data)\r\n        })\r\n    },[]);\r\n    React.useEffect(()=>{\r\n        axios.get('https://watch-party-latest.herokuapp.com/video/me',{\r\n            headers:{\r\n            Authorization: 'Bearer '+video.user.token\r\n            }\r\n        })\r\n        .then(res => {\r\n            var vid,videos = res.data.video;\r\n            console.log(videos.length)\r\n            durationfinder(vid,videos,0) \r\n        })\r\n    },[]);\r\n\r\n    const addVideo = (vids) =>{\r\n        console.log('vids add video',vids)\r\n        var vid;\r\n        durationfinder(vid,[vids],0);\r\n    }\r\n\r\n    function durationfinder(vid,videos,i){\r\n        if(i>=videos.length) {setMyvideos(a=>[...a,...videos]);return;}\r\n        vid = '<video ><source src = \"'+videos[i].video+'\" type = \"video/mp4\"></video>'\r\n        $(vid).on('loadedmetadata',function(){\r\n          var hr = addZero(Math.floor(this.duration/3600))\r\n          var min = addZero(Math.floor((this.duration%3600)/60))\r\n          var sec = addZero(Math.floor((this.duration%3600)%60))\r\n          videos[i].duration = (hr=='0'?'':(hr+':'))+min+':'+sec;\r\n          durationfinder(vid,videos,i+1)\r\n        })\r\n    }\r\n\r\n    React.useEffect(()=>{\r\n        axios.post('https://watch-party-latest.herokuapp.com/chat/get',{id:video.user.user._id,roomId:video.user.room},{\r\n            headers:{\r\n                Authorization: 'Bearer ' + video.user.token\r\n            }\r\n        })\r\n        .then(res=>{\r\n            setChat(res.data);\r\n        })\r\n        .catch(err=>{\r\n            console.log(err);\r\n        })\r\n    },[]);\r\n    \r\n    const arrayPush = (arr,item) => {\r\n        var i = 0;\r\n        for(var i = 0;i<arr.length;i++){\r\n            if(arr[i].peerID == item.peerID){\r\n                arr[i] = item;\r\n                return true;\r\n            }\r\n        }\r\n        arr.push(item);\r\n        return false;\r\n    }\r\n    const duplicateCheck = (user) => {\r\n        if(userssum.current && userssum.current._id == user._id){\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n    var userssum = useRef();\r\n\r\n    useEffect(() => {\r\n        socketRef.current = io.connect('https://watch-party-latest.herokuapp.com/',{transports: ['websocket', 'polling', 'flashsocket']});\r\n        window.socket = socketRef.current\r\n        try{\r\n            navigator.mediaDevices.getUserMedia({ \r\n                video: video.video?{deviceId:{exact:video.video}}:false,\r\n                audio: video.voice?{deviceId:{exact:video.voice}}:false\r\n            })\r\n            .then(stream => {\r\n                if(userVideo.current)\r\n                { userVideo.current.srcObject = stream;}\r\n                if(video.curV){\r\n                    $('.me .video-main-surround').css({width:'40px',height:'40px',fontSize:'20px',left:'10px',top:'10px'})\r\n                }\r\n                if(!video.curA && video.voice){\r\n                    audOff();\r\n                }\r\n                if(!video.curV && video.video){\r\n                    vidOff();\r\n                }\r\n                vuMeter(stream);\r\n                if(video.video && !video.voice){\r\n                    socketRef.current.emit(\"join room\", {id:video.user.user._id,roomID:video.user.room,type:'help',mode:'video'});\r\n                }\r\n                else if(video.voice && !video.video){\r\n                    socketRef.current.emit(\"join room\", {id:video.user.user._id,roomID:video.user.room,type:'help',mode:'voice'});\r\n                }\r\n                else{\r\n                    socketRef.current.emit(\"join room\", {id:video.user.user._id,roomID:video.user.room,type:'normal'});\r\n                }\r\n\r\n                socketRef.current.on('duplicate check',function({id}){\r\n                    if(id == video.user.user._id){\r\n                        window.location.href = (new URL(window.location.href)).origin + '/create/'\r\n                    }\r\n                })\r\n                \r\n                socketRef.current.on(\"all users\", ({users,mode}) => {\r\n                    console.log('users : ',users)\r\n                    if(!video.voice && video.video && mode == 'voice'){\r\n                        console.log('voice mode accepting video')\r\n                        socketRef.current.emit('all users inducer',users[0])\r\n                        return;\r\n                    }\r\n                    const peeers = [];\r\n                    users.forEach((id) => {                        \r\n                        const peer = createPeer(id, socketRef.current.id, stream);\r\n                        var temp = {peerID: id,peer,user:null}\r\n                        arrayPush(peersRef.current,temp)\r\n                        if(peersRef.current.length<15){\r\n                            arrayPush(actualPeersRef.current,temp)\r\n                        }\r\n                        peeers.push(peer);\r\n                    })\r\n                    setPeers(users => [...users,...peeers]);\r\n                })\r\n\r\n                socketRef.current.on(\"user joined\", payload => {\r\n                    const peer = addPeer(payload.signal, payload.callerID, stream);\r\n                    var temp = {peerID: payload.callerID,peer,user:payload.user}\r\n                    var change = arrayPush(peersRef.current,temp)\r\n                    if(peersRef.current.length<15){\r\n                        arrayPush(actualPeersRef.current,temp)\r\n                    }\r\n                    if(!change)\r\n                        setUsers(user => [...user,payload.user])\r\n                });\r\n\r\n                socketRef.current.on(\"receiving returned signal\", payload => {\r\n                    const item = peersRef.current.find(p => p.peerID === payload.id);\r\n                    item.user = payload.user\r\n                    item.peer.signal(payload.signal);\r\n                    if(duplicateCheck(payload.user)){\r\n                        userssum.current = payload.user;\r\n                        setUsers(user => [...user,payload.user])\r\n                    }\r\n                    else{\r\n                        setRenderer(a => !a);\r\n                    }\r\n                });\r\n                socketRef.current.on('v disconnection', () =>{\r\n                    console.log('v disconnection running....');\r\n                    window.location.reload();\r\n                })\r\n            })\r\n            .catch(err=>{\r\n                \r\n                socketRef.current.emit(\"join room\", {id:video.user.user._id,roomID:video.user.room,type:'help'});\r\n                \r\n                socketRef.current.on('duplicate check',function({id}){\r\n                    if(id == video.user.user._id){\r\n                        window.location.href = (new URL(window.location.href)).origin + '/create/'\r\n                    }\r\n                })\r\n\r\n                socketRef.current.on(\"all users\", ({users,mode}) => {\r\n                    if(mode == 'video' || mode == 'voice'){\r\n                        socketRef.current.emit('all users inducer',users[0])\r\n                        return;\r\n                    }\r\n                    const peeers = [];\r\n                    users.forEach((id) => {\r\n                        const peer = createPeer(id,socketRef.current.id,null);\r\n                        var temp = {peerID: id,peer,user:null}\r\n                        peersRef.current.push(temp)\r\n                        if(peersRef.current.length<15){\r\n                            actualPeersRef.current.push(temp)\r\n                        }\r\n                        peeers.push(peer);\r\n                    })\r\n                    setPeers(users => [...users,...peeers]);\r\n                })\r\n\r\n                socketRef.current.on(\"user joined\", payload => {\r\n                    const peer = addPeer(payload.signal, payload.callerID, null);\r\n                    var temp = {peerID: payload.callerID,peer,user:payload.user}\r\n                    peersRef.current.push(temp)\r\n                    if(peersRef.current.length<15){\r\n                        actualPeersRef.current.push(temp)\r\n                    }\r\n                    setUsers(user => [...user,payload.user])\r\n                });\r\n\r\n                socketRef.current.on(\"receiving returned signal\", payload => {\r\n                    const item = peersRef.current.find(p => p.peerID === payload.id);\r\n                    item.user = payload.user;\r\n                    item.peer.signal(payload.signal);\r\n                    setUsers(user => [...user,payload.user])\r\n                });\r\n            })\r\n\r\n            socketRef.current.on(\"user left\",id =>{\r\n                const peerObj = peersRef.current.find(p => p.peerID === id)\r\n                if(!peerObj) return;\r\n\r\n                var user = peerObj.user;\r\n                const peerObj1 = actualPeersRef.current.find(p => p.peerID === id)\r\n                if(peerObj){\r\n                    peerObj.peer.destroy()\r\n                }\r\n                if(peerObj1){peerObj1.peer.destroy()}\r\n                peersRef.current = peersRef.current.filter(p => p.peerID !== id)\r\n                actualPeersRef.current = actualPeersRef.current.filter(p => p.peerID !== id)\r\n                var k = stre.filter(t => t.peerID!=id);\r\n                setStre([...k]);\r\n                if(actualPeersRef.current.length == 0 && !$('.me').hasClass('rvideo-surround')){\r\n                    otherUnpin(0);\r\n                }\r\n                k = users.filter(t => t._id!=user._id);\r\n                setUsers([...k])\r\n            })\r\n        }\r\n        catch(err){\r\n        }\r\n\r\n    }, []);\r\n    function createPeer(userToSignal, callerID, stream) {\r\n        const peer = new Peer({\r\n            initiator: true,\r\n            trickle: false,\r\n            stream,\r\n        });\r\n        peer.on(\"signal\", signal => {\r\n            console.log('sending signal...',callerID,signal);\r\n            socketRef.current.emit(\"sending signal\", { userToSignal, callerID, signal,user:video.user.user })\r\n        })\r\n        return peer;\r\n    }\r\n\r\n    function addPeer(incomingSignal, callerID, stream) {\r\n        const peer = new Peer({\r\n            initiator: false,\r\n            trickle: false,\r\n            stream,\r\n        })\r\n        \r\n        peer.on(\"signal\", signal => {\r\n            console.log('returning signal ',callerID,signal)\r\n            socketRef.current.emit(\"returning signal\", { signal, callerID,user:video.user.user })\r\n        })\r\n\r\n        peer.signal(incomingSignal);\r\n\r\n        return peer;\r\n    }\r\n    React.useEffect(()=>{\r\n        var k = $(video.options.audio)\r\n        $('.container').append(k);\r\n        k = $(video.options.video)\r\n        $('.container').append(k);\r\n        if(!video.voice){ \r\n            $('#audioDevice .options').css({borderRight:'3px solid rgb(3,240,100)'})\r\n        }    \r\n        else{\r\n            $('.aud-opt').each(function(ind){\r\n                if($(this).attr('value') == video.voice){\r\n                    $(this).css({borderRight:'3px solid rgb(3,240,100)'})\r\n                }\r\n            })\r\n            $('.aud-op-opt').each(function(ind){\r\n                if($(this).attr('value') == video.voiceOp){\r\n                    $(this).css({borderRight:'3px solid rgb(3,240,100)'})\r\n                }\r\n            })\r\n        }\r\n        if(!video.video){ \r\n            $('#videoDevice .options').css({borderRight:'3px solid rgb(3,240,100)'})\r\n        }    \r\n        else{\r\n            $('.vid-opt').each(function(ind){\r\n                if($(this).attr('value') == video.video){\r\n                    $(this).css({borderRight:'3px solid rgb(3,240,100)'})\r\n                }\r\n            })\r\n        }\r\n        $('.aud-opt').on('click',function(){\r\n            if(video.voice == $(this).attr('value')) return;\r\n            $('.aud-opt').css({borderRight:'none'})\r\n            $(this).css({borderRight:'3px solid rgb(3,240,100)'})\r\n            video.voice = $(this).attr('value')\r\n            audOn();\r\n        })\r\n        $('.vid-opt').on('click',function(){\r\n            if(video.video == $(this).attr('value')) return;\r\n            $('.vid-opt').css({borderRight:'none'})\r\n            $(this).css({borderRight:'3px solid rgb(3,240,100)'})\r\n            video.video = $(this).attr('value');\r\n            vidOn();\r\n        })\r\n        var mouse_is_inside=false;\r\n        $('.drp-dwn-box').hover(function(){ \r\n            console.log('hover')\r\n            mouse_is_inside=true; \r\n        }, function(){ \r\n            console.log('hover not')\r\n            mouse_is_inside=false; \r\n        });\r\n    \r\n        $(document).mouseup(function(){ \r\n            if(! mouse_is_inside) $('.drp-dwn-box').fadeOut(100);\r\n        });\r\n    },[])\r\n    \r\n    useEffect(()=>{\r\n        axios.get('https://watch-party-latest.herokuapp.com/room/me',{\r\n            headers:{\r\n                Authorization: 'Bearer ' + video.user.token\r\n            }\r\n        })\r\n        .then(res => {\r\n            setRooms(res.data)\r\n        })\r\n        .catch(err => {\r\n            console.log(err);\r\n        })\r\n    },[])\r\n\r\n    \r\n    var curV = false,curA = false;\r\n    if(video.video) curV = true;if(video.voice) curA = true;\r\n\r\n    const audOn = () => {\r\n        navigator.mediaDevices.getUserMedia({ \r\n            video: curV?{deviceId: {exact: video.video},videoConstraints}:false, \r\n            audio: {deviceId: {exact: video.voice}}\r\n        }).then(stream => {\r\n            var oldt = userVideo.current.srcObject.getAudioTracks()[0]\r\n            if(userVideo.current)\r\n            { \r\n                userVideo.current.srcObject.removeTrack(oldt)\r\n                userVideo.current.srcObject.addTrack(stream.getAudioTracks()[0])\r\n            }\r\n            var newt = userVideo.current.srcObject.getAudioTracks()[0];\r\n            $('.aud-off').fadeOut(200,function(){$('.aud-on').fadeIn(200);})\r\n            peersRef.current.map(t=>{\r\n                t.peer.replaceTrack(oldt,newt,userVideo.current.srcObject)\r\n            })\r\n        }).catch(err=>{\r\n            console.log(err); \r\n            alert('Permission Denied');\r\n        })\r\n        curA = true;\r\n    }\r\n    const vidOn = ()=>{\r\n        navigator.mediaDevices.getUserMedia({  \r\n            video: {deviceId: {exact: video.video},videoConstraints},\r\n            audio:curA?{deviceId:{exact:video.voice}}:false\r\n        }).then(stream => {\r\n            $('.me .video-main-surround').css({width:'40px',height:'40px',fontSize:'20px',left:'10px',top:'10px'})\r\n            var oldt = userVideo.current.srcObject.getVideoTracks()[0]\r\n            if(userVideo.current)\r\n            { \r\n                userVideo.current.srcObject.removeTrack(oldt)\r\n                userVideo.current.srcObject.addTrack(stream.getVideoTracks()[0])\r\n                userVideo.current.play();\r\n            }\r\n            var newt = userVideo.current.srcObject.getVideoTracks()[0];\r\n            $('.vid-off').fadeOut(200,function(){$('.vid-on').fadeIn(200);})\r\n            peersRef.current.map(t=>{\r\n                t.peer.replaceTrack(oldt,newt,userVideo.current.srcObject)\r\n            })\r\n        })\r\n        .catch(err=>{\r\n            console.log(err);\r\n            alert('Permission Denied');\r\n        })\r\n        curV = true;\r\n        \r\n\r\n    }\r\n    const vidOff = ()=>{\r\n        stop('video');\r\n        // var k = userVideo.current.srcObject.getVideoTracks()[0];\r\n        // k.enabled = false;\r\n        curV = false;\r\n        userVideo.current.pause();\r\n        $('.vid-on').fadeOut(200,function(){$('.vid-off').fadeIn(200);})\r\n        $('.me .video-main-surround').css({width:'140px',height:'140px',fontSize:'70px',left:'calc(50% - 70px)',top:'calc(50% - 70px)'})\r\n\r\n    }\r\n    const audOff = ()=>{\r\n        var k = userVideo.current.srcObject.getAudioTracks()[0];\r\n        k.enabled = false;\r\n        stop('audio');\r\n        curA = false;\r\n        $('.aud-on').fadeOut(200,function(){$('.aud-off').fadeIn(200);})\r\n        \r\n    }\r\n    const stop = k => userVideo.current.srcObject.getTracks().map(async(t) =>{ if(t.kind == k){await t.stop();}});\r\n    var wid = 1100,ht = 620;\r\n    \r\n    const ch = (k = 0)=>{\r\n        var len = Math.min(actualPeersRef.current.length + 1,$('.rvideo-surround').length);\r\n        if(len>=1){\r\n            $('.rvideo-surround').css({width:'1000px',height:'600px'});\r\n        }\r\n        if(len>=2){\r\n            $('.rvideo-surround').css({width:wid/2,height:ht/2});\r\n        }\r\n        if(len>=5){\r\n            $('.rvideo-grid').css({gridTemplateColumns:'auto auto auto'})\r\n            $('.rvideo-surround').css({width:wid/3,height:ht/2.8});\r\n        }\r\n        if(len>=10){\r\n            $('.rvideo-grid').css({gridTemplateColumns:'auto auto auto auto'})\r\n            $('.rvideo-surround').css({width:wid/3.8,height:ht/3.1});\r\n        }\r\n        if(len>=13){\r\n            $('.rvideo-grid').css({gridTemplateColumns:'auto auto auto auto'})\r\n            $('.rvideo-surround').css({width:wid/3.8,height:ht/3.8});\r\n        }\r\n    }\r\n    ch()\r\n    if(!(actualPeersRef.current.length == 0 && peersRef.current.length>0)) \r\n        $('.me .rvideo-pin').fadeOut();\r\n    const myPin = ()=>{\r\n        $('.me').find('.rvideo-pin').fadeIn(500);\r\n        if(actualPeersRef.current.length == 0){\r\n            return;\r\n        }\r\n        else{\r\n            actualPeersRef.current = []\r\n            $('.other').removeClass('rvideo-surround')\r\n            setRenderer(dummy => !dummy)\r\n            ch();\r\n        }\r\n    }\r\n    const otherPin = (peerID)=>{\r\n        var item = peersRef.current.find(p => p.peerID == peerID);\r\n        // console.log(item);\r\n        $('.me').fadeOut();\r\n        $('.me').removeClass('rvideo-surround');\r\n        $('.other .rvideo-pin').fadeIn(500);\r\n        actualPeersRef.current = [item];\r\n        setRenderer(dummy => !dummy)\r\n        ch();\r\n    }\r\n    const otherPinSel = (user) => {\r\n        // console.log(user);\r\n        const peer = peersRef.current.find(t => t.user._id == user._id);\r\n        otherPin(peer.peerID)\r\n    }\r\n    const otherUnpin = (e)=>{  \r\n        if(e!=0)\r\n            e.stopPropagation(); \r\n        console.log('running other unpin...')\r\n        var peer = actualPeersRef.current[0];var lim = 15;\r\n        for(var i = actualPeersRef.current.length;i<=lim && i<peersRef.current.length;i++){\r\n            if(peer && peer.peerID == peersRef.current[i].peerID){lim = 16;continue;}\r\n            actualPeersRef.current.push(peersRef.current[i])\r\n        }\r\n        $('.me').addClass('rvideo-surround')\r\n        $('.me').fadeIn();\r\n        ch();\r\n        setRenderer(dummy => !dummy)\r\n    }\r\n    \r\n    const meUnpin =(e)=>{\r\n        $('.me .rvideo-pin').fadeOut();\r\n        if(actualPeersRef.current.length == 0 && peersRef.current.length == 0){\r\n            return;\r\n        }\r\n        if(actualPeersRef.current.length >= 2){\r\n            return;\r\n        }\r\n        e.stopPropagation();\r\n        for(var i = 0;i<15&&i<peersRef.current.length&&actualPeersRef.current.length<peersRef.current.length;i++){\r\n            actualPeersRef.current.push(peersRef.current[i])\r\n        }\r\n        $('.me .rvideo-pin').fadeOut(500);\r\n        setRenderer(dummy => !dummy)\r\n        ch();\r\n\r\n    }\r\n    const options = {\r\n        root: document.querySelector('r-members'),\r\n        rootMargin: '0px',\r\n        threshold: [0.1]\r\n    }\r\n    const options1 = {\r\n        root: document.querySelector('r-videos'),\r\n        rootMargin: '0px',\r\n        threshold: [0.1]\r\n    }\r\n    const options2 = {\r\n        root: document.querySelector('r-rooms'),\r\n        rootMargin: '0px',\r\n        threshold: [0.1]\r\n    }  \r\n    function callback (entries, observer) {\r\n        entries.forEach(entry => {\r\n            if (entry.intersectionRatio > 0.1) {\r\n                $(entry.target).css({transform:' translateX(0%)'})\r\n            } else {\r\n                $(entry.target).css({transform:' translateX(-50%)'})\r\n            }\r\n        });\r\n    }\r\n      \r\n    const vuMeter = (stream) => {\r\n        var audioContext = new AudioContext();\r\n        var analyser = audioContext.createAnalyser();\r\n        var microphone = audioContext.createMediaStreamSource(stream);\r\n        var javascriptNode = audioContext.createScriptProcessor(2048, 1, 1);\r\n\r\n        analyser.smoothingTimeConstant = 0.8;\r\n        analyser.fftSize = 1024;\r\n\r\n        microphone.connect(analyser);\r\n        analyser.connect(javascriptNode);\r\n        javascriptNode.connect(audioContext.destination);\r\n        javascriptNode.onaudioprocess = function() {\r\n            var array = new Uint8Array(analyser.frequencyBinCount);\r\n            analyser.getByteFrequencyData(array);\r\n            var values = 0;\r\n\r\n            var length = array.length;\r\n            for (var i = 0; i < length; i++) {\r\n              values += (array[i]);\r\n            }\r\n\r\n            var average = values / length;\r\n            if(average-40 > 0){\r\n                $('.me .video-main-surround').css({transform:`scale(${1 + Math.round(average - 40) / 100})`,\r\n                    boxShadow:`0 0 ${5 + 20*Math.round(average - 40) / 100}px rgb(120,140,120)`})\r\n            }\r\n            else{\r\n                $('.me .video-main-surround').css({transform:`scale(1)`,boxShadow:`0 0 0px rgb(120,140,120)`})\r\n            }\r\n        } \r\n    }\r\n\r\n    let observer = new IntersectionObserver(callback, options);\r\n    let observer1 = new IntersectionObserver(callback, options1);\r\n    let observer2 = new IntersectionObserver(callback, options2);\r\n\r\n\r\n    function getRandomInt(min, max) {\r\n        min = Math.ceil(min);\r\n        max = Math.floor(max);\r\n        return Math.floor(Math.random() * (max - min) + min);\r\n    }\r\n    function getColor(){\r\n        var r = [getRandomInt(10,250), getRandomInt(50,250), getRandomInt(10,250)];\r\n        var ind = getRandomInt(0,3);\r\n        var temp = r[ind];r[ind] = r[1];r[1] = temp;\r\n        return 'rgb('+r[0]+','+r[1]+','+r[2]+')';\r\n    }\r\n    function title2Case(stri){\r\n        stri = stri.toUpperCase();\r\n        var k = stri.split(' ');var l;\r\n        if(k.length == 1){k = k[0];return k[0]}\r\n        else {l = k[0];k = k[1];return l[0]+k[0]}\r\n    }\r\n    var col = getColor()\r\n    var notJoined = members.filter(i=>!users.map(( user ) => user._id).includes(i._id));\r\n\r\n    const changeAudio = ()=>{\r\n        $('#videoDevice').fadeOut(10);\r\n        $('#audioDevice').fadeIn(10);\r\n    }\r\n    const changeVideo = ()=>{\r\n        $('#audioDevice').fadeOut(10);\r\n        $('#videoDevice').fadeIn(10);\r\n    }\r\n    const retStre = (peerID)=>{\r\n       return stre.find(t=>t.id == peerID);\r\n    }\r\n    const changeRoom = (roomid) =>{\r\n        var url = new URL(window.location.href)\r\n        if(roomid == video.user.room) return;\r\n        window.location.href = url.origin + '/room/' + roomid\r\n    }\r\n    const SignOut = () => {\r\n        localStorage.removeItem('id');\r\n        localStorage.removeItem('vid-token');\r\n        var url = new URL(window.location.href)\r\n        axios.post('https://watch-party-latest.herokuapp.com/users/logout',{\r\n            id:video.user.user._id,token:video.user.token\r\n        })\r\n        .then(res => {\r\n            window.location.href = url.origin\r\n            dispatch({\r\n                type:'SET_VOICE',\r\n                voice : false\r\n            })\r\n            dispatch({\r\n                type:'SET_AUDOP',\r\n                voiceOp:false\r\n            })\r\n            dispatch({\r\n                type:'SET_CUR',\r\n                curA:false,curV:false\r\n            })\r\n            dispatch({\r\n                type:'SET_VIDEO',\r\n                video : false\r\n            })\r\n            dispatch({\r\n                type:'SET_OPTIONS',\r\n                options:{audio:'',video:''}\r\n            })\r\n            dispatch({\r\n                type:'SET_ROOM',\r\n                room:false\r\n            })\r\n            dispatch({\r\n                type:'SET_USER',\r\n                user:null\r\n            })\r\n        })\r\n        .catch(err=>{\r\n            console.log('error in logging out');\r\n        })\r\n    }\r\n    RTCDataChannel.onerror = (err) => {\r\n        console.log(err);\r\n        alert('something wrong on our side');\r\n    }\r\n    return (\r\n        <>\r\n\r\n            <div className = \"r-dashboard\">\r\n                <div className = \"dashboard-selector\">\r\n                    <div className = \"dashboard-option\" id = \"home\">\r\n                        <i className=\"fas fa-h-square d-opt-icon\"></i>\r\n                    </div>\r\n                    <div className = \"dashboard-option\" id = \"vidup\">\r\n                        <i className=\"fas fa-upload d-opt-icon\"></i>\r\n                    </div>\r\n                    <div className = \"dashboard-option\" id = \"vidch\">\r\n                        <i className=\"fas fa-video d-opt-icon\"></i>\r\n                    </div>\r\n                    <div className = \"dashboard-option\" id = \"vid\">\r\n                        <i className=\"fab fa-youtube d-opt-icon\"></i>\r\n                    </div>\r\n                    <div className = \"d-opt-selector\"/>\r\n                </div>\r\n\r\n                <div className = \"rholder\" onClick = {()=>SignOut()}>\r\n                    <div className=\"rinnercircle\"/>\r\n                    <i className=\"fas fa-sign-out-alt rk-vid-upload\"></i>\r\n                </div>\r\n\r\n                <div className = \"r-rooms\">\r\n                    \r\n                    <div className=\"r-mem-prelim\">Rooms Created ({rooms.created?rooms.created.length:0})</div>\r\n                    {\r\n                        rooms.created&&\r\n                        rooms.created.map((item,index) => {\r\n                            return(\r\n                                <div key = {index} className = \"r-room\" onClick = {()=>changeRoom(item.id)}>\r\n                                    <div style = {{background:getColor()}} className=\"img-prof1\">{title2Case(item.name)}</div>\r\n                                    {item.name} {item.id == video.user.room?<div className = \"current-room\"/>:null}\r\n                                </div>\r\n                            )\r\n                        })\r\n                    }\r\n                    <div className=\"r-mem-prelim\">Other Rooms ({rooms.member?rooms.member.length:0})</div>\r\n                    {\r\n                        rooms.member&&\r\n                        rooms.member.map((item,index) => {\r\n                            if(index == rooms.member.length-1){\r\n                                setTimeout(function () {\r\n                                    $('.r-room').each(\r\n                                        function (ind) {  \r\n                                            observer2.observe(this)\r\n                                        }\r\n                                    )\r\n                                },100);\r\n                            }\r\n                            return(\r\n                                <div key = {index} className = \"r-room\" onClick = {()=>changeRoom(item.id)}>\r\n                                    <div style = {{background:getColor()}} className=\"img-prof1\">{title2Case(item.name)}</div>\r\n                                    {item.name} {item.id == video.user.room?<div className = \"current-room\"/>:null}\r\n                                </div>\r\n                            )\r\n                        })\r\n                    }\r\n                </div>\r\n                <div className = \"r-videos\">\r\n                    {\r\n                        myvideos.length!=0?\r\n                        <>\r\n                            <div className = \"r-mem-prelim\">Your Videos</div>\r\n                            {\r\n                                myvideos.map((item,index) =>{\r\n                                    if(index == myvideos.length-1){\r\n                                        setTimeout(function () {\r\n                                            $('.r-video-').each(\r\n                                                function (ind) {  \r\n                                                    observer2.observe(this)\r\n                                                }\r\n                                            )\r\n                                        },100);\r\n                                    }\r\n                                    return(\r\n                                        <div key = {index} className = \"r-video-\">\r\n                                            <div className = \"vid-poster\"><img src = {item.poster} width = \"100\" height = \"75\"/></div>\r\n                                            <div className = \"vid-name\">{item.name}</div>\r\n                                            <div className = \"vid-views\">12 views</div>\r\n                                            <div className = \"vid-duration\">{item.duration}</div>\r\n                                        </div>    \r\n                                    )\r\n                                })\r\n                            }\r\n                        </>\r\n                        :<div className = \"r-mem-prelim\">No Videos Uploaded</div>\r\n                    }\r\n                </div>    \r\n                <div className = 'r-members' >\r\n                    <div className = 'r-mem-prelim'>Total Members ({members.length+1})</div>\r\n                    <div className = 'r-mem-prelim'>Online ({users.length+1})</div>\r\n                    <div className = 'r-member' onClick = {(e)=>{myPin(e)}}>\r\n                        <div style = {{background:col}} className=\"img-prof\">{title2Case(video.user.user.username)}</div>\r\n                        {video.user.user.username} (you)\r\n                    </div>\r\n                    \r\n                    {\r\n                        users.map((user,index)=>{\r\n                            if(index == peersRef.current.length-1){\r\n                                setTimeout(function (params) {\r\n                                    $('.r-member').each(\r\n                                        function (ind) {  \r\n                                            observer.observe(this)\r\n                                        }\r\n                                    )\r\n                                },100);\r\n                            }\r\n                            return (\r\n                                <div className = 'r-member' key = {index} onClick = {()=>{otherPinSel(user)}}>\r\n                                    \r\n                                    <div style = {{background:getColor()}} className=\"img-prof\">{title2Case(user.username)}</div>\r\n                                    {user.username}\r\n                                </div>\r\n                            )\r\n                        })\r\n                    }\r\n                    <div className = 'r-mem-prelim'>Offline</div>\r\n                    {\r\n                        notJoined.map((t,index) => {\r\n                            if(index == notJoined.length-1){\r\n                                setTimeout(function (params) {\r\n                                    $('.r-member').each(\r\n                                        function (ind) {  \r\n                                            observer.observe(this)\r\n                                        }\r\n                                    )\r\n                                },100);\r\n                            }\r\n                            return (\r\n                                <div className = 'r-member' key = {index}>\r\n                                    <div style = {{background:getColor()}} className=\"img-prof\">{title2Case(t.username)}</div>\r\n                                    {t.username}\r\n                                </div>\r\n                            )\r\n                        })\r\n                    }\r\n\r\n                </div>\r\n            </div>\r\n            \r\n            <div className = \"overall-container\">\r\n                <div className = \"inside-overall-container\">\r\n                    <div className = \"video-list\">\r\n                        <VideoList socket = {socketRef.current} />\r\n                    </div>\r\n                    <div className = \"video-upload-container\">\r\n                        <VideoUpload addVideo = {(i)=>addVideo(i)}/>\r\n                    </div>\r\n                    <div className = \"container\">\r\n                        <div className = \"circle-temp2\"/>\r\n                        <div className = \"egg-temp\"/>\r\n                        <div className = \"circle-temp1\"/>\r\n                        <div className = \"circle-temp3\"/>\r\n                        <div className = \"circle-temp4\"/>\r\n                    <div className = \"rvideo-grid\">\r\n                        <div className = \"rvideo-surround me\" onClick={()=>myPin()}>\r\n                            <video  muted width=\"100%\" height='100%' ref={userVideo} autoPlay playsInline className = \"rvideo\"/>\r\n                            <div className = \"video-controls-bg\">\r\n                                <div className = \"video-main-surround\" \r\n                                    style = {{backgroundImage:`linear-gradient(45deg, rgb(30,60,80) 0, rgb(20,50,70) 49%, rgb(225,30,40) 51%, rgb(245,20,20) 100%)`}}>\r\n                                        <i className=\"fas fa-user\"></i></div>\r\n                                <div className = \"r-container\">\r\n                                    <div onClick = {(e)=>meUnpin(e)} className = \"rvideo-pin\"><i className=\"fas fa-map-pin ricon\"></i></div>\r\n                                    <div className = \"rvideo-name\">You</div>\r\n                                </div>\r\n                            </div>\r\n                        </div>             \r\n                        {actualPeersRef.current.length > 0?\r\n                            actualPeersRef.current.map(({peerID,peer,user}, index) => {\r\n                                if(index == actualPeersRef.current.length - 1){\r\n                                    setTimeout(function(){ch();\r\n                                        if($('.me').hasClass('rvideo-surround')){\r\n                                            $('.other .rvideo-pin').fadeOut();\r\n                                        }\r\n                                    },300);\r\n                                }\r\n                                return (\r\n                                    <div key={index} id = {peerID} onClick = {()=>otherPin(peerID)} className = \"rvideo-surround other\">\r\n                                        <Video setSt = {(k)=>{setStre(us=>[...us,k])}} st = {retStre(peerID)} otherUnpin = {(e)=>{otherUnpin(e)}} id = {peerID} peer={peer} user = {user} className = \"rvideo\"/>  \r\n                                    </div> \r\n                                );\r\n                            }\r\n                        )\r\n                        :\r\n                        null}\r\n                    </div>\r\n                    \r\n                    <div className = \"vid-btn-holder\">\r\n                        <div className = \"vid vid-off crricon-surround\" onClick = {vidOn} ><i className=\"fas fa-video-slash icon\"></i></div>\r\n                        <div className = \"vid vid-on crricon-surround\" onClick = {vidOff}><i className=\"fas fa-video icon\"></i></div>\r\n                        <div className = \"drp-dwn\" onClick = {()=>changeVideo()}><i className=\"fas fa-caret-down\"></i></div>\r\n                    </div>\r\n                    <div className = \"aud-btn-holder\">\r\n                        <div className = \"aud aud-off crricon-surround\" onClick = {audOn}><i className=\"fas fa-microphone-slash icon\"></i></div>\r\n                        <div className = \"aud aud-on crricon-surround\" onClick = {audOff}><i className=\"fas fa-microphone icon\"></i></div>\r\n                        <div className = \"drp-dwn\" onClick = {()=>changeAudio()}><i className=\"fas fa-caret-down\"></i></div>\r\n                    </div>\r\n                </div>\r\n                </div>    \r\n            </div>\r\n\r\n            <div className = 'ricon-surround ch-open'>\r\n                <i className=\"fas fa-comment-alt ricon\"></i>\r\n                Chat\r\n            </div>\r\n            \r\n            <div className = 'ricon1-surround ch-close'>\r\n                <i className=\"fas fa-chevron-right ricon1\"></i>\r\n            </div>\r\n            <div className = 'rchat-holder'>\r\n                <Chat id = {video.user.user._id} chat = {chat} socket = {socketRef.current} />\r\n            </div>\r\n        </>\r\n    );\r\n};\r\nexport default Room;\r\n","const videoReducer = (state,action) =>{\r\n    switch(action.type){\r\n      case 'SET_VOICE':\r\n            return { ...state,voice:action.voice}\r\n      case 'SET_AUDOP':\r\n            return { ...state,voiceOp:action.voiceOp}\r\n      case 'SET_URL':\r\n          return {...state,url:action.url}\r\n      case 'SET_VIDEO':\r\n        return {...state,video:action.video}\r\n      case 'SET_ROOM':\r\n        return {...state,room:action.room}\r\n      case 'SET_NAME':\r\n        return {...state,name:action.name}\r\n      case 'SET_USER':\r\n        return {...state,user:action.user}\r\n      case 'SET_CUR':\r\n        return {...state,curV:action.curV,curA:action.curA}\r\n      case 'SET_OPTIONS':\r\n        return {...state,options:action.options}\r\n      case 'SET_VIDEO_URL':\r\n        return {...state,videoUrl:action.videoUrl}\r\n      case 'SET_EVERYTHING':\r\n        return {...state,voice:action.voice,voiceOp:action.voiceOp,video:action.video,room:action.room,\r\n                curV:action.curV,curA:action.curA,options:action.options,user:action.user  \r\n        }\r\n      default:\r\n        return state\r\n    }\r\n  }\r\n\r\n  export {videoReducer as default}","import React,{useContext} from 'react'\r\nimport videoContext from '../context/video-context'\r\nimport CreateRoom from './CreateRoom'\r\nconst SelectMedia = (props) =>{\r\n    const {video,dispatch} = useContext(videoContext)\r\n\r\n    const roomID = props.roomID;\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <CreateRoom {...props} roomID={roomID}/>\r\n        </React.Fragment>\r\n    );\r\n};\r\n\r\nexport default SelectMedia","import React from 'react'\r\nimport { Route ,Redirect} from 'react-router-dom'\r\nimport SelectMedia from '../routes/selectMedia'\r\nimport aes from 'crypto-js/aes'\r\nimport crypto from 'crypto-js'\r\n\r\n\r\nexport const CheckRouter = ({\r\n    alreadySet,\r\n    component : Component,\r\n    ...rest\r\n}) =>{\r\n        var k = (new URL(window.location.href)).pathname;\r\n        var roomID = k.replace('/room/','');\r\n        var def = aes.decrypt(roomID,'def');\r\n        var k = def.toString(crypto.enc.Utf8);\r\n\r\n        var RoomName = k.substr(k.indexOf(' ')+1);\r\n        // console.log(k.substr(k.indexOf(' ')+1));\r\n        if(RoomName == ''){\r\n            alert(\"Sorry No Such Rooms...\");\r\n            roomID = '';RoomName = '';\r\n            window.location.href = (new URL(window.location.href)).origin + '/create';\r\n        }\r\n    return (\r\n     <Route {...rest} component={(props) =>(\r\n            !!alreadySet ? (\r\n                <Component /> \r\n            ) : (\r\n                <SelectMedia roomID={roomID} RoomName = {RoomName} {...props}/>\r\n            )\r\n        )} />\r\n)\r\n}\r\n\r\nexport default CheckRouter","import React from 'react'\r\nimport './styles/login.css'\r\n\r\nconst Login = () => {\r\n    React.useEffect(()=>{\r\n        const script = document.createElement(\"script\");\r\n        script.src = \"/path/to/login.js\";\r\n        script.async = true;\r\n        document.body.appendChild(script);\r\n    },[]);\r\n    return(\r\n        <>\r\n            <div className = 'login-bg'>\r\n                <div className = \"wrong-message\">\r\n                    The Email or Password is incorrect\r\n                </div>\r\n                <div className = \"login\">\r\n                    <div className = \"caurosel\">\r\n                        <div className = \"caurosel-container\">\r\n                            <div className = \"temp\">\r\n                                <div className=\"temp-cover\">Create a Party</div>\r\n                                <div className=\"temp-cover\">Invite Your Friends</div>                            \r\n                            </div>\r\n                            <div className = \"temp\">\r\n                                <div className=\"temp-cover\">Share Your Video File</div>\r\n                                <div className=\"temp-cover\">Watch Along</div>\r\n                                \r\n                            </div>\r\n                            <div className = \"temp\">\r\n                                <div className=\"temp-cover\">Experience Endless Entertainment</div>\r\n                                \r\n                            </div>\r\n                        </div>\r\n                        <div className = \"changer\">\r\n                            <div className = \"ind-changer\" count = \"0\"/>\r\n                            <div className = \"ind-changer\" count = \"1\"/>\r\n                            <div className = \"ind-changer\" count = \"2\"/>\r\n                            <div className=\"ind-cover\"/>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"login-signup\">\r\n                        <div className=\"button\">\r\n                            <button id = \"login\">Login</button>\r\n                            <button id = \"signup\">Sign Up</button>\r\n                            {/* <div className = \"slider\"/> */}\r\n                        </div>\r\n                        <div className=\"lsmain\">\r\n                            <div className=\"l\">\r\n                                <div className = \"circle-temp\"/>\r\n                                <div className = \"circle-temp1\"/>    \r\n                                <div className = \"circle-temp2\"/>    \r\n                                <div className = \"underline\">\r\n                                    <span className=\"icon-surround\">\r\n                                        <i className = \"fas fa-user icon\" ></i>\r\n                                    </span>\r\n                                    <input required type = 'email' id = 'lemail' placeholder=\"Your Email\"/>\r\n                                </div>\r\n                                <div className = \"underline\">\r\n                                    <span className=\"icon-surround\">\r\n                                        <i className = \"fas fa-unlock icon\" ></i>\r\n                                    </span>\r\n                                    <input required type = 'password' id = \"lpass\" placeholder=\"Your Password\"/>\r\n                                    <i className=\"fas fa-eye icon3\"></i>\r\n                                    <i className=\"fas fa-eye-slash icon3\" ></i>\r\n                                </div>\r\n                                <div className = \"submit lsub\">Sign In</div>\r\n                            </div>\r\n                            <div className=\"s\">\r\n                                <div className = \"circle-temp\"/>\r\n                                <div className = \"circle-temp1\"/>    \r\n                                <div className = \"circle-temp2\"/>     \r\n                                <div className = \"underline\">\r\n                                    <span className=\"icon-surround\">\r\n                                        <i className = \"fas fa-user icon\" ></i>\r\n                                    </span>\r\n                                    <input type = 'text'  spellCheck=\"false\" required id = 'user' placeholder=\"Your Username\"/>\r\n                                    <i className=\"fas fa-check-circle icon1\"></i>\r\n                                    <i className=\"fas fa-times-circle icon2\"></i><span className=\"tool-tip\">Username must be atleast 5 characters</span>\r\n                                </div>\r\n                                <div className = \"underline\">\r\n                                    <span className=\"icon-surround\">\r\n                                        <i className=\"fas fa-envelope-open-text icon\"></i>\r\n                                    </span>\r\n                                    <input type = 'email' spellCheck=\"false\" required  id = 'email' placeholder=\"Your Email\"/>\r\n                                    <i className=\"fas fa-check-circle icon1\"></i>\r\n                                    <i className=\"fas fa-times-circle icon2\"></i><span className=\"tool-tip\">Please enter a valid Email Id</span>\r\n                                </div>\r\n                                <div className = \"underline\">\r\n                                    <span className=\"icon-surround\">\r\n                                        <i className = \"fas fa-unlock icon\" ></i>\r\n                                    </span>\r\n                                    <input required type = 'password' id = 'pass' placeholder=\"Your Password\"/>\r\n                                    <i className=\"fas fa-eye icon3\"></i>\r\n                                    <i className=\"fas fa-eye-slash icon3\"></i>\r\n                                    <i className=\"fas fa-check-circle icon1\"></i>\r\n                                    <i className=\"fas fa-times-circle icon2\"></i><span className=\"tool-tip\">Password must be atleast 8 Characters</span>\r\n                                </div>\r\n                                <div className = \"underline\">\r\n                                    <span className=\"icon-surround\">\r\n                                        <i className=\"fas fa-key icon\"></i>\r\n                                    </span>\r\n                                    <input required type = 'password' id = 'cpass' placeholder=\"Confirm Your Password\"/>\r\n                                    <i className=\"fas fa-eye icon3\"></i>\r\n                                    <i className=\"fas fa-eye-slash icon3\"></i>\r\n                                    <i className=\"fas fa-check-circle icon1\"></i>\r\n                                    <i className=\"fas fa-times-circle icon2\"></i><span className=\"tool-tip\">Passwords doesn't match</span>\r\n                                </div>\r\n                                <div className = \"submit ssub\">Sign Up</div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                \r\n                </div>\r\n                \r\n            </div>\r\n        </>\r\n    )\r\n}\r\nexport {Login as default}","import React, { useReducer } from 'react';\nimport { BrowserRouter, Route, Switch } from \"react-router-dom\";\nimport CreateRoom from \"./routes/CreateRoom\";\nimport Room from \"./routes/Room\";\nimport videoContext from './context/video-context'\nimport videoReducer from './reducers/video'\nimport CheckRouter from './routers/voiceCheckRouter'\nimport SelectMedia from './routes/selectMedia'\nimport Login from './routes/Login'\nimport axios from 'axios';\n\n\nfunction App() {\n  const [video,dispatch] = useReducer(videoReducer,[])\n  \n  React.useEffect(()=>{\n    var e_cookie = localStorage.getItem('id');\n    var url = window.location.href;  \n    url = new URL(url)\n    if(!e_cookie){\n      if(url.pathname == '/login')return;\n      window.redirect = url.pathname == '/'?'/create':url.pathname;\n      window.location.href = url.origin + '/login?redirect='+window.redirect;\n    }\n    else{\n      if(!video.user){\n        axios.get('https://watch-party-latest.herokuapp.com/users/me',{\n          headers: {\n            Authorization: 'Bearer ' + localStorage.getItem('vid-token') \n          }\n        }).then((res)=>{\n          dispatch({\n            type:'SET_USER',\n            user:{...res.data,token:localStorage.getItem('vid-token')}\n          })\n        })\n      }\n      if(url.pathname == '/create')return;\n      if(url.pathname != '/login'&& url.pathname != '/'){\n        return;\n      }\n      window.location.href = url.origin + '/create';\n    }\n  },[])\n  return (\n    <videoContext.Provider value={{video,dispatch}}>\n      <BrowserRouter>\n        <Switch>\n          <Route path = '/login' component = {Login}/>\n          <Route path = \"/create\" exact component = {CreateRoom} />\n          <Route path = \"/selectMedia\" component = {SelectMedia} />\n          <CheckRouter path = \"/room/:roomID\" component = {Room} alreadySet = {!!video.room} />\n        </Switch>\n      </BrowserRouter>\n    </videoContext.Provider>\n  );\n  \n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport * as serviceWorker from './serviceWorker';\nimport App from './App'\nReactDOM.render(\n  <React.StrictMode>\n    <App/>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}