(this["webpackJsonpshort-film"]=this["webpackJsonpshort-film"]||[]).push([[0],{165:function(e,a,t){},176:function(e,a,t){e.exports=t(357)},181:function(e,a,t){},183:function(e,a,t){},188:function(e,a){},190:function(e,a){},201:function(e,a){},203:function(e,a){},230:function(e,a){},232:function(e,a){},233:function(e,a){},239:function(e,a){},241:function(e,a){},259:function(e,a){},262:function(e,a){},278:function(e,a){},281:function(e,a){},326:function(e,a,t){},327:function(e,a,t){},328:function(e,a,t){},329:function(e,a,t){},356:function(e,a,t){},357:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(169),l=t.n(c);t(181),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var i=t(5),o=t(7),s=t(90),m=t(6),d=t(41),u=t.n(d),v=t(65),p=r.a.createContext(),f=(t(183),t(1)),E=t.n(f),h=t(53),g=t.n(h),N=t(12),b=t.n(N),w={height:"100%",width:"100%"},y=function(e){var a=Object(n.useContext)(p),t=a.video,c=a.dispatch,l=Object(n.useRef)(),s=e.roomID?"Join Room":"Create Room",m='<div  id="audioDevice" class = "drp-dwn-box"><div class = "set-prelim">INPUT DEVICES</div>',d='<div  id="videoDevice" class = "drp-dwn-box"><div class = "set-prelim">VIDEO DEVICES</div>',f='<div class = "set-prelim">OUTPUT DEVICES</div>',h=0,N=0,y=!1,k=!1,O=!1,j=!1,x=Object(n.useState)([]),I=Object(o.a)(x,2),C=I[0],S=I[1];navigator.mediaDevices.enumerateDevices().then((function(e){E()(".vid-on,.aud-on").fadeOut(),e.forEach((function(e){"audioinput"===e.kind?""!=e.label?(O=!0,0==h&&(y=e.deviceId),h+=1,E()(".aud-off").fadeOut(300),E()(".aud-on").fadeIn(300),m+='<div class="options aud-opt" value="'+e.deviceId+'">'+e.label+"</i></div>"):m+='<div class="options" >Default</i></div>':"audiooutput"===e.kind?""!=e.label?f+='<div class="options aud-op-opt" value="'+e.deviceId+'">'+e.label+"</i></div>":f+='<div class="options" >Default</i></div>':"videoinput"===e.kind&&(""!=e.label?(0==N&&(k=e.deviceId),j=!0,N+=1,E()(".vid-off").fadeOut(300),E()(".vid-on").fadeIn(300),d+='<div class="options vid-opt" value="'+e.deviceId+'">'+e.label+"</i></div>"):d+='<div class="options" >Default</i></div>')})),navigator.mediaDevices.getUserMedia({video:!!k&&{deviceId:{exact:k}},audio:!!y&&{deviceId:{exact:y}}}).then((function(e){l.current&&(l.current.srcObject=e)})).catch((function(e){console.log(e.message)})),m+=f+"</div>",d+="</div>"})),Object(n.useEffect)((function(){console.log("local storage : ",localStorage.getItem("vid-token"),localStorage.getItem("id")),b.a.get("https://watch-party-latest.herokuapp.com/room/me",{headers:{Authorization:"Bearer "+localStorage.getItem("vid-token")}}).then((function(e){S(e.data)})).catch((function(e){console.log(e)}))}),[]);var D=function(e){E()(".crwrong-text").html('Room - <span class = "error-room">'+e+"</span> has already been created"),E()(".crwrong-message").css({left:"2%",transform:"scale(1.0)"}),setTimeout((function(){E()(".crwrong-message").css({left:"-50%",transform:"scale(0.5)"})}),5e3)};function M(a){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e.roomID||""!=E()(".join-room").val().trim()){var r;if(e.roomID)r=e.roomID,b.a.post("https://watch-party-latest.herokuapp.com/room/add",{id:t.user.user._id,roomId:e.roomID}).then((function(e){if("NA"==e.data.status&&0==n)return E()(".crwrong-text").text("You have already joined"),E()(".crwrong-message").css({left:"2%",transform:"scale(1.0)"}),void setTimeout((function(){E()(".wanna-join").css({top:"5%",transform:"scale(1.0)"}),E()(".crwrong-message").css({left:"-50%",transform:"scale(0.5)"})}),4010);T(r)})).catch((function(e){console.log(e)}));else{var c=E()(".join-room").val().trim(),l=g.a.encrypt(t.user.user._id+" "+c,"def");r=l.toString(),b.a.post("https://watch-party-latest.herokuapp.com/room/create",{roomId:r,name:c},{headers:{Authorization:"Bearer "+t.user.token}}).then((function(e){T(r)})).catch((function(e){D(c)}))}a.preventDefault()}}function T(e){c({type:"SET_EVERYTHING",voice:y,voiceOp:y,curA:O,curV:j,video:k,options:{audio:m,video:d},room:!0,user:Object(i.a)(Object(i.a)({},t.user),{},{room:e})}),window.user=Object(i.a)(Object(i.a)({},t.user),{},{room:e})}var R=function(e){return l.current.srcObject.getTracks().map(function(){var a=Object(v.a)(u.a.mark((function a(t){return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t.kind!=e){a.next=3;break}return a.next=3,t.stop();case 3:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())};function U(e,a){return e=Math.ceil(e),a=Math.floor(a),Math.floor(Math.random()*(a-e)+e)}function _(){var e=[U(10,250),U(50,250),U(10,250)],a=U(0,3),t=e[a];return e[a]=e[1],e[1]=t,"rgb("+e[0]+","+e[1]+","+e[2]+")"}function L(e){var a,t=(e=e.toUpperCase()).split(" ");return 1==t.length?(t=t[0])[0]:(a=t[0],t=t[1],a[0]+t[0])}var P=function(a){var t=new URL(window.location.href);a!=e.roomID&&(window.location.href=t.origin+"/room/"+a)};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"wanna-join",onClick:function(e){return M(e,1)}},"Join",r.a.createElement("br",null),"Anyway"),r.a.createElement("div",{className:"my-rooms-btn",onClick:function(){return function(){if("rgb(25, 175, 40)"==E()(".my-rooms-btn").css("backgroundColor"))return E()(".available-rooms").css({transform:"translateX(-102%)"}),E()(".my-rooms-btn").css({backgroundColor:"rgb(175,20,20)"}),void E()(".video-surround").css({left:"10%"});E()(".available-rooms").css({transform:"translateX(0%)"}),E()(".my-rooms-btn").css({backgroundColor:"rgb(25,175,40)"}),E()(".video-surround").css({left:"20.5%"})}()}},r.a.createElement("i",{className:"fas fa-wine-glass-alt crlicon"})),r.a.createElement("div",{className:"available-rooms"},r.a.createElement("div",{className:"cr-mem-prelim"},"Rooms Created (",C.created?C.created.length:0,")"),C.created&&C.created.map((function(e,a){return r.a.createElement("div",{key:a,className:"cr-room",onClick:function(){return P(e.id)}},r.a.createElement("div",{style:{background:_()},className:"crimg-prof1"},L(e.name)),e.name)})),r.a.createElement("div",{className:"cr-mem-prelim"},"Other Rooms (",C.member?C.member.length:0,")"),C.member&&C.member.map((function(e,a){return r.a.createElement("div",{key:a,className:"cr-room",onClick:function(){return P(e.id)}},r.a.createElement("div",{style:{background:_()},className:"crimg-prof1"},L(e.name)),e.name)}))),r.a.createElement("div",{className:"create-room-heading"},e.roomID?"Join":"Create"," Room"),r.a.createElement("div",{className:"video-surround"},r.a.createElement("video",{muted:!0,ref:l,autoPlay:!0,playsInline:!0,className:"crvideo"}),r.a.createElement("div",{className:"vid vid-off cricon-surround",onClick:function(){navigator.mediaDevices.getUserMedia({video:{deviceId:{exact:k},videoConstraints:w},audio:!!O&&{deviceId:{exact:y}}}).then((function(e){l.current&&(l.current.srcObject=e),E()(".vid-off").fadeOut(1e3),E()(".vid-on").fadeIn(1e3)})).catch((function(e){alert("Permission Denied")})),j=!0}},r.a.createElement("i",{className:"fas fa-video-slash icon"})),r.a.createElement("div",{className:"vid vid-on cricon-surround",onClick:function(){R("video"),j=!1,l.current.pause(),E()(".vid-on").fadeOut(1e3),E()(".vid-off").fadeIn(1e3)}},r.a.createElement("i",{className:"fas fa-video icon"})),r.a.createElement("div",{className:"aud aud-off cricon-surround",onClick:function(){navigator.mediaDevices.getUserMedia({video:!!j&&{deviceId:{exact:k},videoConstraints:w},audio:{deviceId:{exact:y}}}).then((function(e){l.current&&(l.current.srcObject=e),E()(".aud-off").fadeOut(1e3),E()(".aud-on").fadeIn(1e3)})).catch((function(e){alert("Permission Denied")})),O=!0}},r.a.createElement("i",{className:"fas fa-microphone-slash icon"})),r.a.createElement("div",{className:"aud aud-on cricon-surround",onClick:function(){R("audio"),O=!1,E()(".aud-on").fadeOut(1e3),E()(".aud-off").fadeIn(1e3)}},r.a.createElement("i",{className:"fas fa-microphone icon"}))),r.a.createElement("div",{className:"crwrong-message"},r.a.createElement("i",{className:"fas fa-times-circle"}),r.a.createElement("span",{className:"crwrong-text"})),r.a.createElement("div",{style:{right:e.roomID?"40px":"70px"},className:"crl"},r.a.createElement("div",{className:"circle-temp"}),r.a.createElement("div",{className:"circle-temp1"}),r.a.createElement("div",{className:"circle-temp2"}),e.roomID?r.a.createElement("div",{className:"room-name"},e.RoomName):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"room-name"}),r.a.createElement("div",{className:"crlunderline"},r.a.createElement("span",{className:"crlicon-surround"},r.a.createElement("i",{className:"fas fa-wine-glass-alt crlicon"})),r.a.createElement("input",{onChange:function(e){return""==E()(".join-room").val()?E()(".crlunderline").css({top:"40%"}):E()(".crlunderline").css({top:"21.5%"}),void E()(".room-name").text(E()(".join-room").val())},type:"text",className:"join-room",placeholder:"Room Name"}))),r.a.createElement("button",{className:"crbtn",onClick:M},s)),e.roomID&&r.a.createElement("button",{className:"crbtn createbtn",onClick:function(){window.location.href=new URL(window.location.href).origin+"/create/"}},"Create a Room"))},k=t(19),O=t(170),j=t.n(O),x=t(42),I=t.n(x),C=(t(326),t(327),function(e){var a=e.addVideo;return window.addVideo=a,Object(n.useEffect)((function(){var e=document.createElement("script");e.src="/path/to/videoUpload.js",e.async=!0,document.body.appendChild(e)}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"circle-temp2"}),r.a.createElement("div",{className:"egg-temp"},"Video",r.a.createElement("br",null),"Upload"),r.a.createElement("div",{className:"circle-temp1"}),r.a.createElement("div",{className:"circle-temp3"}),r.a.createElement("div",{className:"circle-temp4"}),r.a.createElement("input",{type:"text",className:"video-name",required:!0,placeholder:"Video Name*"}),r.a.createElement("textarea",{rows:"10",className:"video-desc",placeholder:"Video Description"}),r.a.createElement("div",{className:"file1"},r.a.createElement("input",{id:"imgfile",type:"file",className:"innercircle1"}),r.a.createElement("i",{className:"fas fa-image"})),r.a.createElement("div",{className:"holder"},r.a.createElement("div",{className:"ano-holder"},r.a.createElement("svg",{className:"progress-ring",width:"120",height:"120"},r.a.createElement("circle",{className:"progress-ring__circle",stroke:"rgb(3,240,250)",strokeWidth:"4",fill:"transparent",r:"53.2",cx:"60",cy:"60"})),r.a.createElement("input",{name:"file",id:"vidfile",type:"file",className:"cloudinary-fileupload innercircle"}),r.a.createElement("i",{className:"fas fa-upload k-vid-upload"}),r.a.createElement("i",{className:"fas fa-check"}))),r.a.createElement("div",{className:"filename_holder"},r.a.createElement("div",{className:"heading"},"Poster"),r.a.createElement("div",{className:"poster"}),r.a.createElement("div",{className:"heading"},"Video"),r.a.createElement("div",{className:"videoflname"})),r.a.createElement("div",{className:"cloudSubmit"},r.a.createElement("i",{className:"fas fa-arrow-right"})),r.a.createElement("div",{className:"cloudCancel"},r.a.createElement("i",{className:"fas fa-times-circle cancelreq"})),r.a.createElement("div",{className:"message"}),r.a.createElement("div",{className:"wr-message"}))}),S=(t(328),t(43)),D=t.n(S),M=function(e){var a=e.chat,t=e.id,n=e.socket;function c(e){return e/10<1?"0"+e:e}function l(e,a){return e=Math.ceil(e),a=Math.floor(a),Math.floor(Math.random()*(a-e)+e)}r.a.useEffect((function(){if(n){var e=document.createElement("script");e.src="/path/to/chat.js",e.async=!0,document.body.appendChild(e)}}),[n]);var i={root:document.querySelector("ch-o-bt"),rootMargin:"0px",threshold:[.1]};var o=new IntersectionObserver((function(e,a){e.forEach((function(e){e.intersectionRatio>.1?E()(e.target).css({transform:" translateX(0%)"}):E()(e.target).hasClass("message-mine")?E()(e.target).css({transform:" translateX(50%)"}):E()(e.target).css({transform:" translateX(-50%)"})}))}),i);function s(e,a){var t=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()),n=Date.UTC(a.getFullYear(),a.getMonth(),a.getDate());return Math.abs(Math.floor((n-t)/864e5))}var m=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"chat-window"},r.a.createElement("div",{className:"chat-title"},"Chat Room",r.a.createElement("i",{className:"far fa-comment-alt"})),r.a.createElement("div",{className:"chat-output"},r.a.createElement("div",{className:"chat-loader-surround"},r.a.createElement("div",{className:"chat-loader"})),r.a.createElement("div",{className:"ch-o-bt"},a.length>0?a.map((function(e,n){var i=!1,d="";if(0!=n?s(new Date(e.createdAt),new Date(a[n-1].createdAt))>0&&(i=!0):i=!0,1==i&&(d=function(e){var a=s(new Date(e),new Date);return 0==a?"Today":1==a?"Yesterday":a<=6&&a>=2?m[new Date(e).getDay()]:D()(e).format("YYYY , D MMM ")}(e.createdAt)),n==a.length-1&&setTimeout((function(){E()(".message-mine").each((function(e){o.observe(this)})),E()(".message-other").each((function(e){o.observe(this)})),E()(".ch-o-bt")[E()(".ch-o-bt").length-1].scrollTop=E()(".ch-o-bt")[E()(".ch-o-bt").length-1].scrollHeight}),100),"no chat"==e)return null;E()(".chat-loader-surround").css({top:"0%"}),E()(".chat-loader").css({animation:"none"});var u=function(){var e=[l(10,250),l(50,250),l(10,250)],a=l(0,3),t=e[a];return e[a]=e[1],e[1]=t,"rgb("+e[0]+","+e[1]+","+e[2]+")"}(),v=new Date(e.createdAt);return t==e.ownedBy?r.a.createElement("span",{key:e._id},""!=d&&r.a.createElement("div",{className:"chat-date"},d),r.a.createElement("div",{className:"message-mine"},e.message,r.a.createElement("div",{className:"message-time"},c(v.getHours()),":",c(v.getMinutes())))):r.a.createElement("span",{key:e._id},""!=d&&r.a.createElement("div",{className:"chat-date"},d),r.a.createElement("div",{key:e._id,className:"message-other"},r.a.createElement("div",{className:"message-owner",style:{color:u}},e.owner),e.message,r.a.createElement("div",{className:"message-time"},c(v.getHours()),":",c(v.getMinutes()))))})):null)),r.a.createElement("div",{className:"chat-input"},r.a.createElement("div",{className:"inp-surround"},r.a.createElement("textarea",{rows:"1",placeholder:"Type a Message...",id:"inp"})),r.a.createElement("div",{className:"chat-send"},r.a.createElement("i",{className:"fas fa-pen-nib"})))))},T=(t(329),t(165),function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{scrollbarWidth:"none"},className:"chat-window"},r.a.createElement("div",{style:{scrollbarWidth:"none"},className:"chat-output"},r.a.createElement("div",{style:{bottom:"6%",scrollbarWidth:"none"},className:"ch-o-bt"}))))}),R=function(e){var a=e.vid;e.stream;console.log(a);var t=a.video.video,n=a.video.poster,c="url("+(n||"https://raw.githubusercontent.com/Ahmetaksungur/twitter-video-player-clone/master/92456705_506989316849451_7379405183454806542_n.jpg")+")";return r.a.useEffect((function(){var e=document.createElement("script");e.src="/path/to/twivid.js",e.async=!0,document.body.appendChild(e)}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"video vid-url-play"},r.a.createElement("div",{className:"vchat-holder"},r.a.createElement(T,null)),r.a.createElement("div",{className:"video-preview",style:{backgroundImage:c}},r.a.createElement("button",{className:"video-start-btn"},r.a.createElement("svg",{width:"50",height:"50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},r.a.createElement("path",{d:"M256,0C114.833,0,0,114.844,0,256s114.833,256,256,256s256-114.844,256-256S397.167,0,256,0z M357.771,264.969\r l-149.333,96c-1.75,1.135-3.771,1.698-5.771,1.698c-1.75,0-3.521-0.438-5.104-1.302C194.125,359.49,192,355.906,192,352V160\r c0-3.906,2.125-7.49,5.563-9.365c3.375-1.854,7.604-1.74,10.875,0.396l149.333,96c3.042,1.958,4.896,5.344,4.896,8.969\r S360.813,263.01,357.771,264.969z",elevation:"2"})))),r.a.createElement("div",{className:"video-top"}),r.a.createElement("div",{className:"anim play-anim"},r.a.createElement("img",{className:"anim-img",src:"/static-img/play.png",alt:"as",width:"20",height:"20"})),r.a.createElement("div",{className:"video-loading"},r.a.createElement("div",{className:"video-loading-spinner"})),r.a.createElement("div",{className:"video-reset"},r.a.createElement("button",{className:"video-reset-btn"},"Watch again")),r.a.createElement("div",{className:"video-incoming"},r.a.createElement("h3",{className:"grad-text"},r.a.createElement("span",null,"S"),r.a.createElement("span",null,"o"),r.a.createElement("span",null,"m"),r.a.createElement("span",null,"e"),r.a.createElement("span",null,"o"),r.a.createElement("span",null,"n"),r.a.createElement("span",null,"e"),r.a.createElement("span",null," "),r.a.createElement("span",null,"I"),r.a.createElement("span",null,"s"),r.a.createElement("span",null," "),r.a.createElement("span",null,"A"),r.a.createElement("span",null,"b"),r.a.createElement("span",null,"o"),r.a.createElement("span",null,"u"),r.a.createElement("span",null,"t"),r.a.createElement("span",null," "),r.a.createElement("span",null,"T"),r.a.createElement("span",null,"o"),r.a.createElement("span",null," "),r.a.createElement("span",null,"J"),r.a.createElement("span",null,"o"),r.a.createElement("span",null,"i"),r.a.createElement("span",null,"n"),r.a.createElement("span",null,"."),r.a.createElement("span",null,"."),r.a.createElement("span",null,".")),r.a.createElement("h3",{className:"grad-text reflex"},r.a.createElement("span",null,"S"),r.a.createElement("span",null,"o"),r.a.createElement("span",null,"m"),r.a.createElement("span",null,"e"),r.a.createElement("span",null,"o"),r.a.createElement("span",null,"n"),r.a.createElement("span",null,"e"),r.a.createElement("span",null," "),r.a.createElement("span",null,"I"),r.a.createElement("span",null,"s"),r.a.createElement("span",null," "),r.a.createElement("span",null,"A"),r.a.createElement("span",null,"b"),r.a.createElement("span",null,"o"),r.a.createElement("span",null,"u"),r.a.createElement("span",null,"t"),r.a.createElement("span",null," "),r.a.createElement("span",null,"T"),r.a.createElement("span",null,"o"),r.a.createElement("span",null," "),r.a.createElement("span",null,"J"),r.a.createElement("span",null,"o"),r.a.createElement("span",null,"i"),r.a.createElement("span",null,"n"),r.a.createElement("span",null,"."),r.a.createElement("span",null,"."),r.a.createElement("span",null,".")),r.a.createElement("h3",{className:"grad-text"},r.a.createElement("span",null,"P"),r.a.createElement("span",null,"l"),r.a.createElement("span",null,"e"),r.a.createElement("span",null,"a"),r.a.createElement("span",null,"s"),r.a.createElement("span",null,"e"),r.a.createElement("span",null," "),r.a.createElement("span",null,"W"),r.a.createElement("span",null,"a"),r.a.createElement("span",null,"i"),r.a.createElement("span",null,"t")),r.a.createElement("h3",{className:"grad-text reflex"},r.a.createElement("span",null,"P"),r.a.createElement("span",null,"l"),r.a.createElement("span",null,"e"),r.a.createElement("span",null,"a"),r.a.createElement("span",null,"s"),r.a.createElement("span",null,"e"),r.a.createElement("span",null," "),r.a.createElement("span",null,"W"),r.a.createElement("span",null,"a"),r.a.createElement("span",null,"i"),r.a.createElement("span",null,"t"))),r.a.createElement("div",{className:"video-player-controls"},r.a.createElement("div",{className:"video-slider"},r.a.createElement("div",{className:"video-slider-tooltip"},"hi"),r.a.createElement("div",{className:"video-slider-container"},r.a.createElement("div",{className:"video-slider-bg"},r.a.createElement("div",{className:"video-slider-buffered"}),r.a.createElement("div",{className:"video-slider-rail"}),r.a.createElement("div",{className:"video-slider-buffer"})))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"wrap"},r.a.createElement("div",{className:"video-control"},r.a.createElement("button",{className:"video-control-btn"},r.a.createElement("svg",{className:"video-control-play",viewBox:"0 0 24 24",width:"24",height:"24",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",shapeRendering:"geometricPrecision"},r.a.createElement("polygon",{points:"5 3 19 12 5 21 5 3",fill:"currentColor"})),r.a.createElement("svg",{className:"video-control-pause",viewBox:"0 0 24 24",width:"24",height:"24",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",shapeRendering:"geometricPrecision"},r.a.createElement("rect",{x:"6",y:"4",width:"4",height:"16",fill:"currentColor"}),r.a.createElement("rect",{x:"14",y:"4",width:"4",height:"16",fill:"currentColor"})))),r.a.createElement("div",{className:"video-counts"},r.a.createElement("span",{className:"video-count-time"},"0:00"),r.a.createElement("span",{className:"video-count-line"},"/"),r.a.createElement("span",{className:"video-count-fulltime"},"0:00"))),r.a.createElement("div",{className:"wrap"},r.a.createElement("div",{className:"video-chat"},r.a.createElement("img",{id:"chat-on",src:"/static-img/chat_white.png",alt:"pip",width:"24",height:"24"}),r.a.createElement("img",{id:"chat-off",src:"/static-img/chat_off.png",alt:"pip",width:"24",height:"24"})),r.a.createElement("div",{className:"video-voice"},r.a.createElement("div",{className:"video-voice-slider"},r.a.createElement("div",{className:"video-voice-slider-rail",role:"slider","aria-valuemax":"1","aria-valuemin":"0","aria-valuenow":"1"},r.a.createElement("div",{className:"video-voice-slider-buffer"}),r.a.createElement("input",{className:"video-voice-slider-range",type:"range",min:"0",max:"1",defaultValue:"1",step:"0.01"}))),r.a.createElement("button",{className:"video-voice-btn"},r.a.createElement("svg",{className:"video-voice-on",viewBox:"0 0 24 24",width:"24",height:"24",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",shapeRendering:"geometricPrecision"},r.a.createElement("path",{d:"M11 5L6 9H2v6h4l5 4V5z"}),r.a.createElement("path",{d:"M19.07 4.93a10 10 0 010 14.14M15.54 8.46a5 5 0 010 7.07"})),r.a.createElement("svg",{className:"video-voice-off",viewBox:"0 0 24 24",width:"24",height:"24",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",shapeRendering:"geometricPrecision"},r.a.createElement("path",{d:"M11 5L6 9H2v6h4l5 4V5z"}),r.a.createElement("path",{d:"M23 9l-6 6"}),r.a.createElement("path",{d:"M17 9l6 6"})))),r.a.createElement("div",{className:"video-playback-rate"},r.a.createElement("div",{className:"video-playback-box"},r.a.createElement("div",{className:"video-playback"},"0.25"),r.a.createElement("div",{className:"video-playback"},"0.50"),r.a.createElement("div",{className:"video-playback"},"0.75"),r.a.createElement("div",{className:"video-playback"},"Normal"),r.a.createElement("div",{className:"video-playback"},"1.25"),r.a.createElement("div",{className:"video-playback"},"1.50"),r.a.createElement("div",{className:"video-playback"},"1.75"),r.a.createElement("div",{className:"video-playback"},"2.0")),r.a.createElement("div",{className:"video-playback-speed"},"Normal")),r.a.createElement("div",{className:"video-pip",disabled:!0},r.a.createElement("img",{src:"/static-img/pip_white.png",alt:"pip",width:"24",height:"24"})),r.a.createElement("div",{className:"full-screen"},r.a.createElement("button",{className:"full-screen-btn"},r.a.createElement("svg",{className:"full-screen-open",viewBox:"0 0 24 24",width:"24",height:"24",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",shapeRendering:"geometricPrecision"},r.a.createElement("path",{d:"M15 3h6v6"}),r.a.createElement("path",{d:"M9 21H3v-6"}),r.a.createElement("path",{d:"M21 3l-7 7"}),r.a.createElement("path",{d:"M3 21l7-7"})),r.a.createElement("svg",{className:"full-screen-exit",viewBox:"0 0 24 24",width:"24",height:"24",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",shapeRendering:"geometricPrecision"},r.a.createElement("path",{d:"M4 14h6v6"}),r.a.createElement("path",{d:"M20 10h-6V4"}),r.a.createElement("path",{d:"M14 10l7-7"}),r.a.createElement("path",{d:"M3 21l7-7"}))))))),r.a.createElement("div",{className:"video-player"},r.a.createElement("video",{poster:n,tabIndex:"-1",datavideo:"",preload:"auto",controlsList:"nodownload",crossOrigin:"anonymous"},r.a.createElement("source",{def:t,id:"org-video-src",src:t,type:"video/mp4"})))),r.a.createElement("canvas",{id:"canvas"}))},U=t(171),_=t.n(U),L=t(172),P=t.n(L),V=function(e){var a=e.videosList,t=e.videosList1,c=e.viewVideo;return D.a.extend(_.a),D.a.extend(P.a),Object(n.useEffect)((function(){setTimeout((function(){console.log("set Time out running");var e=document.createElement("script");e.src="/path/to/videoList.js",e.async=!0,document.body.appendChild(e)}),300)}),[]),r.a.createElement("div",{className:"video-container"},r.a.createElement("div",{className:"video-caurosel"},r.a.createElement("div",{className:"circle-temp"}),r.a.createElement("div",{className:"circle-temp1"}),r.a.createElement("div",{className:"circle-temp3"}),r.a.createElement("div",{className:"circle-temp4"}),0!=t.length?r.a.createElement("div",{style:{width:"100%",height:"100%",postion:"absolute",top:"0",left:"0"}},r.a.createElement("div",{className:"vid-caurosel-mover",style:{width:100*t.length+"%",display:"flex",flexDirection:"row",alignItems:"center",height:"100%"}},0!=t.length&&t.map((function(e,a){a==t.length-1&&setTimeout((function(){var e=E()(".video-caurosel").width();E()(".indv-caurosel").css({width:.8*e+"px",marginLeft:.1*e,marginRight:.1*e}),E()(".caurosel-name").css({opacity:1})}),500);var n='url("'+e.video.poster+'")';return r.a.createElement("div",{onClick:function(){return c(e)},style:{backgroundImage:n},key:a,className:"indv-caurosel"},r.a.createElement("div",{className:"caurosel-name"},e.video.name))})))):null,r.a.createElement("div",{className:"prev-caurosel"},r.a.createElement("i",{className:"fas fa-chevron-left"})),r.a.createElement("div",{className:"next-caurosel"},r.a.createElement("i",{className:"fas fa-chevron-right"}))),0!=a.length&&a.map((function(e,a){return r.a.createElement("div",{key:a,className:"single-video",onClick:function(){return c(e)}},r.a.createElement("div",{className:"circle-temp"}),r.a.createElement("div",{className:"circle-temp1"}),r.a.createElement("div",{className:"circle-temp2"}),r.a.createElement("div",{className:"sin-vid-poster"},r.a.createElement("img",{src:e.video.poster,width:"373",height:"250"})),r.a.createElement("div",{className:"vvideo-name"},e.video.name),r.a.createElement("div",{className:"vvideo-info-holder"},r.a.createElement("div",{className:"vvideo-views"},"12 views"),r.a.createElement("div",{className:"vvideo-owner"},r.a.createElement("div",{className:"img-prof2"},function(e){var a,t=(e=e.toUpperCase()).split(" ");return 1==t.length?(t=t[0])[0]:(a=t[0],t=t[1],a[0]+t[0])}(e.user.username)),e.user.username.replace(/\w\S*/g,(function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}))),r.a.createElement("div",{className:"vvideo-created"},D()(e.video.createdAt).fromNow())))})))},A=function(e){var a=e.vid,t=e.stream;console.log("video stream , Video File :",t,window.fileOwner);var n=a;"copy"==a&&(n="",setTimeout((function(){E()("video")[0].srcObject=t}),400));return r.a.useEffect((function(){var e=document.createElement("script");e.src="/path/to/twividFile.js",e.async=!0,document.body.appendChild(e)}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"video vid-file-main"},r.a.createElement("div",{className:"vchat-holder"},r.a.createElement(T,null)),r.a.createElement("div",{className:"video-preview",style:{backgroundImage:"https://raw.githubusercontent.com/Ahmetaksungur/twitter-video-player-clone/master/92456705_506989316849451_7379405183454806542_n.jpg"}},r.a.createElement("button",{className:"video-start-btn"},r.a.createElement("svg",{width:"50",height:"50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},r.a.createElement("path",{d:"M256,0C114.833,0,0,114.844,0,256s114.833,256,256,256s256-114.844,256-256S397.167,0,256,0z M357.771,264.969\r l-149.333,96c-1.75,1.135-3.771,1.698-5.771,1.698c-1.75,0-3.521-0.438-5.104-1.302C194.125,359.49,192,355.906,192,352V160\r c0-3.906,2.125-7.49,5.563-9.365c3.375-1.854,7.604-1.74,10.875,0.396l149.333,96c3.042,1.958,4.896,5.344,4.896,8.969\r S360.813,263.01,357.771,264.969z",elevation:"2"})))),r.a.createElement("div",{className:"video-top"}),r.a.createElement("div",{className:"anim play-anim"},r.a.createElement("img",{className:"anim-img",src:"/static-img/play.png",alt:"as",width:"20",height:"20"})),r.a.createElement("div",{className:"video-loading"},r.a.createElement("div",{className:"video-loading-spinner"})),r.a.createElement("div",{className:"video-reset"},r.a.createElement("button",{className:"video-reset-btn"},"Watch again")),r.a.createElement("div",{className:"video-incoming"},r.a.createElement("h3",{className:"grad-text"},r.a.createElement("span",null,"S"),r.a.createElement("span",null,"o"),r.a.createElement("span",null,"m"),r.a.createElement("span",null,"e"),r.a.createElement("span",null,"o"),r.a.createElement("span",null,"n"),r.a.createElement("span",null,"e"),r.a.createElement("span",null," "),r.a.createElement("span",null,"I"),r.a.createElement("span",null,"s"),r.a.createElement("span",null," "),r.a.createElement("span",null,"A"),r.a.createElement("span",null,"b"),r.a.createElement("span",null,"o"),r.a.createElement("span",null,"u"),r.a.createElement("span",null,"t"),r.a.createElement("span",null," "),r.a.createElement("span",null,"T"),r.a.createElement("span",null,"o"),r.a.createElement("span",null," "),r.a.createElement("span",null,"J"),r.a.createElement("span",null,"o"),r.a.createElement("span",null,"i"),r.a.createElement("span",null,"n"),r.a.createElement("span",null,"."),r.a.createElement("span",null,"."),r.a.createElement("span",null,".")),r.a.createElement("h3",{className:"grad-text reflex"},r.a.createElement("span",null,"S"),r.a.createElement("span",null,"o"),r.a.createElement("span",null,"m"),r.a.createElement("span",null,"e"),r.a.createElement("span",null,"o"),r.a.createElement("span",null,"n"),r.a.createElement("span",null,"e"),r.a.createElement("span",null," "),r.a.createElement("span",null,"I"),r.a.createElement("span",null,"s"),r.a.createElement("span",null," "),r.a.createElement("span",null,"A"),r.a.createElement("span",null,"b"),r.a.createElement("span",null,"o"),r.a.createElement("span",null,"u"),r.a.createElement("span",null,"t"),r.a.createElement("span",null," "),r.a.createElement("span",null,"T"),r.a.createElement("span",null,"o"),r.a.createElement("span",null," "),r.a.createElement("span",null,"J"),r.a.createElement("span",null,"o"),r.a.createElement("span",null,"i"),r.a.createElement("span",null,"n"),r.a.createElement("span",null,"."),r.a.createElement("span",null,"."),r.a.createElement("span",null,".")),r.a.createElement("h3",{className:"grad-text"},r.a.createElement("span",null,"P"),r.a.createElement("span",null,"l"),r.a.createElement("span",null,"e"),r.a.createElement("span",null,"a"),r.a.createElement("span",null,"s"),r.a.createElement("span",null,"e"),r.a.createElement("span",null," "),r.a.createElement("span",null,"W"),r.a.createElement("span",null,"a"),r.a.createElement("span",null,"i"),r.a.createElement("span",null,"t")),r.a.createElement("h3",{className:"grad-text reflex"},r.a.createElement("span",null,"P"),r.a.createElement("span",null,"l"),r.a.createElement("span",null,"e"),r.a.createElement("span",null,"a"),r.a.createElement("span",null,"s"),r.a.createElement("span",null,"e"),r.a.createElement("span",null," "),r.a.createElement("span",null,"W"),r.a.createElement("span",null,"a"),r.a.createElement("span",null,"i"),r.a.createElement("span",null,"t"))),r.a.createElement("div",{className:"video-player-controls"},r.a.createElement("div",{className:"video-slider"},r.a.createElement("div",{className:"video-slider-tooltip"},"0.00"),r.a.createElement("div",{className:"video-slider-container"},r.a.createElement("div",{className:"video-slider-bg"},r.a.createElement("div",{className:"video-slider-buffered"}),r.a.createElement("div",{className:"video-slider-rail"}),r.a.createElement("div",{className:"video-slider-buffer"})))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"wrap"},r.a.createElement("div",{className:"video-control"},r.a.createElement("button",{className:"video-control-btn"},r.a.createElement("svg",{className:"video-control-play",viewBox:"0 0 24 24",width:"24",height:"24",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",shapeRendering:"geometricPrecision"},r.a.createElement("polygon",{points:"5 3 19 12 5 21 5 3",fill:"currentColor"})),r.a.createElement("svg",{className:"video-control-pause",viewBox:"0 0 24 24",width:"24",height:"24",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",shapeRendering:"geometricPrecision"},r.a.createElement("rect",{x:"6",y:"4",width:"4",height:"16",fill:"currentColor"}),r.a.createElement("rect",{x:"14",y:"4",width:"4",height:"16",fill:"currentColor"})))),r.a.createElement("div",{className:"video-counts"},r.a.createElement("span",{className:"video-count-time"},"0:00"),r.a.createElement("span",{className:"video-count-line"},"/"),r.a.createElement("span",{className:"video-count-fulltime"},"0:00"))),r.a.createElement("div",{className:"wrap"},r.a.createElement("div",{className:"video-chat"},r.a.createElement("img",{id:"chat-on",src:"/static-img/chat_white.png",alt:"pip",width:"24",height:"24"}),r.a.createElement("img",{id:"chat-off",src:"/static-img/chat_off.png",alt:"pip",width:"24",height:"24"})),r.a.createElement("div",{className:"video-voice"},r.a.createElement("div",{className:"video-voice-slider"},r.a.createElement("div",{className:"video-voice-slider-rail",role:"slider","aria-valuemax":"1","aria-valuemin":"0","aria-valuenow":"1"},r.a.createElement("div",{className:"video-voice-slider-buffer"}),r.a.createElement("input",{className:"video-voice-slider-range",type:"range",min:"0",max:"1",defaultValue:"1",step:"0.01"}))),r.a.createElement("button",{className:"video-voice-btn"},r.a.createElement("svg",{className:"video-voice-on",viewBox:"0 0 24 24",width:"24",height:"24",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",shapeRendering:"geometricPrecision"},r.a.createElement("path",{d:"M11 5L6 9H2v6h4l5 4V5z"}),r.a.createElement("path",{d:"M19.07 4.93a10 10 0 010 14.14M15.54 8.46a5 5 0 010 7.07"})),r.a.createElement("svg",{className:"video-voice-off",viewBox:"0 0 24 24",width:"24",height:"24",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",shapeRendering:"geometricPrecision"},r.a.createElement("path",{d:"M11 5L6 9H2v6h4l5 4V5z"}),r.a.createElement("path",{d:"M23 9l-6 6"}),r.a.createElement("path",{d:"M17 9l6 6"})))),r.a.createElement("div",{className:"video-playback-rate"},r.a.createElement("div",{className:"video-playback-box"},r.a.createElement("div",{className:"video-playback"},"0.25"),r.a.createElement("div",{className:"video-playback"},"0.50"),r.a.createElement("div",{className:"video-playback"},"0.75"),r.a.createElement("div",{className:"video-playback"},"Normal"),r.a.createElement("div",{className:"video-playback"},"1.25"),r.a.createElement("div",{className:"video-playback"},"1.50"),r.a.createElement("div",{className:"video-playback"},"1.75"),r.a.createElement("div",{className:"video-playback"},"2.0")),r.a.createElement("div",{className:"video-playback-speed"},"Normal")),r.a.createElement("div",{className:"video-pip",disabled:!0},r.a.createElement("img",{src:"/static-img/pip_white.png",alt:"pip",width:"24",height:"24"})),r.a.createElement("div",{className:"full-screen"},r.a.createElement("button",{className:"full-screen-btn"},r.a.createElement("svg",{className:"full-screen-open",viewBox:"0 0 24 24",width:"24",height:"24",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",shapeRendering:"geometricPrecision"},r.a.createElement("path",{d:"M15 3h6v6"}),r.a.createElement("path",{d:"M9 21H3v-6"}),r.a.createElement("path",{d:"M21 3l-7 7"}),r.a.createElement("path",{d:"M3 21l7-7"})),r.a.createElement("svg",{className:"full-screen-exit",viewBox:"0 0 24 24",width:"24",height:"24",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",shapeRendering:"geometricPrecision"},r.a.createElement("path",{d:"M4 14h6v6"}),r.a.createElement("path",{d:"M20 10h-6V4"}),r.a.createElement("path",{d:"M14 10l7-7"}),r.a.createElement("path",{d:"M3 21l7-7"}))))))),r.a.createElement("div",{className:"video-player"},r.a.createElement("video",{id:"vid-file-stream",poster:"https://raw.githubusercontent.com/Ahmetaksungur/twitter-video-player-clone/master/92456705_506989316849451_7379405183454806542_n.jpg",tabIndex:"-1",datavideo:"",preload:"auto",controlsList:"nodownload",crossOrigin:"anonymous"},r.a.createElement("source",{def:n,id:"org-video-src",src:n,type:"video/mp4"})))),r.a.createElement("canvas",{id:"canvas"}))},W=function(e){var a=e.socket,t=Object(n.useContext)(p).video,c=Object(n.useState)([]),l=Object(o.a)(c,2),i=l[0],s=l[1],m=Object(n.useState)([]),d=Object(o.a)(m,2),u=d[0],v=d[1],f=Object(n.useState)({}),h=Object(o.a)(f,2),g=h[0],N=h[1],w=Object(n.useRef)(),y=Object(n.useRef)(),k=Object(n.useRef)([]),O=Object(n.useRef)(),j=Object(n.useRef)(),x=Object(n.useRef)(),C=Object(n.useState)(!1),S=Object(o.a)(C,2),D=(S[0],S[1]),M=Object(n.useState)(!1),T=Object(o.a)(M,2),U=T[0],_=T[1];if(Object(n.useEffect)((function(){if(a){x.current=a,x.current.emit("join room file",{roomID:t.user.room,type:"help"}),x.current.on("all users file",(function(e){if(console.log("all users : ",e,E()("#vid-file-stream")[0]),E()("#vid-file-stream")[0]){var a=E()("#vid-file-stream")[0].captureStream();O.current=a,console.log("other users : ",e),e.forEach((function(e){var t={peerID:e,peer:function(e,a,t){var n=new I.a({initiator:!0,trickle:!1,stream:t});return n.on("signal",(function(t){x.current.emit("sending signal file",{userToSignal:e,callerID:a,signal:t,vid:E()("video")[0].duration})})),n}(e,x.current.id,a)};k.current.push(t)}))}})),x.current.on("user joined file",(function(e){console.log("user joined file running...");var a=function(e,a){var t=new I.a({initiator:!1,trickle:!1});return window.fileOwner=a,t.on("signal",(function(e){x.current.emit("returning signal file",{signal:e,callerID:a})})),t.signal(e),t}(e.signal,e.callerID);j.current=a,a.on("stream",(function(e){console.log(e),w.current="copy",y.current=e,D((function(e){return!e}))})),D((function(e){return!e}))})),x.current.on("receiving returned signal file",(function(e){k.current.find((function(a){return a.peerID===e.id})).peer.signal(e.signal)}));window.URL||window.webkitURL;x.current.on("video end file",(function(){y.current=null,w.current="",window.fileOwner="",j.current.destroy(),D((function(e){return!e}))}))}}),[a]),Object(n.useEffect)((function(){b.a.get("https://watch-party-latest.herokuapp.com/video/all").then((function(e){s(e.data.video),function(e){for(var a=[],t=0;t<4&&t<e.length;t++)a.push(e[t]);v(a)}(e.data.video)}))}),[]),Object(n.useEffect)((function(){a&&setTimeout((function(){a.emit("any-video-selected",t.user.room),a.on("video-selected",(function(e){N(e)})),a.on("any-video-selected",(function(e){console.log("any-video-selected running and running ",window.vidUrl,e,a.id),a.emit("yes-video-selected",{vidUrl:window.vidUrl?window.vidUrl:{},to:e})})),a.on("yes-video-selected",(function(e){console.log("yes-video-selected",e),N(e)}))}),500)}),[a]),a){var L,P=function(e){window.vidUrl=e,g.startedBy?alert("You aren't allowed to close this video"):(a.emit("video-selected",{item:e,roomID:t.user.room,startedBy:t.user.user._id}),N(e))};return r.a.createElement(r.a.Fragment,null,g.video?r.a.createElement(r.a.Fragment,null,g.startedBy?null:r.a.createElement("div",{className:"vv-back",onClick:function(){return P({})}},r.a.createElement("i",{className:"fas fa-times"})),r.a.createElement("div",{className:"vvideo-holder"},r.a.createElement(R,{vid:g}))):r.a.createElement(r.a.Fragment,null,w.current?r.a.createElement(r.a.Fragment,null,window.fileOwner?null:r.a.createElement("div",{className:"vv-back",onClick:function(){window.fileOwner||(k.current.map((function(e){e.peer.destroy()})),x.current.emit("video end file",t.user.room),w.current="",D((function(e){return!e})))}},r.a.createElement("i",{className:"fas fa-times"})),r.a.createElement("div",{className:"vvideo-holder"},r.a.createElement(A,{vid:w.current,stream:y.current}))):r.a.createElement(r.a.Fragment,null,U&&r.a.createElement("div",{className:"url-container",onClick:function(e){!function(e){0!=E()(e.target).hasClass("url-container")&&(E()(".vlrl").css({transform:"scale(0)",borderRadius:"200px"}),setTimeout((function(){_(!1)}),600))}(e)}},r.a.createElement("div",{className:"vlrl-wr-message"},r.a.createElement("i",{className:"fas fa-times-circle"}),r.a.createElement("span",{className:"vlrl-wr-text"})),r.a.createElement("div",{className:"vlrl"},r.a.createElement("div",{className:"circle-temp"}),r.a.createElement("div",{className:"circle-temp1"}),r.a.createElement("div",{className:"circle-temp2"}),r.a.createElement("div",{className:"crlunderline"},r.a.createElement("span",{className:"crlicon-surround"},r.a.createElement("i",{className:"fas fa-link crlicon"})),r.a.createElement("input",{type:"url",className:"join-room",placeholder:"Paste a Url here"})),r.a.createElement("button",{className:"crbtn",onClick:function(e){!function(e){var a=E()(".vlrl .crbtn");if(!a.find(".cr-loading-spinner").length){var t=/((([A-Za-z]{3,9}:(?:\/\/)?)(?:[-;:&=\+\$,\w]+@)?[A-Za-z0-9.-]+(:[0-9]+)?|(?:www.|[-;:&=\+\$,\w]+@)[A-Za-z0-9.-]+)((?:\/[\+~%\/.\w-_]*)?\??(?:[-\+=&;%@.\w_]*)#?(?:[\w]*))?)/,n=E()(".join-room").val();if(!n.match(t)||0==n.match(t).length)return E()(".vlrl-wr-text").text("Please enter a valid url"),E()(".vlrl-wr-message").css({left:"3%",transform:"scale(1.0)"}),void setTimeout((function(){E()(".vlrl-wr-message").css({left:"-33%",transform:"scale(0.5)"})}),4e3);a.text(""),a.append('<div className="cr-loading-spinner"/>'),(L=document.createElement("video")).src=n,E()(L).on("error",(function(){E()(".vlrl-wr-text").text("Sorry, Unable to play the url"),E()(".vlrl-wr-message").css({left:"3%",transform:"scale(1.0)"}),a.text("Play Url"),setTimeout((function(){E()(".vlrl-wr-message").css({left:"-33%",transform:"scale(0.5)"})}),4e3)})),E()(L).on("canplay",(function(){P({video:{video:L.src,poster:""}}),a.text("Play Url")}))}}()}},"Play Url"))),r.a.createElement("div",{className:"vlholder"},r.a.createElement("input",{type:"file",id:"vid-file-select",onChange:function(e){return function(e){var a=e.target.files[0];if(a){var t=a.type;if(""!=document.createElement("video").canPlayType(t)){var n=URL.createObjectURL(a);console.log(a),w.current=n,D((function(e){return!e}))}}}(e)},className:"vlinnercircle",accept:"video/*"}),r.a.createElement("i",{className:"fas fa-share-alt vlk-vid-upload"}),r.a.createElement("div",{className:"vlano-holder"},"Share a Video")),r.a.createElement("div",{className:"vlholder1",onClick:function(){return _(!0),E()(".url-container").fadeIn(10),void setTimeout((function(){E()(".vlrl").css({transform:"scale(1)",borderRadius:"40px"})}),50)}},r.a.createElement("div",{className:"vlinnercircle1"}),r.a.createElement("i",{className:"fas fa-link vlk-vid-upload1"}),r.a.createElement("div",{className:"vlano-holder1"},"Share a Link")),r.a.createElement(V,{videosList:i,videosList1:u,viewVideo:function(e){return P(e)}}))))}return null},B={height:"auto",width:"auto"},F=function(e){var a=e.vid[e.vid.length-1];function t(){var t=E()(this).val();E()(e.id+" .voice-slider-buffer").css("width",100*t+"%"),a.volume=t,E()(e.id+" .voice-slider-range").attr("value",t),0==t?(a.muted=!0,E()(e.id+" .vol-on").fadeOut(300,(function(){E()(e.id+" .vol-off").fadeIn(300)}))):(a.muted=!1,E()(e.id+" .vol-off").fadeOut(300,(function(){E()(e.id+" .vol-on").fadeIn(300)})))}return Object(n.useEffect)((function(){var a;e.vid&&(E()(e.id+" .voice-slider").css({width:"0px",visibility:"hidden",opacity:0}),E()(e.id+" .vol-on").fadeIn(300,(function(){E()(e.id+" .vol-off").fadeOut(300)})),E()(e.id+" .vol-on").on("click",(function(a){a.stopPropagation(),E()(e.id+" .vol-on").fadeOut(300,(function(){E()(e.id+" .vol-off").fadeIn(300)}))})),E()(e.id+" .vol-off").on("click",(function(a){a.stopPropagation(),E()(e.id+" .vol-off").fadeOut(300,(function(){E()(e.id+" .vol-on").fadeIn(300)}))})),E()(e.id+" .vol-on,"+e.id+" .vol-off,"+e.id+" .voice-slider").hover((function(){a&&clearTimeout(a),E()(e.id+" .voice-slider").css({width:"100px",opacity:"1",visibility:"visible"}),E()(e.id+" .volume-changer").css({right:"-5px"})}),(function(){a=setTimeout((function(){E()(e.id+" .voice-slider").css({width:"0px",opacity:"0",visibility:"hidden"}),E()(e.id+" .volume-changer").css({right:"-15px"})}),2e3)})),E()(e.id+" .voice-slider-range").on("input change",t),E()(e.id+" .voice-slider-range").keyup(t).keyup())}),[]),e.vid?r.a.createElement("div",{className:"volume-changer",onClick:function(e){return function(e){e.stopPropagation()}(e)}},r.a.createElement("div",{className:"vol-surround vol-on"},r.a.createElement("img",{src:"/static-img/vol.png",width:"17",height:"17"})),r.a.createElement("div",{className:"vol-surround vol-off"},r.a.createElement("img",{src:"/static-img/vol_off.png",width:"17",height:"17"})),r.a.createElement("div",{className:"voice-slider"},r.a.createElement("div",{className:"voice-slider-rail",role:"slider","aria-valuemax":"1","aria-valuemin":"0","aria-valuenow":"1"},r.a.createElement("div",{className:"voice-slider-buffer"}),r.a.createElement("input",{className:"voice-slider-range",type:"range",min:"0",max:"1",defaultValue:"1",step:"0.01"})))):null},z=function(e){E.a.fn.textWidth=function(e,a){return E.a.fn.textWidth.fakeEl||(E.a.fn.textWidth.fakeEl=E()("<span>").hide().appendTo(document.body)),E.a.fn.textWidth.fakeEl.text(e||this.val()||this.text()).css("font",a||this.css("font")),E.a.fn.textWidth.fakeEl.width()};var a=Object(n.useState)(!1),t=Object(o.a)(a,2),c=(t[0],t[1],Object(n.useState)(!1)),l=Object(o.a)(c,2),i=l[0],s=l[1],m=Object(n.useRef)(),d=Object(n.useRef)();if(e.user)var u=E()("<p>"+e.user.username.toUpperCase()+"</p>").textWidth(),v={width:u+15+"px",left:"calc(98% - "+(u+10)+"px)"};var p=!1;Object(n.useEffect)((function(){var a=!1;e.peer.on("stream",(function(t){t.getVideoTracks()[0]&&(p=!0),m.current.srcObject=t,d.current.srcObject=t,f(t),a=!0,e.setSt({id:e.id,stream:t})})),!a&&e.st&&(m.current.srcObject=e.st.stream)}),[]);var f=function(a){console.log("vuMeter stream : ",a);var t=new AudioContext,n=t.createAnalyser(),r=t.createMediaStreamSource(a),c=t.createScriptProcessor(2048,1,1);n.smoothingTimeConstant=.8,n.fftSize=1024,r.connect(n),n.connect(c),c.connect(t.destination),c.onaudioprocess=function(){var a=new Uint8Array(n.frequencyBinCount);n.getByteFrequencyData(a);for(var t=0,r=a.length,c=0;c<r;c++)t+=a[c];var l=t/r;l-40>0?E()("#"+e.id+" .video-main-surround").css({transform:"scale(".concat(1+Math.round(l-40)/100,")"),boxShadow:"0 0 ".concat(5+20*Math.round(l-40)/100,"px rgb(120,140,120)")}):E()("#"+e.id+" .video-main-surround").css({transform:"scale(1)",boxShadow:"0 0 0px rgb(120,140,120)"})}},h=null,g=null,N=!1;function b(e,a){return e=Math.ceil(e),a=Math.floor(a),Math.floor(Math.random()*(a-e)+e)}var w=function(){var e=[b(50,250),b(150,250),b(50,250)],a=b(0,3),t=e[a];return e[a]=e[1],e[1]=t,"rgb("+e[0]+","+e[1]+","+e[2]+")"}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("video",{onTimeUpdate:function(){h&&clearTimeout(h),m.current&&(g=m.current.currentTime,h=setTimeout((function(){console.log("time update",g),m.current&&g==m.current.currentTime&&!N&&(E()("#"+e.id+" .video-main-surround").css({width:"140px",height:"140px",fontSize:"70px",left:"calc(50% - 70px)",top:"calc(50% - 70px)"}),m.current.load(),N=!0)}),1e3))},onCanPlay:function(){console.log("canplay"),p&&E()("#"+e.id+" .video-main-surround").css({width:"40px",height:"40px",fontSize:"20px",left:"10px",top:"10px"}),N=!1},onLoadedMetadata:function(){E()("#"+e.id+" audio")[0].pause(),d.current.srcObject=null,s(!0)},playsInline:!0,autoPlay:!0,ref:m,className:"rvideo"}),r.a.createElement("audio",{onLoadedMetadata:function(){s(!0)},playsInline:!0,autoPlay:!0,ref:d}),r.a.createElement("div",{className:"video-controls-bg"},e.user&&r.a.createElement("div",{className:"video-main-surround",style:{backgroundImage:"linear-gradient(45deg, rgb(30,70,50) 0, rgb(30,50,80) 49%, ".concat(w," 51%, ").concat(w," 100%)")}},function(e){var a,t=(e=e.toUpperCase()).split(" ");return 1==t.length?(t=t[0])[0]:(a=t[0],t=t[1],a[0]+t[0])}(e.user.username)),e.user&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"r-container"},r.a.createElement("div",{onClick:function(a){return e.otherUnpin(a)},onMouseEnter:function(e){E()(".other .rvideo-pin").html('UN <i class="fas fa-map-pin ricon"></i>')},onMouseLeave:function(e){E()(".other .rvideo-pin").html('<i class="fas fa-map-pin ricon"></i>')},className:"rvideo-pin"},r.a.createElement("i",{className:"fas fa-map-pin ricon"})),r.a.createElement("div",{style:v,className:"rvideo-name"},e.user.username.toLowerCase().split(" ").map((function(e){return e.replace(e[0],e[0].toUpperCase())})).join(" "))),i&&r.a.createElement(F,{vid:E()("#"+e.id+" video"),vidRef:m,id:"#"+e.id}))))},Y=function(e){var a=Object(n.useState)([]),t=Object(o.a)(a,2),c=t[0],l=t[1],i=Object(n.useState)([]),s=Object(o.a)(i,2),m=(s[0],s[1]),d=Object(n.useRef)(),f=Object(n.useRef)(),h=Object(n.useRef)([]),g=Object(n.useRef)([]),N=Object(n.useState)([]),w=Object(o.a)(N,2),y=w[0],O=w[1],x=Object(n.useContext)(p),S=x.video,D=x.dispatch,T=Object(n.useState)(!1),R=Object(o.a)(T,2),U=(R[0],R[1]),_=Object(n.useState)([]),L=Object(o.a)(_,2),P=L[0],V=L[1],A=Object(n.useState)([]),F=Object(o.a)(A,2),Y=F[0],q=F[1],H=Object(n.useState)([]),J=Object(o.a)(H,2),X=J[0],Z=J[1],$=Object(n.useState)([]),G=Object(o.a)($,2),K=G[0],Q=G[1];function ee(e){return 0==e?"0":e/10<1?"0"+e:e}r.a.useEffect((function(){var e=document.createElement("script");e.src="/path/to/room.js",e.async=!0,document.body.appendChild(e),S.curV?E()(".vid-off").fadeOut(300):E()(".vid-on").fadeOut(300),S.curA?E()(".aud-off").fadeOut(300):E()(".aud-on").fadeOut(300)}),[]),r.a.useEffect((function(){b.a.post("https://watch-party-latest.herokuapp.com/room/members",{id:S.user.user._id,roomId:S.user.room}).then((function(e){V(e.data)}))}),[]),r.a.useEffect((function(){b.a.get("https://watch-party-latest.herokuapp.com/video/me",{headers:{Authorization:"Bearer "+S.user.token}}).then((function(e){var a=e.data.video;console.log(a.length),ae(void 0,a,0)}))}),[]);function ae(e,a,t){t>=a.length?Q((function(e){return[].concat(Object(k.a)(e),Object(k.a)(a))})):(e='<video ><source src = "'+a[t].video+'" type = "video/mp4"></video>',E()(e).on("loadedmetadata",(function(){var n=ee(Math.floor(this.duration/3600)),r=ee(Math.floor(this.duration%3600/60)),c=ee(Math.floor(this.duration%3600%60));a[t].duration=("0"==n?"":n+":")+r+":"+c,ae(e,a,t+1)})))}r.a.useEffect((function(){b.a.post("https://watch-party-latest.herokuapp.com/chat/get",{id:S.user.user._id,roomId:S.user.room},{headers:{Authorization:"Bearer "+S.user.token}}).then((function(e){O(e.data)})).catch((function(e){console.log(e)}))}),[]);var te=function(e,a){var t=0;for(t=0;t<e.length;t++)if(e[t].peerID==a.peerID)return e[t]=a,!0;return e.push(a),!1},ne=Object(n.useRef)();function re(e,a,t){var n=new I.a({initiator:!0,trickle:!1,stream:t});return n.on("signal",(function(t){console.log("sending signal...",a,t),d.current.emit("sending signal",{userToSignal:e,callerID:a,signal:t,user:S.user.user})})),n}function ce(e,a,t){var n=new I.a({initiator:!1,trickle:!1,stream:t});return n.on("signal",(function(e){console.log("returning signal ",a,e),d.current.emit("returning signal",{signal:e,callerID:a,user:S.user.user})})),n.signal(e),n}Object(n.useEffect)((function(){d.current=j.a.connect("https://watch-party-latest.herokuapp.com/",{transports:["websocket","polling","flashsocket"]}),window.socket=d.current;try{navigator.mediaDevices.getUserMedia({video:!!S.video&&{deviceId:{exact:S.video}},audio:!!S.voice&&{deviceId:{exact:S.voice}}}).then((function(e){f.current&&(f.current.srcObject=e),S.curV&&E()(".me .video-main-surround").css({width:"40px",height:"40px",fontSize:"20px",left:"10px",top:"10px"}),!S.curA&&S.voice&&de(),!S.curV&&S.video&&me(),ye(e),S.video&&!S.voice?d.current.emit("join room",{id:S.user.user._id,roomID:S.user.room,type:"help",mode:"video"}):S.voice&&!S.video?d.current.emit("join room",{id:S.user.user._id,roomID:S.user.room,type:"help",mode:"voice"}):d.current.emit("join room",{id:S.user.user._id,roomID:S.user.room,type:"normal"}),d.current.on("duplicate check",(function(e){e.id==S.user.user._id&&(window.location.href=new URL(window.location.href).origin+"/create/")})),d.current.on("all users",(function(a){var t=a.users,n=a.mode;if(console.log("users : ",t),!S.voice&&S.video&&"voice"==n)return console.log("voice mode accepting video"),void d.current.emit("all users inducer",t[0]);var r=[];t.forEach((function(a){var t=re(a,d.current.id,e),n={peerID:a,peer:t,user:null};te(h.current,n),h.current.length<15&&te(g.current,n),r.push(t)})),m((function(e){return[].concat(Object(k.a)(e),r)}))})),d.current.on("user joined",(function(a){var t=ce(a.signal,a.callerID,e),n={peerID:a.callerID,peer:t,user:a.user},r=te(h.current,n);h.current.length<15&&te(g.current,n),r||q((function(e){return[].concat(Object(k.a)(e),[a.user])}))})),d.current.on("receiving returned signal",(function(e){var a,t=h.current.find((function(a){return a.peerID===e.id}));t.user=e.user,t.peer.signal(e.signal),a=e.user,ne.current&&ne.current._id==a._id?U((function(e){return!e})):(ne.current=e.user,q((function(a){return[].concat(Object(k.a)(a),[e.user])})))})),d.current.on("v disconnection",(function(){console.log("v disconnection running...."),window.location.reload()}))})).catch((function(e){d.current.emit("join room",{id:S.user.user._id,roomID:S.user.room,type:"help"}),d.current.on("duplicate check",(function(e){e.id==S.user.user._id&&(window.location.href=new URL(window.location.href).origin+"/create/")})),d.current.on("all users",(function(e){var a=e.users,t=e.mode;if("video"!=t&&"voice"!=t){var n=[];a.forEach((function(e){var a=re(e,d.current.id,null),t={peerID:e,peer:a,user:null};h.current.push(t),h.current.length<15&&g.current.push(t),n.push(a)})),m((function(e){return[].concat(Object(k.a)(e),n)}))}else d.current.emit("all users inducer",a[0])})),d.current.on("user joined",(function(e){var a=ce(e.signal,e.callerID,null),t={peerID:e.callerID,peer:a,user:e.user};h.current.push(t),h.current.length<15&&g.current.push(t),q((function(a){return[].concat(Object(k.a)(a),[e.user])}))})),d.current.on("receiving returned signal",(function(e){var a=h.current.find((function(a){return a.peerID===e.id}));a.user=e.user,a.peer.signal(e.signal),q((function(a){return[].concat(Object(k.a)(a),[e.user])}))}))})),d.current.on("user left",(function(e){var a=h.current.find((function(a){return a.peerID===e}));if(a){var t=a.user,n=g.current.find((function(a){return a.peerID===e}));a&&a.peer.destroy(),n&&n.peer.destroy(),h.current=h.current.filter((function(a){return a.peerID!==e})),g.current=g.current.filter((function(a){return a.peerID!==e}));var r=c.filter((function(a){return a.peerID!=e}));l(Object(k.a)(r)),0!=g.current.length||E()(".me").hasClass("rvideo-surround")||he(0),r=Y.filter((function(e){return e._id!=t._id})),q(Object(k.a)(r))}}))}catch(e){}}),[]),r.a.useEffect((function(){var e=E()(S.options.audio);E()(".container").append(e),e=E()(S.options.video),E()(".container").append(e),S.voice?(E()(".aud-opt").each((function(e){E()(this).attr("value")==S.voice&&E()(this).css({borderRight:"3px solid rgb(3,240,100)"})})),E()(".aud-op-opt").each((function(e){E()(this).attr("value")==S.voiceOp&&E()(this).css({borderRight:"3px solid rgb(3,240,100)"})}))):E()("#audioDevice .options").css({borderRight:"3px solid rgb(3,240,100)"}),S.video?E()(".vid-opt").each((function(e){E()(this).attr("value")==S.video&&E()(this).css({borderRight:"3px solid rgb(3,240,100)"})})):E()("#videoDevice .options").css({borderRight:"3px solid rgb(3,240,100)"}),E()(".aud-opt").on("click",(function(){S.voice!=E()(this).attr("value")&&(E()(".aud-opt").css({borderRight:"none"}),E()(this).css({borderRight:"3px solid rgb(3,240,100)"}),S.voice=E()(this).attr("value"),oe())})),E()(".vid-opt").on("click",(function(){S.video!=E()(this).attr("value")&&(E()(".vid-opt").css({borderRight:"none"}),E()(this).css({borderRight:"3px solid rgb(3,240,100)"}),S.video=E()(this).attr("value"),se())}));var a=!1;E()(".drp-dwn-box").hover((function(){console.log("hover"),a=!0}),(function(){console.log("hover not"),a=!1})),E()(document).mouseup((function(){a||E()(".drp-dwn-box").fadeOut(100)}))}),[]),Object(n.useEffect)((function(){b.a.get("https://watch-party-latest.herokuapp.com/room/me",{headers:{Authorization:"Bearer "+S.user.token}}).then((function(e){Z(e.data)})).catch((function(e){console.log(e)}))}),[]);var le=!1,ie=!1;S.video&&(le=!0),S.voice&&(ie=!0);var oe=function(){navigator.mediaDevices.getUserMedia({video:!!le&&{deviceId:{exact:S.video},videoConstraints:B},audio:{deviceId:{exact:S.voice}}}).then((function(e){var a=f.current.srcObject.getAudioTracks()[0];f.current&&(f.current.srcObject.removeTrack(a),f.current.srcObject.addTrack(e.getAudioTracks()[0]));var t=f.current.srcObject.getAudioTracks()[0];E()(".aud-off").fadeOut(200,(function(){E()(".aud-on").fadeIn(200)})),h.current.map((function(e){e.peer.replaceTrack(a,t,f.current.srcObject)}))})).catch((function(e){console.log(e),alert("Permission Denied")})),ie=!0},se=function(){navigator.mediaDevices.getUserMedia({video:{deviceId:{exact:S.video},videoConstraints:B},audio:!!ie&&{deviceId:{exact:S.voice}}}).then((function(e){E()(".me .video-main-surround").css({width:"40px",height:"40px",fontSize:"20px",left:"10px",top:"10px"});var a=f.current.srcObject.getVideoTracks()[0];f.current&&(f.current.srcObject.removeTrack(a),f.current.srcObject.addTrack(e.getVideoTracks()[0]),f.current.play());var t=f.current.srcObject.getVideoTracks()[0];E()(".vid-off").fadeOut(200,(function(){E()(".vid-on").fadeIn(200)})),h.current.map((function(e){e.peer.replaceTrack(a,t,f.current.srcObject)}))})).catch((function(e){console.log(e),alert("Permission Denied")})),le=!0},me=function(){ue("video"),le=!1,f.current.pause(),E()(".vid-on").fadeOut(200,(function(){E()(".vid-off").fadeIn(200)})),E()(".me .video-main-surround").css({width:"140px",height:"140px",fontSize:"70px",left:"calc(50% - 70px)",top:"calc(50% - 70px)"})},de=function(){f.current.srcObject.getAudioTracks()[0].enabled=!1,ue("audio"),ie=!1,E()(".aud-on").fadeOut(200,(function(){E()(".aud-off").fadeIn(200)}))},ue=function(e){return f.current.srcObject.getTracks().map(function(){var a=Object(v.a)(u.a.mark((function a(t){return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t.kind!=e){a.next=3;break}return a.next=3,t.stop();case 3:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())},ve=620,pe=function(){var e=Math.min(g.current.length+1,E()(".rvideo-surround").length);e>=1&&E()(".rvideo-surround").css({width:"1000px",height:"600px"}),e>=2&&E()(".rvideo-surround").css({width:550,height:310}),e>=5&&(E()(".rvideo-grid").css({gridTemplateColumns:"auto auto auto"}),E()(".rvideo-surround").css({width:1100/3,height:ve/2.8})),e>=10&&(E()(".rvideo-grid").css({gridTemplateColumns:"auto auto auto auto"}),E()(".rvideo-surround").css({width:1100/3.8,height:200})),e>=13&&(E()(".rvideo-grid").css({gridTemplateColumns:"auto auto auto auto"}),E()(".rvideo-surround").css({width:1100/3.8,height:ve/3.8}))};pe(),0==g.current.length&&h.current.length>0||E()(".me .rvideo-pin").fadeOut();var fe=function(){E()(".me").find(".rvideo-pin").fadeIn(500),0!=g.current.length&&(g.current=[],E()(".other").removeClass("rvideo-surround"),U((function(e){return!e})),pe())},Ee=function(e){var a=h.current.find((function(a){return a.peerID==e}));E()(".me").fadeOut(),E()(".me").removeClass("rvideo-surround"),E()(".other .rvideo-pin").fadeIn(500),g.current=[a],U((function(e){return!e})),pe()},he=function(e){0!=e&&e.stopPropagation(),console.log("running other unpin...");for(var a=g.current[0],t=15,n=g.current.length;n<=t&&n<h.current.length;n++)a&&a.peerID==h.current[n].peerID?t=16:g.current.push(h.current[n]);E()(".me").addClass("rvideo-surround"),E()(".me").fadeIn(),pe(),U((function(e){return!e}))},ge={root:document.querySelector("r-members"),rootMargin:"0px",threshold:[.1]},Ne={root:document.querySelector("r-videos"),rootMargin:"0px",threshold:[.1]},be={root:document.querySelector("r-rooms"),rootMargin:"0px",threshold:[.1]};function we(e,a){e.forEach((function(e){e.intersectionRatio>.1?E()(e.target).css({transform:" translateX(0%)"}):E()(e.target).css({transform:" translateX(-50%)"})}))}var ye=function(e){var a=new AudioContext,t=a.createAnalyser(),n=a.createMediaStreamSource(e),r=a.createScriptProcessor(2048,1,1);t.smoothingTimeConstant=.8,t.fftSize=1024,n.connect(t),t.connect(r),r.connect(a.destination),r.onaudioprocess=function(){var e=new Uint8Array(t.frequencyBinCount);t.getByteFrequencyData(e);for(var a=0,n=e.length,r=0;r<n;r++)a+=e[r];var c=a/n;c-40>0?E()(".me .video-main-surround").css({transform:"scale(".concat(1+Math.round(c-40)/100,")"),boxShadow:"0 0 ".concat(5+20*Math.round(c-40)/100,"px rgb(120,140,120)")}):E()(".me .video-main-surround").css({transform:"scale(1)",boxShadow:"0 0 0px rgb(120,140,120)"})}},ke=new IntersectionObserver(we,ge),Oe=(new IntersectionObserver(we,Ne),new IntersectionObserver(we,be));function je(e,a){return e=Math.ceil(e),a=Math.floor(a),Math.floor(Math.random()*(a-e)+e)}function xe(){var e=[je(10,250),je(50,250),je(10,250)],a=je(0,3),t=e[a];return e[a]=e[1],e[1]=t,"rgb("+e[0]+","+e[1]+","+e[2]+")"}function Ie(e){var a,t=(e=e.toUpperCase()).split(" ");return 1==t.length?(t=t[0])[0]:(a=t[0],t=t[1],a[0]+t[0])}var Ce=xe(),Se=P.filter((function(e){return!Y.map((function(e){return e._id})).includes(e._id)})),De=function(e){return c.find((function(a){return a.id==e}))},Me=function(e){var a=new URL(window.location.href);e!=S.user.room&&(window.location.href=a.origin+"/room/"+e)};return RTCDataChannel.onerror=function(e){console.log(e),alert("something wrong on our side")},r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"r-dashboard"},r.a.createElement("div",{className:"dashboard-selector"},r.a.createElement("div",{className:"dashboard-option",id:"home"},r.a.createElement("i",{className:"fas fa-h-square d-opt-icon"})),r.a.createElement("div",{className:"dashboard-option",id:"vidup"},r.a.createElement("i",{className:"fas fa-upload d-opt-icon"})),r.a.createElement("div",{className:"dashboard-option",id:"vidch"},r.a.createElement("i",{className:"fas fa-video d-opt-icon"})),r.a.createElement("div",{className:"dashboard-option",id:"vid"},r.a.createElement("i",{className:"fab fa-youtube d-opt-icon"})),r.a.createElement("div",{className:"d-opt-selector"})),r.a.createElement("div",{className:"rholder",onClick:function(){return function(){localStorage.removeItem("id"),localStorage.removeItem("vid-token");var e=new URL(window.location.href);b.a.post("https://watch-party-latest.herokuapp.com/users/logout",{id:S.user.user._id,token:S.user.token}).then((function(a){window.location.href=e.origin,D({type:"SET_VOICE",voice:!1}),D({type:"SET_AUDOP",voiceOp:!1}),D({type:"SET_CUR",curA:!1,curV:!1}),D({type:"SET_VIDEO",video:!1}),D({type:"SET_OPTIONS",options:{audio:"",video:""}}),D({type:"SET_ROOM",room:!1}),D({type:"SET_USER",user:null})})).catch((function(e){console.log("error in logging out")}))}()}},r.a.createElement("div",{className:"rinnercircle"}),r.a.createElement("i",{className:"fas fa-sign-out-alt rk-vid-upload"})),r.a.createElement("div",{className:"r-rooms"},r.a.createElement("div",{className:"r-mem-prelim"},"Rooms Created (",X.created?X.created.length:0,")"),X.created&&X.created.map((function(e,a){return r.a.createElement("div",{key:a,className:"r-room",onClick:function(){return Me(e.id)}},r.a.createElement("div",{style:{background:xe()},className:"img-prof1"},Ie(e.name)),e.name," ",e.id==S.user.room?r.a.createElement("div",{className:"current-room"}):null)})),r.a.createElement("div",{className:"r-mem-prelim"},"Other Rooms (",X.member?X.member.length:0,")"),X.member&&X.member.map((function(e,a){return a==X.member.length-1&&setTimeout((function(){E()(".r-room").each((function(e){Oe.observe(this)}))}),100),r.a.createElement("div",{key:a,className:"r-room",onClick:function(){return Me(e.id)}},r.a.createElement("div",{style:{background:xe()},className:"img-prof1"},Ie(e.name)),e.name," ",e.id==S.user.room?r.a.createElement("div",{className:"current-room"}):null)}))),r.a.createElement("div",{className:"r-videos"},0!=K.length?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"r-mem-prelim"},"Your Videos"),K.map((function(e,a){return a==K.length-1&&setTimeout((function(){E()(".r-video-").each((function(e){Oe.observe(this)}))}),100),r.a.createElement("div",{key:a,className:"r-video-"},r.a.createElement("div",{className:"vid-poster"},r.a.createElement("img",{src:e.poster,width:"100",height:"75"})),r.a.createElement("div",{className:"vid-name"},e.name),r.a.createElement("div",{className:"vid-views"},"12 views"),r.a.createElement("div",{className:"vid-duration"},e.duration))}))):r.a.createElement("div",{className:"r-mem-prelim"},"No Videos Uploaded")),r.a.createElement("div",{className:"r-members"},r.a.createElement("div",{className:"r-mem-prelim"},"Total Members (",P.length+1,")"),r.a.createElement("div",{className:"r-mem-prelim"},"Online (",Y.length+1,")"),r.a.createElement("div",{className:"r-member",onClick:function(e){fe()}},r.a.createElement("div",{style:{background:Ce},className:"img-prof"},Ie(S.user.user.username)),S.user.user.username," (you)"),Y.map((function(e,a){return a==h.current.length-1&&setTimeout((function(e){E()(".r-member").each((function(e){ke.observe(this)}))}),100),r.a.createElement("div",{className:"r-member",key:a,onClick:function(){!function(e){var a=h.current.find((function(a){return a.user._id==e._id}));Ee(a.peerID)}(e)}},r.a.createElement("div",{style:{background:xe()},className:"img-prof"},Ie(e.username)),e.username)})),r.a.createElement("div",{className:"r-mem-prelim"},"Offline"),Se.map((function(e,a){return a==Se.length-1&&setTimeout((function(e){E()(".r-member").each((function(e){ke.observe(this)}))}),100),r.a.createElement("div",{className:"r-member",key:a},r.a.createElement("div",{style:{background:xe()},className:"img-prof"},Ie(e.username)),e.username)})))),r.a.createElement("div",{className:"overall-container"},r.a.createElement("div",{className:"inside-overall-container"},r.a.createElement("div",{className:"video-list"},r.a.createElement(W,{socket:d.current})),r.a.createElement("div",{className:"video-upload-container"},r.a.createElement(C,{addVideo:function(e){return a=e,console.log("vids add video",a),void ae(void 0,[a],0);var a}})),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"circle-temp2"}),r.a.createElement("div",{className:"egg-temp"}),r.a.createElement("div",{className:"circle-temp1"}),r.a.createElement("div",{className:"circle-temp3"}),r.a.createElement("div",{className:"circle-temp4"}),r.a.createElement("div",{className:"rvideo-grid"},r.a.createElement("div",{className:"rvideo-surround me",onClick:function(){return fe()}},r.a.createElement("video",{muted:!0,width:"100%",height:"100%",ref:f,autoPlay:!0,playsInline:!0,className:"rvideo"}),r.a.createElement("div",{className:"video-controls-bg"},r.a.createElement("div",{className:"video-main-surround",style:{backgroundImage:"linear-gradient(45deg, rgb(30,60,80) 0, rgb(20,50,70) 49%, rgb(225,30,40) 51%, rgb(245,20,20) 100%)"}},r.a.createElement("i",{className:"fas fa-user"})),r.a.createElement("div",{className:"r-container"},r.a.createElement("div",{onClick:function(e){return function(e){if(E()(".me .rvideo-pin").fadeOut(),(0!=g.current.length||0!=h.current.length)&&!(g.current.length>=2)){e.stopPropagation();for(var a=0;a<15&&a<h.current.length&&g.current.length<h.current.length;a++)g.current.push(h.current[a]);E()(".me .rvideo-pin").fadeOut(500),U((function(e){return!e})),pe()}}(e)},className:"rvideo-pin"},r.a.createElement("i",{className:"fas fa-map-pin ricon"})),r.a.createElement("div",{className:"rvideo-name"},"You")))),g.current.length>0?g.current.map((function(e,a){var t=e.peerID,n=e.peer,c=e.user;return a==g.current.length-1&&setTimeout((function(){pe(),E()(".me").hasClass("rvideo-surround")&&E()(".other .rvideo-pin").fadeOut()}),300),r.a.createElement("div",{key:a,id:t,onClick:function(){return Ee(t)},className:"rvideo-surround other"},r.a.createElement(z,{setSt:function(e){l((function(a){return[].concat(Object(k.a)(a),[e])}))},st:De(t),otherUnpin:function(e){he(e)},id:t,peer:n,user:c,className:"rvideo"}))})):null),r.a.createElement("div",{className:"vid-btn-holder"},r.a.createElement("div",{className:"vid vid-off crricon-surround",onClick:se},r.a.createElement("i",{className:"fas fa-video-slash icon"})),r.a.createElement("div",{className:"vid vid-on crricon-surround",onClick:me},r.a.createElement("i",{className:"fas fa-video icon"})),r.a.createElement("div",{className:"drp-dwn",onClick:function(){return E()("#audioDevice").fadeOut(10),void E()("#videoDevice").fadeIn(10)}},r.a.createElement("i",{className:"fas fa-caret-down"}))),r.a.createElement("div",{className:"aud-btn-holder"},r.a.createElement("div",{className:"aud aud-off crricon-surround",onClick:oe},r.a.createElement("i",{className:"fas fa-microphone-slash icon"})),r.a.createElement("div",{className:"aud aud-on crricon-surround",onClick:de},r.a.createElement("i",{className:"fas fa-microphone icon"})),r.a.createElement("div",{className:"drp-dwn",onClick:function(){return E()("#videoDevice").fadeOut(10),void E()("#audioDevice").fadeIn(10)}},r.a.createElement("i",{className:"fas fa-caret-down"})))))),r.a.createElement("div",{className:"ricon-surround ch-open"},r.a.createElement("i",{className:"fas fa-comment-alt ricon"}),"Chat"),r.a.createElement("div",{className:"ricon1-surround ch-close"},r.a.createElement("i",{className:"fas fa-chevron-right ricon1"})),r.a.createElement("div",{className:"rchat-holder"},r.a.createElement(M,{id:S.user.user._id,chat:y,socket:d.current})))},q=function(e,a){switch(a.type){case"SET_VOICE":return Object(i.a)(Object(i.a)({},e),{},{voice:a.voice});case"SET_AUDOP":return Object(i.a)(Object(i.a)({},e),{},{voiceOp:a.voiceOp});case"SET_URL":return Object(i.a)(Object(i.a)({},e),{},{url:a.url});case"SET_VIDEO":return Object(i.a)(Object(i.a)({},e),{},{video:a.video});case"SET_ROOM":return Object(i.a)(Object(i.a)({},e),{},{room:a.room});case"SET_NAME":return Object(i.a)(Object(i.a)({},e),{},{name:a.name});case"SET_USER":return Object(i.a)(Object(i.a)({},e),{},{user:a.user});case"SET_CUR":return Object(i.a)(Object(i.a)({},e),{},{curV:a.curV,curA:a.curA});case"SET_OPTIONS":return Object(i.a)(Object(i.a)({},e),{},{options:a.options});case"SET_VIDEO_URL":return Object(i.a)(Object(i.a)({},e),{},{videoUrl:a.videoUrl});case"SET_EVERYTHING":return Object(i.a)(Object(i.a)({},e),{},{voice:a.voice,voiceOp:a.voiceOp,video:a.video,room:a.room,curV:a.curV,curA:a.curA,options:a.options,user:a.user});default:return e}},H=t(175),J=function(e){var a=Object(n.useContext)(p),t=(a.video,a.dispatch,e.roomID);return r.a.createElement(r.a.Fragment,null,r.a.createElement(y,Object.assign({},e,{roomID:t})))},X=t(173),Z=t.n(X),$=function(e){var a,t=e.alreadySet,n=e.component,c=Object(H.a)(e,["alreadySet","component"]),l=(a=new URL(window.location.href).pathname).replace("/room/",""),i=(a=g.a.decrypt(l,"def").toString(Z.a.enc.Utf8)).substr(a.indexOf(" ")+1);return""==i&&(alert("Sorry No Such Rooms..."),l="",i="",window.location.href=new URL(window.location.href).origin+"/create"),r.a.createElement(m.a,Object.assign({},c,{component:function(e){return t?r.a.createElement(n,null):r.a.createElement(J,Object.assign({roomID:l,RoomName:i},e))}}))},G=(t(356),function(){return r.a.useEffect((function(){var e=document.createElement("script");e.src="/path/to/login.js",e.async=!0,document.body.appendChild(e)}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"login-bg"},r.a.createElement("div",{className:"wrong-message"},"The Email or Password is incorrect"),r.a.createElement("div",{className:"login"},r.a.createElement("div",{className:"caurosel"},r.a.createElement("div",{className:"caurosel-container"},r.a.createElement("div",{className:"temp"},r.a.createElement("div",{className:"temp-cover"},"Create a Party"),r.a.createElement("div",{className:"temp-cover"},"Invite Your Friends")),r.a.createElement("div",{className:"temp"},r.a.createElement("div",{className:"temp-cover"},"Share Your Video File"),r.a.createElement("div",{className:"temp-cover"},"Watch Along")),r.a.createElement("div",{className:"temp"},r.a.createElement("div",{className:"temp-cover"},"Experience Endless Entertainment"))),r.a.createElement("div",{className:"changer"},r.a.createElement("div",{className:"ind-changer",count:"0"}),r.a.createElement("div",{className:"ind-changer",count:"1"}),r.a.createElement("div",{className:"ind-changer",count:"2"}),r.a.createElement("div",{className:"ind-cover"}))),r.a.createElement("div",{className:"login-signup"},r.a.createElement("div",{className:"button"},r.a.createElement("button",{id:"login"},"Login"),r.a.createElement("button",{id:"signup"},"Sign Up")),r.a.createElement("div",{className:"lsmain"},r.a.createElement("div",{className:"l"},r.a.createElement("div",{className:"circle-temp"}),r.a.createElement("div",{className:"circle-temp1"}),r.a.createElement("div",{className:"circle-temp2"}),r.a.createElement("div",{className:"underline"},r.a.createElement("span",{className:"icon-surround"},r.a.createElement("i",{className:"fas fa-user icon"})),r.a.createElement("input",{required:!0,type:"email",id:"lemail",placeholder:"Your Email"})),r.a.createElement("div",{className:"underline"},r.a.createElement("span",{className:"icon-surround"},r.a.createElement("i",{className:"fas fa-unlock icon"})),r.a.createElement("input",{required:!0,type:"password",id:"lpass",placeholder:"Your Password"}),r.a.createElement("i",{className:"fas fa-eye icon3"}),r.a.createElement("i",{className:"fas fa-eye-slash icon3"})),r.a.createElement("div",{className:"submit lsub"},"Sign In")),r.a.createElement("div",{className:"s"},r.a.createElement("div",{className:"circle-temp"}),r.a.createElement("div",{className:"circle-temp1"}),r.a.createElement("div",{className:"circle-temp2"}),r.a.createElement("div",{className:"underline"},r.a.createElement("span",{className:"icon-surround"},r.a.createElement("i",{className:"fas fa-user icon"})),r.a.createElement("input",{type:"text",spellCheck:"false",required:!0,id:"user",placeholder:"Your Username"}),r.a.createElement("i",{className:"fas fa-check-circle icon1"}),r.a.createElement("i",{className:"fas fa-times-circle icon2"}),r.a.createElement("span",{className:"tool-tip"},"Username must be atleast 5 characters")),r.a.createElement("div",{className:"underline"},r.a.createElement("span",{className:"icon-surround"},r.a.createElement("i",{className:"fas fa-envelope-open-text icon"})),r.a.createElement("input",{type:"email",spellCheck:"false",required:!0,id:"email",placeholder:"Your Email"}),r.a.createElement("i",{className:"fas fa-check-circle icon1"}),r.a.createElement("i",{className:"fas fa-times-circle icon2"}),r.a.createElement("span",{className:"tool-tip"},"Please enter a valid Email Id")),r.a.createElement("div",{className:"underline"},r.a.createElement("span",{className:"icon-surround"},r.a.createElement("i",{className:"fas fa-unlock icon"})),r.a.createElement("input",{required:!0,type:"password",id:"pass",placeholder:"Your Password"}),r.a.createElement("i",{className:"fas fa-eye icon3"}),r.a.createElement("i",{className:"fas fa-eye-slash icon3"}),r.a.createElement("i",{className:"fas fa-check-circle icon1"}),r.a.createElement("i",{className:"fas fa-times-circle icon2"}),r.a.createElement("span",{className:"tool-tip"},"Password must be atleast 8 Characters")),r.a.createElement("div",{className:"underline"},r.a.createElement("span",{className:"icon-surround"},r.a.createElement("i",{className:"fas fa-key icon"})),r.a.createElement("input",{required:!0,type:"password",id:"cpass",placeholder:"Confirm Your Password"}),r.a.createElement("i",{className:"fas fa-eye icon3"}),r.a.createElement("i",{className:"fas fa-eye-slash icon3"}),r.a.createElement("i",{className:"fas fa-check-circle icon1"}),r.a.createElement("i",{className:"fas fa-times-circle icon2"}),r.a.createElement("span",{className:"tool-tip"},"Passwords doesn't match")),r.a.createElement("div",{className:"submit ssub"},"Sign Up")))))))});var K=function(){var e=Object(n.useReducer)(q,[]),a=Object(o.a)(e,2),t=a[0],c=a[1];return r.a.useEffect((function(){var e=localStorage.getItem("id"),a=window.location.href;if(a=new URL(a),e){if(t.user||b.a.get("https://watch-party-latest.herokuapp.com/users/me",{headers:{Authorization:"Bearer "+localStorage.getItem("vid-token")}}).then((function(e){c({type:"SET_USER",user:Object(i.a)(Object(i.a)({},e.data),{},{token:localStorage.getItem("vid-token")})})})),"/create"==a.pathname)return;if("/login"!=a.pathname&&"/"!=a.pathname)return;window.location.href=a.origin+"/create"}else{if("/login"==a.pathname)return;window.redirect="/"==a.pathname?"/create":a.pathname,window.location.href=a.origin+"/login?redirect="+window.redirect}}),[]),r.a.createElement(p.Provider,{value:{video:t,dispatch:c}},r.a.createElement(s.a,null,r.a.createElement(m.c,null,r.a.createElement(m.a,{path:"/login",component:G}),r.a.createElement(m.a,{path:"/create",exact:!0,component:y}),r.a.createElement(m.a,{path:"/selectMedia",component:J}),r.a.createElement($,{path:"/room/:roomID",component:Y,alreadySet:!!t.room}))))};l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(K,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[176,1,2]]]);
//# sourceMappingURL=main.8c0dcb4f.chunk.js.map